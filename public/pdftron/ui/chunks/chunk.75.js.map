{"version":3,"sources":["webpack:///./src/ui/src/components/PageRedactionModal/PageRedactionModal.scss?daf4","webpack:///./src/ui/src/components/PageRedactionModal/PageRedactionModal.scss","webpack:///./src/ui/src/components/PageRedactionModal/PageRedactionModal.js","webpack:///./src/ui/src/components/PageRedactionModal/PageRedactionModalContainer.js","webpack:///./src/ui/src/components/PageRedactionModal/index.js"],"names":["api","content","__esModule","default","module","i","options","styleTag","window","isApryseWebViewerWebComponent","document","head","appendChild","webComponents","getElementsByTagName","length","findNestedWebComponents","tagName","root","elements","querySelectorAll","forEach","el","push","shadowRoot","clonedStyleTags","webComponent","onload","styleNode","innerHTML","cloneNode","exports","locals","propTypes","closeModal","PropTypes","func","currentPage","number","pageLabels","array","selectedPages","markPages","redactPages","evenDisabled","bool","renderCanvases","isOpen","SelectionTypes","PageRedactionModal","_ref","t","useTranslation","_useState2","_slicedToArray","useState","selectionType","setSelectionType","_useState4","pages","setPages","_useState6","pageNumberError","setPageNumberError","useEffect","getSelectedPages","pageNumbers","onRedactWithFocusTransfer","useFocusOnClose","onMarktWithFocusTransfer","canvasContainer","useRef","onSwipe","e","eventTarget","event","target","current","clientHeight","scrollHeight","clientWidth","scrollWidth","contains","stopPropagation","specifyPagesLabelElement","React","createElement","Fragment","className","classNames","error","PageNumberInput","selectedPageNumbers","pageCount","ariaLabel","onSelectedPageNumbersChange","onBlurHandler","onError","pageNumber","concat","Modal","open","closed","data-element","DataElements","PAGE_REDACT_MODAL","ModalWrapper","title","onCloseClick","closeHandler","onSwipedDown","onSwipedUp","swipeToClose","ref","role","aria-labelledby","onChange","classList","value","onSubmit","preventDefault","Choice","checked","radio","name","label","disabled","Button","dataElement","onClick","PageRedactionModalContainer","dispatch","useDispatch","_useSelector2","useSelector","state","selectors","isElementOpen","getCurrentPage","getSelectedThumbnailPageIndexes","getPageLabels","getActiveToolName","getActiveToolStyles","selectedIndexes","activeToolName","activeToolStyles","renderCanvasesCount","map","index","actions","closeElements","PRINT_MODAL","LOADING_MODAL","PROGRESS_MODAL","ERROR_MODAL","closeElement","getRedactionStyles","includes","setEvenDisabled","docLoaded","core","getDocument","documentCompletePromise","getDocumentCompletePromise","then","getPageCount","addEventListener","removeEventListener","_pagesToRender","callCount","pagesToRender","_toConsumableArray","doc","firstChild","removeChild","splice","_step","_iterator","_createForOfIteratorHelper","_loop","pageInfo","getPageInfo","zoom","rect","getBoundingClientRect","borderWidth","parseInt","getComputedStyle","height","width","loadCanvas","pageRotation","drawComplete","canvas","_canvasContainer$curr","setAttribute","allowUseOfOptimizedThumbnail","s","n","done","err","f","createPageRedactions"],"mappings":"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","file":"chunks/chunk.75.js","sourcesContent":["var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./PageRedactionModal.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function(styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach((el) => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach((el) => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function() {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".open.PageRedactionModal{visibility:visible}.closed.PageRedactionModal{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.PageRedactionModal .footer .modal-button.confirm:hover{background:var(--primary-button-hover);border-color:var(--primary-button-hover);color:var(--gray-0)}.PageRedactionModal .footer .modal-button.confirm{background:var(--primary-button);border-color:var(--primary-button);color:var(--primary-button-text)}.PageRedactionModal .footer .modal-button.confirm.disabled{cursor:default;background:var(--disabled-button-color);color:var(--primary-button-text)}.PageRedactionModal .footer .modal-button.confirm.disabled span{color:var(--primary-button-text)}.PageRedactionModal .footer .modal-button.cancel:hover,.PageRedactionModal .footer .modal-button.secondary-btn-custom:hover{border:none;box-shadow:inset 0 0 0 1px var(--blue-6);color:var(--blue-6)}.PageRedactionModal .footer .modal-button.cancel,.PageRedactionModal .footer .modal-button.secondary-btn-custom{border:none;box-shadow:inset 0 0 0 1px var(--primary-button);color:var(--primary-button)}.PageRedactionModal .footer .modal-button.cancel.disabled,.PageRedactionModal .footer .modal-button.secondary-btn-custom.disabled{cursor:default;border:none;box-shadow:inset 0 0 0 1px rgba(43,115,171,.5);color:rgba(43,115,171,.5)}.PageRedactionModal .footer .modal-button.cancel.disabled span,.PageRedactionModal .footer .modal-button.secondary-btn-custom.disabled span{color:rgba(43,115,171,.5)}.PageRedactionModal{position:fixed;inset-inline-start:0;inset-block-end:0;z-index:100;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:var(--modal-negative-space)}.PageRedactionModal .modal-container .wrapper .modal-content{padding:10px}.PageRedactionModal .footer{display:flex;flex-direction:row;justify-content:flex-end;width:100%;margin-top:13px}.PageRedactionModal .footer.modal-footer{padding:16px;margin:0;border-top:1px solid var(--divider)}.PageRedactionModal .footer .modal-button{display:flex;justify-content:center;align-items:center;padding:6px 18px;margin:8px 0 0;width:auto;width:-moz-fit-content;width:fit-content;border-radius:4px;height:30px;cursor:pointer}.PageRedactionModal .footer .modal-button.confirm{margin-inline-start:4px}.PageRedactionModal .footer .modal-button.secondary-btn-custom{border-radius:4px;padding:2px 20px 4px;cursor:pointer}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .footer .modal-button{padding:23px 8px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .footer .modal-button{padding:23px 8px}}.PageRedactionModal .swipe-indicator{background:var(--swipe-indicator-bg);border-radius:2px;height:4px;width:38px;position:absolute;inset-block-start:12px;margin-inline-start:auto;margin-inline-end:auto;inset-inline-start:0;inset-inline-end:0}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .swipe-indicator{display:none}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .swipe-indicator{display:none}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .swipe-indicator{width:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .swipe-indicator{width:32px}}.PageRedactionModal .modal-container{align-items:center;background:var(--component-background);width:888px}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .modal-container{width:480px}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .modal-container{width:480px}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .modal-container{width:100%}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .modal-container{width:100%}}.PageRedactionModal .modal-container .body{padding:16px;grid-gap:16px;gap:16px;display:flex;width:100%}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .modal-container .body{display:flex;grid-gap:5px;gap:5px;flex-direction:column}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .modal-container .body{display:flex;grid-gap:5px;gap:5px;flex-direction:column}}.PageRedactionModal .modal-container .body .canvas-container{border:1px solid var(--lighter-border);background-color:var(--file-preview-background);height:448px;width:60%;display:flex;align-items:center;justify-content:space-between;flex-direction:column;overflow:auto;grid-gap:5px;gap:5px}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .modal-container .body .canvas-container{width:55%;height:300px}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .modal-container .body .canvas-container{width:55%;height:300px}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .modal-container .body .canvas-container{width:100%;height:250px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .modal-container .body .canvas-container{width:100%;height:250px}}.PageRedactionModal .modal-container .body .canvas-container canvas{box-shadow:0 0 3px 0 var(--box-shadow)}.PageRedactionModal .modal-container .body .selection-options{width:40%;grid-gap:12px;gap:12px;display:flex;flex-direction:column}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .modal-container .body .selection-options{width:100%}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .modal-container .body .selection-options{width:100%}}.PageRedactionModal .modal-container .body .selection-options fieldset{border:0;padding:0;margin:0;min-width:0;display:grid;grid-gap:12px;gap:12px}.PageRedactionModal .modal-container .body .selection-options legend{padding:0;margin-bottom:12px}.PageRedactionModal .modal-container .body .selection-options .page-number-input-container{width:100%;margin-top:8px}.PageRedactionModal .modal-container .body .selection-options .page-number-input-container .PageNumberInput{height:54px}.PageRedactionModal .modal-container .body .selection-options .page-number-input-container .PageNumberInput .page-number-input{height:32px;width:100%;align-self:flex-end}.PageRedactionModal .modal-container .body .selection-options .ui__choice--disabled{text-decoration:line-through}.PageRedactionModal .modal-container .body .selection-options .ui__choice{font-size:13px;margin:0}.PageRedactionModal .modal-container .body .selection-options .ui__choice.specify-pages-choice.ui__choice--checked{align-items:baseline;height:75px}.PageRedactionModal .modal-container .body .selection-options .ui__choice.specify-pages-choice.ui__choice--checked .ui__choice__label{width:100%;position:relative;inset-block-start:-2px}.PageRedactionModal .modal-container .body .selection-options .ui__choice .specifyPagesChoiceLabel{display:flex}.PageRedactionModal .modal-container .body .selection-options .ui__choice .specifyPagesChoiceLabel .specifyPagesExampleLabel{margin-inline-start:4px;color:var(--faded-text)}.PageRedactionModal .modal-container .footer{margin-top:0;width:100%;display:flex;align-items:center;justify-content:flex-end;padding:16px;border-top:1px solid var(--divider)}.PageRedactionModal .modal-container .footer .Button{margin-top:0;height:32px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .PageRedactionModal .modal-container .footer .Button{padding:8px 16px!important}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .PageRedactionModal .modal-container .footer .Button{padding:8px 16px!important}}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React, { useEffect, useState, useRef } from 'react';\nimport DataElements from 'constants/dataElement';\nimport classNames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport Button from 'components/Button';\nimport Choice from 'components/Choice';\nimport PropTypes from 'prop-types';\nimport PageNumberInput from 'components/PageReplacementModal/PageNumberInput';\nimport ModalWrapper from 'components/ModalWrapper';\nimport useFocusOnClose from 'hooks/useFocusOnClose';\n\nimport './PageRedactionModal.scss';\n\nconst propTypes = {\n  closeModal: PropTypes.func,\n  currentPage: PropTypes.number,\n  pageLabels: PropTypes.array,\n  selectedPages: PropTypes.array,\n  markPages: PropTypes.func,\n  redactPages: PropTypes.func,\n  evenDisabled: PropTypes.bool,\n  renderCanvases: PropTypes.func,\n  isOpen: PropTypes.bool,\n};\n\nconst SelectionTypes = {\n  CURRENT: 'current',\n  SPECIFY: 'specify',\n  ODD: 'odd',\n  EVEN: 'even',\n};\n\nconst PageRedactionModal = ({\n  closeModal,\n  pageLabels,\n  selectedPages,\n  currentPage,\n  markPages,\n  redactPages,\n  evenDisabled,\n  renderCanvases,\n  isOpen,\n}) => {\n  const { t } = useTranslation();\n\n  const [selectionType, setSelectionType] = useState(SelectionTypes.CURRENT);\n  const [pages, setPages] = useState();\n  const [pageNumberError, setPageNumberError] = useState('');\n\n  useEffect(() => {\n    setPages(selectedPages);\n  }, [selectedPages]);\n\n  const getSelectedPages = () => {\n    const pageNumbers = [];\n    if (selectionType === SelectionTypes.CURRENT) {\n      return [currentPage];\n    }\n    if (selectionType === SelectionTypes.SPECIFY) {\n      return pages;\n    }\n    if (selectionType === SelectionTypes.ODD) {\n      for (let i = 1; pageLabels.length >= i; i += 2) {\n        pageNumbers.push(i);\n      }\n    } else if (selectionType === SelectionTypes.EVEN) {\n      for (let i = 2; pageLabels.length >= i; i += 2) {\n        pageNumbers.push(i);\n      }\n    }\n    return pageNumbers;\n  };\n\n  const onMark = () => markPages(getSelectedPages());\n  const onRedact = () => redactPages(getSelectedPages());\n  const onRedactWithFocusTransfer = useFocusOnClose(onRedact);\n  const onMarktWithFocusTransfer = useFocusOnClose(onMark);\n\n  const canvasContainer = useRef();\n  useEffect(() => {\n    if (isOpen) {\n      renderCanvases(canvasContainer, getSelectedPages());\n    }\n  }, [selectionType, isOpen, pages, renderCanvases, getSelectedPages]);\n\n  const onSwipe = (e) => {\n    const eventTarget = e.event.target;\n    const containerHasScroll =\n      canvasContainer.current.clientHeight < canvasContainer.current.scrollHeight ||\n      canvasContainer.current.clientWidth < canvasContainer.current.scrollWidth;\n    if (\n      containerHasScroll &&\n      (eventTarget === canvasContainer.current || canvasContainer.current.contains(eventTarget))\n    ) {\n      e.event.stopPropagation();\n    } else {\n      closeModal();\n    }\n  };\n\n  const onSelectionChange = (e) => {\n    if (!e.target.classList.contains('page-number-input')) {\n      setSelectionType(e.target.value);\n      setPageNumberError('');\n    }\n  };\n  const onPagesChanged = (pageNumbers) => {\n    if (pageNumbers.length > 0) {\n      setPageNumberError('');\n      setPages(pageNumbers);\n    }\n  };\n\n  const handlePageNumberError = (pageNumber) => {\n    if (pageNumber) {\n      setPageNumberError(`${t('message.errorPageNumber')} ${pageLabels.length}`);\n    }\n  };\n\n  const specifyPagesLabelElement = (\n    <>\n      <label className=\"specifyPagesChoiceLabel\">\n        <span>{t('option.pageRedactModal.specify')}</span>\n        {selectionType === 'specify' && (\n          <span className=\"specifyPagesExampleLabel\">\n            - {t('option.thumbnailPanel.multiSelectPagesExample')}\n          </span>\n        )}\n      </label>\n      {selectionType === 'specify' && (\n        <div className={classNames('page-number-input-container', { error: !!pageNumberError })}>\n          <PageNumberInput\n            selectedPageNumbers={pages}\n            pageCount={pageLabels.length}\n            ariaLabel={t('option.pageRedactModal.specify')}\n            onSelectedPageNumbersChange={onPagesChanged}\n            onBlurHandler={setPages}\n            onError={handlePageNumberError}\n            pageNumberError={pageNumberError}\n          />\n        </div>\n      )}\n    </>\n  );\n\n  return (\n    <div\n      className={classNames({\n        Modal: true,\n        PageRedactionModal: true,\n        open: isOpen,\n        closed: !isOpen,\n      })}\n      data-element={DataElements.PAGE_REDACT_MODAL}\n    >\n      <ModalWrapper\n        title=\"action.redactPages\"\n        isOpen={isOpen}\n        onCloseClick={closeModal}\n        closeHandler={closeModal}\n        onSwipedDown={onSwipe}\n        onSwipedUp={onSwipe}\n        swipeToClose\n      >\n        <div className=\"body\">\n          <div className=\"canvas-container\" ref={canvasContainer} />\n          <form className=\"selection-options\" role=\"group\" aria-labelledby={t('option.pageRedactModal.pageSelection')} onChange={onSelectionChange} onSubmit={(e) => e.preventDefault()}>\n            <fieldset>\n              <legend>\n                <strong>{t('option.pageRedactModal.pageSelection')}</strong>\n              </legend>\n              <Choice\n                checked={selectionType === SelectionTypes.CURRENT}\n                radio\n                name=\"page-redaction-option\"\n                label={t('option.pageRedactModal.current')}\n                value={SelectionTypes.CURRENT}\n              />\n              <Choice\n                checked={selectionType === SelectionTypes.SPECIFY}\n                radio\n                name=\"page-redaction-option\"\n                className=\"specify-pages-choice\"\n                label={specifyPagesLabelElement}\n                value={SelectionTypes.SPECIFY}\n              />\n              <Choice\n                checked={selectionType === SelectionTypes.ODD}\n                radio\n                name=\"page-redaction-option\"\n                label={t('option.pageRedactModal.odd')}\n                value={SelectionTypes.ODD}\n              />\n              <Choice\n                checked={selectionType === SelectionTypes.EVEN}\n                radio\n                name=\"page-redaction-option\"\n                label={t('option.pageRedactModal.even')}\n                value={SelectionTypes.EVEN}\n                disabled={evenDisabled}\n              />\n            </fieldset>\n          </form>\n        </div>\n        <div className=\"footer\">\n          <Button\n            className=\"cancel modal-button secondary-button\"\n            dataElement=\"modalRedactButton\"\n            label=\"annotation.redact\"\n            disabled={pageNumberError}\n            onClick={onRedactWithFocusTransfer}\n          />\n          <Button\n            className=\"confirm modal-button\"\n            dataElement=\"modalMarkRedactButton\"\n            label=\"option.pageRedactModal.addMark\"\n            disabled={pageNumberError}\n            onClick={onMarktWithFocusTransfer}\n          />\n        </div>\n      </ModalWrapper>\n    </div>\n  );\n};\n\nPageRedactionModal.propTypes = propTypes;\n\nexport default PageRedactionModal;\n","import React, { useEffect, useState, useRef } from 'react';\nimport DataElements from 'constants/dataElement';\nimport { useDispatch, useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport core from 'core';\nimport { createPageRedactions, redactPages } from 'helpers/pageManipulationFunctions';\nimport PageRedactionModal from 'components/PageRedactionModal/PageRedactionModal';\nimport { useTranslation } from 'react-i18next';\n\nimport './PageRedactionModal.scss';\n\nconst MAX_CANVAS_COUNT = 10;\n\nconst PageRedactionModalContainer = () => {\n  const dispatch = useDispatch();\n  const [isOpen, currentPage, selectedIndexes, pageLabels, activeToolName, activeToolStyles] = useSelector((state) => [\n    selectors.isElementOpen(state, DataElements.PAGE_REDACT_MODAL),\n    selectors.getCurrentPage(state),\n    selectors.getSelectedThumbnailPageIndexes(state),\n    selectors.getPageLabels(state),\n    selectors.getActiveToolName(state),\n    selectors.getActiveToolStyles(state)\n  ]);\n  const renderCanvasesCount = useRef(0);\n\n  const selectedPages = selectedIndexes.map((index) => index + 1);\n\n  useEffect(() => {\n    if (isOpen) {\n      dispatch(actions.closeElements([\n        DataElements.PRINT_MODAL,\n        DataElements.LOADING_MODAL,\n        DataElements.PROGRESS_MODAL,\n        DataElements.ERROR_MODAL,\n      ]));\n    }\n  }, [isOpen, dispatch]);\n\n  const closeModal = () => dispatch(actions.closeElement(DataElements.PAGE_REDACT_MODAL));\n  const getRedactionStyles = () => (activeToolName?.includes('AnnotationCreateRedaction') ? activeToolStyles : {});\n  const { t } = useTranslation();\n\n  const onRedact = (pageNumbers) => {\n    redactPages(pageNumbers, getRedactionStyles());\n    closeModal();\n  };\n\n  const markPages = (pageNumbers) => {\n    createPageRedactions(pageNumbers, getRedactionStyles());\n    closeModal();\n  };\n\n  const renderCanvases = (canvasContainer, pageNumbers) => {\n    renderCanvasesCount.current++;\n    const callCount = renderCanvasesCount.current;\n    // Clone the array so that we don't modify the original array\n    let pagesToRender = [...pageNumbers];\n\n    const doc = core.getDocument();\n    while (canvasContainer.current.firstChild) {\n      canvasContainer.current.removeChild(canvasContainer.current.firstChild);\n    }\n    if (!pagesToRender) {\n      return;\n    }\n    if (pagesToRender?.length > MAX_CANVAS_COUNT) {\n      pagesToRender = pagesToRender.splice(0, MAX_CANVAS_COUNT);\n    }\n    for (const pageNumber of pagesToRender) {\n      const pageInfo = doc?.getPageInfo(pageNumber);\n      if (isOpen && doc && canvasContainer.current && pageInfo) {\n        let zoom = 1;\n        const rect = canvasContainer.current.getBoundingClientRect();\n        const borderWidth = parseInt(window.getComputedStyle(canvasContainer.current).borderWidth) + 0.1;\n        rect.height -= borderWidth;\n        rect.width -= borderWidth;\n        if (pageInfo.width > pageInfo.height) {\n          zoom = rect.width / pageInfo.width;\n        } else {\n          zoom = rect.height / pageInfo.height;\n        }\n        zoom > 0 && doc.loadCanvas({\n          pageNumber,\n          zoom,\n          pageRotation: 0,\n          drawComplete: (canvas) => {\n            if (callCount === renderCanvasesCount.current && canvasContainer.current?.appendChild(canvas)) {\n              canvas.setAttribute('role', 'img');\n              canvas.setAttribute('aria-label', `${t('action.page')} ${pageNumber}`);\n            }\n          },\n          allowUseOfOptimizedThumbnail: true\n        });\n      }\n    }\n  };\n\n  const [evenDisabled, setEvenDisabled] = useState(false);\n  useEffect(() => {\n    const docLoaded = () => {\n      const document = core.getDocument();\n      const documentCompletePromise = document.getDocumentCompletePromise();\n\n      // Office documents don't have all pages available onload, so we need to\n      // wait for the documentCompletePromise to resolve before we can check\n      documentCompletePromise?.then(() => {\n        const pageCount = document.getPageCount();\n        if (pageCount < 2) {\n          setEvenDisabled(true);\n        } else {\n          setEvenDisabled(false);\n        }\n      });\n    };\n    core.addEventListener('documentLoaded', docLoaded);\n    return () => core.removeEventListener('documentLoaded', docLoaded);\n  }, []);\n\n  return (\n    <PageRedactionModal\n      evenDisabled={evenDisabled}\n      closeModal={closeModal}\n      renderCanvases={renderCanvases}\n      redactPages={onRedact}\n      markPages={markPages}\n      currentPage={currentPage}\n      selectedPages={selectedPages}\n      pageLabels={pageLabels}\n      isOpen={isOpen}\n    />\n  );\n};\n\nexport default PageRedactionModalContainer;","import PageRedactionModalContainer from 'components/PageRedactionModal/PageRedactionModalContainer';\n\nexport default PageRedactionModalContainer;"],"sourceRoot":""}