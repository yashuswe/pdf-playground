{"version":3,"sources":["webpack:///./src/ui/node_modules/quill-delta/dist/Delta.js","webpack:///./src/ui/node_modules/parchment/dist/parchment.js","webpack:///./src/ui/node_modules/lodash-es/_arrayEach.js","webpack:///./src/ui/node_modules/lodash-es/keys.js","webpack:///./src/ui/node_modules/lodash-es/_baseAssign.js","webpack:///./src/ui/node_modules/lodash-es/_baseAssignIn.js","webpack:///./src/ui/node_modules/lodash-es/_getSymbols.js","webpack:///./src/ui/node_modules/lodash-es/_copySymbols.js","webpack:///./src/ui/node_modules/lodash-es/_getSymbolsIn.js","webpack:///./src/ui/node_modules/lodash-es/_copySymbolsIn.js","webpack:///./src/ui/node_modules/lodash-es/_getAllKeysIn.js","webpack:///./src/ui/node_modules/lodash-es/_initCloneArray.js","webpack:///./src/ui/node_modules/lodash-es/_initCloneByTag.js","webpack:///./src/ui/node_modules/lodash-es/isMap.js","webpack:///./src/ui/node_modules/lodash-es/isSet.js","webpack:///./src/ui/node_modules/lodash-es/_baseClone.js","webpack:///./src/ui/node_modules/lodash-es/cloneDeep.js","webpack:///../../src/blots/break.ts","webpack:///../../src/blots/text.ts","webpack:///../../src/blots/inline.ts","webpack:///../../src/blots/block.ts","webpack:///../../src/blots/cursor.ts","webpack:///../../src/core/instances.ts","webpack:///../../src/core/logger.ts","webpack:///../../src/core/emitter.ts","webpack:///../../src/core/selection.ts","webpack:///../../src/core/editor.ts","webpack:///../../src/core/module.ts","webpack:///../../src/blots/embed.ts","webpack:///../../src/core/composition.ts","webpack:///../../src/core/theme.ts","webpack:///../../../src/core/utils/scrollRectIntoView.ts","webpack:///../../../src/core/utils/createRegistryWithFormats.ts","webpack:///../../src/core/quill.ts","webpack:///../../src/blots/container.ts","webpack:///../../src/blots/scroll.ts","webpack:///../../src/formats/align.ts","webpack:///../../src/formats/color.ts","webpack:///../../src/formats/background.ts","webpack:///../../src/formats/code.ts","webpack:///../../src/formats/direction.ts","webpack:///../../src/formats/font.ts","webpack:///../../src/formats/size.ts","webpack:///../../src/modules/keyboard.ts","webpack:///../../../../src/modules/normalizeExternalHTML/normalizers/googleDocs.ts","webpack:///../../../../src/modules/normalizeExternalHTML/normalizers/msWord.ts","webpack:///../../../src/modules/normalizeExternalHTML/index.ts","webpack:///../../src/modules/clipboard.ts","webpack:///../../src/modules/history.ts","webpack:///../../src/modules/uploader.ts","webpack:///../../src/modules/input.ts","webpack:///../../src/modules/uiNode.ts","webpack:///../src/core.ts","webpack:///../../src/formats/indent.ts","webpack:///../../src/formats/blockquote.ts","webpack:///../../src/formats/header.ts","webpack:///../../src/formats/list.ts","webpack:///../../src/formats/bold.ts","webpack:///../../src/formats/italic.ts","webpack:///../../src/formats/link.ts","webpack:///../../src/formats/script.ts","webpack:///../../src/formats/strike.ts","webpack:///../../src/formats/underline.ts","webpack:///../../src/formats/formula.ts","webpack:///../../src/formats/image.ts","webpack:///../../src/formats/video.ts","webpack:///../../src/modules/syntax.ts","webpack:///../../src/formats/table.ts","webpack:///../../src/modules/table.ts","webpack:///../../src/modules/toolbar.ts","webpack:///../../src/ui/icons.ts","webpack:///../../src/ui/picker.ts","webpack:///../../src/ui/color-picker.ts","webpack:///../../src/ui/icon-picker.ts","webpack:///../../src/ui/tooltip.ts","webpack:///../../src/themes/base.ts","webpack:///../../src/themes/bubble.ts","webpack:///../../src/themes/snow.ts","webpack:///../src/quill.ts","webpack:///./src/ui/node_modules/core-js/modules/es.weak-map.js","webpack:///./src/ui/node_modules/core-js/modules/es.string.link.js","webpack:///../src/index.tsx","webpack:///./src/ui/node_modules/lodash.clonedeep/index.js","webpack:///./src/ui/node_modules/lodash.isequal/index.js","webpack:///./src/ui/node_modules/quill-delta/dist/Op.js","webpack:///./src/ui/node_modules/lodash-es/_getTag.js","webpack:///./src/ui/node_modules/lodash-es/_getAllKeys.js","webpack:///./src/ui/node_modules/lodash/escape.js","webpack:///./src/ui/node_modules/lodash/_escapeHtmlChar.js","webpack:///./src/ui/node_modules/lodash/_basePropertyOf.js","webpack:///./src/ui/node_modules/fast-diff/diff.js","webpack:///./src/ui/node_modules/quill-delta/dist/AttributeMap.js","webpack:///./src/ui/node_modules/quill-delta/dist/OpIterator.js","webpack:///./src/ui/node_modules/eventemitter3/index.js","webpack:///./src/ui/node_modules/core-js/modules/es.weak-map.constructor.js","webpack:///./src/ui/node_modules/core-js/internals/collection-weak.js","webpack:///./src/ui/node_modules/core-js/modules/web.queue-microtask.js","webpack:///./src/ui/node_modules/dompurify/dist/purify.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/utils.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/html-tag.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/anchor-tag-builder.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/matcher/url-matcher.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/truncate/truncate-smart.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/truncate/truncate-middle.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/truncate/truncate-end.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/match/match.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/match/email-match.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/match/hashtag-match.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/match/mention-match.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/match/phone-match.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/match/url-match.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/matcher/matcher.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/regex-lib.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/matcher/tld-regex.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/matcher/email-matcher.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/matcher/url-match-validator.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/matcher/hashtag-matcher.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/matcher/phone-matcher.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/matcher/mention-matcher.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/htmlParser/parse-html.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/autolinker.js","webpack:///./src/ui/node_modules/autolinker/dist/es2015/index.js","webpack:///../../src/blots/mention.ts","webpack:///../../src/constants/index.ts","webpack:///../../src/utils/index.ts","webpack:///../src/mention.ts","webpack:///./src/ui/node_modules/lodash-es/_SetCache.js","webpack:///./src/ui/node_modules/lodash-es/_arraySome.js","webpack:///./src/ui/node_modules/lodash-es/_baseIndexOf.js","webpack:///./src/ui/node_modules/lodash-es/_cacheHas.js","webpack:///./src/ui/node_modules/lodash-es/_equalArrays.js","webpack:///./src/ui/node_modules/lodash-es/_equalByTag.js","webpack:///./src/ui/node_modules/lodash-es/_equalObjects.js","webpack:///./src/ui/node_modules/lodash-es/_baseIsEqualDeep.js","webpack:///./src/ui/node_modules/lodash-es/_baseIsEqual.js","webpack:///./src/ui/node_modules/lodash-es/isEqual.js"],"names":["Object","defineProperty","exports","value","AttributeMap","OpIterator","Op","diff","cloneDeep","isEqual","AttributeMap_1","default","Op_1","OpIterator_1","NULL_CHARACTER","String","fromCharCode","getEmbedTypeAndData","a","b","Error","embedType","keys","Delta","ops","Array","isArray","this","handler","handlers","arg","attributes","newOp","length","insert","push","delete","retain","index","lastOp","unshift","splice","pop","predicate","filter","forEach","map","passed","failed","op","initialValue","reduce","elem","start","end","Infinity","iter","hasNext","nextOp","next","other","thisIter","otherIter","firstOther","peek","firstLeft","peekType","peekLength","delta","Math","min","thisOp","otherOp","action","thisData","otherData","getHandler","compose","rest","concat","chop","slice","cursor","strings","join","retDelta","diffResult","component","opLength","INSERT","DELETE","EQUAL","newline","line","i","indexOf","base","inverted","baseIndex","baseOp","invert","opData","baseOpData","priority","transformPosition","transformedData","transform","offset","nextType","module","Scope","Scope2","TYPE","LEVEL","ATTRIBUTE","BLOT","INLINE","BLOCK","BLOCK_BLOT","INLINE_BLOT","BLOCK_ATTRIBUTE","INLINE_ATTRIBUTE","ANY","Attributor","attrName","keyName","options","attributeBit","scope","whitelist","node","from","item","name","canAdd","setAttribute","_node","replace","removeAttribute","getAttribute","ParchmentError","message","super","constructor","_Registry","classes","tags","types","bubble","blots","has","get","parentNode","find","scroll","input","match2","query","blotClass","Node","nodeType","TEXT_NODE","create","blot","set","domNode","Text","text","block","inline","Element","split","some","tagName","definitions","definition","isBlot","isAttr","blotName","key","className","toUpperCase","tag","WeakMap","Registry","prefix","ClassAttributor$1","remove","classList","add","camelize","parts","part","StyleAttributor$1","trim","style","AttributorStore$1","build","attribute","styles","attr","target","format","copy","_ShadowBlot","prev","rawValue","parseInt","toString","document","createElement","cloneNode","parent","removeChild","isolate","wrap","statics","def","ref","insertBefore","root","children","_context","requiredContainer","detach","replacement","_force","_mutations","wrapper","appendChild","ShadowBlot","_LeafBlot","_domNode","compareDocumentPosition","DOCUMENT_POSITION_CONTAINED_BY","_inclusive","childNodes","LeafBlot$1","LinkedList","head","tail","nodes","append","iterator","cur","refNode","contains","curNode","ret","inclusive","callback","startNode","curIndex","curLength","memo","makeAttachedBlot","found","child","replaceChild","attach","_ParentBlot","uiNode","uiClass","firstChild","reverse","err","forEachAt","childLength","deleteAt","criteria","descendant","Number","MAX_VALUE","descendants","lengthLeft","childIndex","done","allowedChildren","splitAfter","unwrap","formatAt","insertAt","childBlot","refBlot","refDomNode","nextSibling","targetParent","context","optimize","enforceAllowedChildren","defaultChild","position","path","moveChildren","replaceWith","force","after","clone","_length","mutations","addedNodes","removedNodes","mutation","type","body","sort","DOCUMENT_POSITION_FOLLOWING","ParentBlot$1","_InlineBlot","toLowerCase","formats","values","obj1","obj2","prop","update","move","InlineBlot$1","_BlockBlot","BlockBlot$1","_ContainerBlot","checkMerge","ContainerBlot$1","EmbedBlot$1","_scroll","OBSERVER_CONFIG","characterData","characterDataOldValue","childList","subtree","registry","observer","MutationObserver","observe","register","disconnect","mutationsMap","records","takeRecords","mark","markParent","remaining","previousSibling","grandChild","ScrollBlot$1","_TextBlot","createTextNode","data","splitText","TextBlot$1","array","iteratee","object","source","keysIn","result","prototype","hasOwnProperty","call","cloneableTags","baseClone","bitmask","customizer","stack","isDeep","isFlat","isFull","undefined","isObject","isArr","isFunc","isBuffer","stacked","isSet","subValue","isMap","keysFunc","props","Break","_EmbedBlot","_classCallCheck","_callSuper","arguments","_inherits","EmbedBlot","TextBlot","entityMap","escapeText","s","Inline","self","selfIndex","order","otherIndex","compare","_superPropGet","InlineBlot","_defineProperty","Block","_this","_len","args","_key","_createClass","cache","blockDelta","lines","shift","lineIndex","BlockBlot","BlockEmbed","AttributorStore","_objectSpread","_this2","blocks","LeafBlot","leaf","bubbleFormats","Cursor","selection","textNode","CONTENTS","savedLength","composing","range","getNativeRange","lastChild","mergedTextBlot","prevTextBlot","prevTextLength","nextTextBlot","nextText","newText","newTextNode","remapOffset","startOffset","endNode","endOffset","restore","levels","level","debug","method","_console","console","apply","namespace","ns","logger","bind","newLevel","eventName","addEventListener","querySelectorAll","_quill$emitter","quill","instances","emitter","handleDOM","Emitter","_EventEmitter","domListeners","on","error","_debug$log","_len2","_key2","log","event","_len3","_key3","_ref","EventEmitter","EDITOR_CHANGE","SCROLL_BEFORE_UPDATE","SCROLL_BLOT_MOUNT","SCROLL_BLOT_UNMOUNT","SCROLL_OPTIMIZE","SCROLL_UPDATE","SCROLL_EMBED_UPDATE","SELECTION_CHANGE","TEXT_CHANGE","COMPOSITION_BEFORE_START","COMPOSITION_START","COMPOSITION_BEFORE_END","COMPOSITION_END","API","SILENT","USER","Range","e","Selection","mouseDown","savedRange","lastRange","lastNative","handleComposition","handleDragging","listenDOM","setTimeout","sources","events","hasFocus","native","once","setNativeRange","triggeredByTyping","ignored","_context$range","_this3","focus","preventScroll","setRange","nativeRange","collapsed","scrollLength","_this$scroll$leaf","_this$scroll$leaf2","_slicedToArray","_this$scroll$leaf3","_this$scroll$leaf4","_this$scroll$line","_this$scroll$line2","_this$scroll$line3","_this$scroll$line4","nextLine","_leaf$position","_leaf$position2","createRange","setStart","_this$scroll$leaf5","_this$scroll$leaf6","_leaf$position3","_leaf$position4","setEnd","getBoundingClientRect","rect","side","bottom","top","height","left","right","width","getSelection","rangeCount","getRangeAt","normalizeNative","info","isConnected","normalized","normalizedToRange","activeElement","_this4","positions","indexes","_position","max","_toConsumableArray","startContainer","endContainer","_this5","getPosition","_this5$scroll$leaf2","leafOffset","removeAllRanges","addRange","blur","rangeToNative","oldRange","_this$getRange","getRange","_this$getRange2","_this$emitter","_this$emitter2","emit","ASCII","convertListHTML","items","lastIndent","endTag","getListType","_items","_toArray","_items$","indent","_getListType4","convertHTML","previousType","isRoot","html","escapedText","replaceAll","ParentBlot","list","_blot$domNode","outerHTML","innerHTML","_outerHTML$split","_outerHTML$split2","combineFormats","combined","merged","combinedValue","normalizeDelta","normalizedDelta","shiftRange","amount","Editor","getDelta","batchStart","deleteDelta","isImplicitNewlinePrepended","isImplicitNewlineAppended","endsWith","merge","_typeof","isInlineEmbed","_this$scroll$descenda2","updateEmbedAt","prependedLength","addedLength","batchEnd","leaves","_map","_map2","lineFormats","leafFormats","lineOffset","lineLength","getContents","contents","change","insertContents","embed","getText","_this$scroll$line6","suffixLength","suffix","applyDelta","selectionInfo","oldDelta","match","textBlot","oldValue","CursorBlot","oldText","relativeSelectionInfo","newRange","diffDelta","Module","Embed","contentNode","childNode","leftGuard","rightGuard","prevLength","Composition","setupListeners","isComposing","handleCompositionStart","queueMicrotask","handleCompositionEnd","Theme","modules","addModule","ModuleClass","_Theme","getElementRect","element","scaleX","abs","offsetWidth","scaleY","offsetHeight","clientWidth","clientHeight","paddingValueToInt","number","isNaN","getScrollDistance","targetStart","targetEnd","scrollStart","scrollEnd","scrollPaddingStart","scrollPaddingEnd","scrollRectIntoView","targetRect","ownerDocument","current","_window$visualViewpor","_window$visualViewpor2","_window$visualViewpor3","_window$visualViewpor4","isDocumentBody","bounding","window","visualViewport","documentElement","getComputedStyle","scrollDistanceX","scrollPaddingLeft","scrollPaddingRight","scrollDistanceY","scrollPaddingTop","scrollPaddingBottom","_document$defaultView","defaultView","scrollBy","_current","scrollLeft","scrollTop","scrolledLeft","scrolledTop","parentElement","getRootNode","host","CORE_FORMATS","createRegistryWithFormats","sourceRegistry","coreBlot","iterations","_format$requiredConta","globalRegistry","Parchment","Quill","container","expandConfig","addContainer","scrollBlotName","ScrollBlot","editor","composition","theme","keyboard","clipboard","history","uploader","init","toggle","isBlank","modify","convert","setContents","clear","placeholder","readOnly","disable","allowReadOnlyEdits","_overload2","overload","deleteText","enable","modifier","enabled","scrollSelectionIntoView","formatLine","formatText","setSelection","_overload4","_overload6","bounds","getBounds","containerBounds","getLength","_overload7","_overload8","getFormat","_overload9","_overload0","getHTML","_overload1","_overload10","_this6","insertEmbed","_this7","_overload12","insertText","isEnabled","off","_this$emitter3","_this8","_overload14","removeFormat","warn","_this9","delete1","applied","delete2","_overload16","_this0","limit","imports","_this1","overwrite","startsWith","resolveSelector","selector","querySelector","expandModuleConfig","config","entries","expanded","_ref3","omitUndefinedValuesFromOptions","obj","fromEntries","entry","containerOrSelector","DEFAULTS","_Quill$DEFAULTS","quillModuleDefaults","quillDefaults","_objectWithoutProperties","_excluded","_theme$DEFAULTS","themeModuleDefaults","themeDefaults","_excluded2","userModuleOptions","toolbar","modulesWithDefaults","_ref2","_ref4","moduleClass","_this$emitter4","_this$emitter5","lengthOrSource","pos","_map4","parchment","Container","ContainerBlot","isLine","isUpdatable","updateContent","Scroll","_ScrollBlot","batch","handleDragStart","_this$line2","first","last","renderBlocks","deltaToRenderBlocks","shouldInsertNewlineChar","insertInlineContents","newlineCharLength","lineEndIndex","_this$children$find2","refBlotOffset","renderBlock","createBlock","blockEmbed","_last","getLines","blotIndex","blotLength","preventDefault","currentBlockDelta","splitted","_op$attributes","_op$attributes2","_ref5","_ref6","inlineContents","AlignAttribute","AlignClass","ClassAttributor","AlignStyle","StyleAttributor","ColorAttributor","_StyleAttributor","hex","ColorClass","ColorStyle","BackgroundClass","BackgroundStyle","CodeBlockContainer","_Container","innerText","code","CodeBlock","_Block","Code","_Inline","DirectionAttribute","DirectionClass","DirectionStyle","FontClass","FontStyle","FontStyleAttributor","SizeClass","SizeStyle","SHORTKEY","test","navigator","platform","Keyboard","_Module","bindings","addBinding","shiftKey","handleEnter","metaKey","ctrlKey","altKey","userAgent","handleBackspace","handleDelete","handleDeleteRange","listen","keyBinding","binding","normalize","singleBinding","evt","defaultPrevented","keyCode","matches","which","_this3$quill$getLine2","getLine","_this3$quill$getLeaf2","getLeaf","leafStart","offsetStart","leafEnd","offsetEnd","prefixText","suffixText","curContext","empty","every","curFormats","prevFormats","formatDelta","updateContents","nextFormats","deleteRange","defaultOptions","bold","makeFormatHandler","italic","underline","outdent","makeCodeBlockHandler","tab","table","cutoff","_this$quill$getLine0","_this$quill$getLine10","header","getModule","_module$getTable2","getTable","_table","row","cell","tableSide","blockquote","_this$quill$getLine12","_this$quill$getLine14","numLines","makeEmbedArrowHandler","makeTableArrowHandler","TAB","textContent","shortKey","up","targetRow","targetCell","targetLine","firstFormats","lastFormats","normalWeightRegexp","blockTagNames","isBlockElement","includes","ignoreRegexp","idRegexp","indentRegexp","normalizeListItem","doc","msoList","others","_node$parentNode","listItems","idMatch","id","indentMatch","typeRegexp","RegExp","typeMatch","parseListItem","parsed","_loop","_childListItems$","childListItems","_listItems$","nextElementSibling","ul","listItem","li","NORMALIZERS","_node$getAttribute","fragment","createDocumentFragment","normalizeFontWeight","br","previousElementSibling","_br$parentNode","normalizeEmptyLines","normalizeExternalHTML","CLIPBOARD_CONFIG","_node$parentElement3","isPre","preNodes","isBetweenInlineElements","matchNewline","deltaEndsWith","ELEMENT_NODE","applyFormat","ATTRIBUTE_ATTRIBUTORS","STYLE_ATTRIBUTORS","newDelta","_ref8","_style$fontWeight","fontStyle","textDecoration","strike","fontWeight","_ref9","parseFloat","textIndent","composed","checkedAttr","language","_node$parentElement","_node$parentElement2","createMatchAlias","Clipboard","_this$options$matcher","onCaptureCopy","onCapturePaste","matchers","matcher","addMatcher","DOMParser","parseFromString","normalizeHTML","nodeMatches","_this$prepareMatching2","prepareMatching","elementMatchers","textMatchers","traverse","paste","_e$clipboardData","_e$clipboardData2","isCut","_this$quill$selection","_this$quill$selection2","_this$onCopy","onCopy","clipboardData","setData","urlList","url","_e$clipboardData3","_e$clipboardData4","_e$clipboardData6","getData","_e$clipboardData5","normalizeURIList","files","upload","_doc$body$firstElemen","childElementCount","firstElementChild","onPaste","getSemanticHTML","pastedDelta","pair","_pair","endText","childrenDelta","reducedDelta","HTMLParagraphElement","History","undo","redo","currentRange","ignoreChange","userOnly","record","transformRange","inputType","dest","inverseDelta","lastRecorded","restoreSelection","changeDelta","undoDelta","undoRange","timestamp","Date","now","delay","maxStack","transformStack","stackItem","deleteLength","changeIndex","endsWithNewlineChange","getLastChangeIndex","remoteDelta","oldItem","Uploader","caretRangeFromPoint","clientX","clientY","caretPositionFromPoint","offsetNode","_e$dataTransfer","dataTransfer","uploads","file","_this2$options$mimety","mimetypes","promises","Promise","resolve","reader","FileReader","onload","readAsDataURL","all","then","images","image","INSERT_TYPES","Input","handleBeforeInput","staticRange","getTargetRanges","_event$dataTransfer","getPlainTextFromInputEvent","replaceText","isMac","UINode","handleArrowKeys","handleNavigationShortcuts","isRTL","canMoveCaretBeforeUINode","ensureListeningToSelectionChange","selectionChangeDeadline","isListening","handleSelectionChange","setStartAfter","setEndAfter","IndentClass","_ClassAttributor","IndentAttributor","normalizedValue","Blockquote","Header","ListContainer","ListItem","ui","listEventHandler","attachUI","Bold","Italic","_Bold","Link","sanitize","PROTOCOL_WHITELIST","SANITIZED_URL","protocols","anchor","href","protocol","Script","Strike","Underline","Formula","_Embed","formula","katex","render","throwOnError","errorColor","ATTRIBUTES","Image","hasAttribute","Video","_BlockEmbed","video","TokenAttributor","CodeToken","SyntaxCodeBlock","_CodeBlock","SyntaxCodeBlockContainer","_CodeBlockContainer","forceNext","emitMount","highlight","forced","cachedText","codeBlock","BreakBlot","lib","versionString","majorVersion","Syntax","hljs","languages","highlightBlot","initListener","initTimer","select","label","option","timer","clearTimeout","interval","nodeText","TableCell","rowOffset","tableId","TableRow","thisHead","thisTail","nextHead","nextTail","childFormats","TableBody","_Container2","TableContainer","_Container3","rows","maxColumns","fill","column","at","random","Table","listenBalanceCells","balanceCells","_this$getTable2","deleteColumn","cellOffset","_this$quill$getLine","_this$quill$getLine2","_this$getTable8","insertColumn","_this$getTable0","insertRow","columns","balanceTables","old","Toolbar","_quill$container","_quill$container$pare","groups","controls","group","control","addButton","addSelect","addControls","HTMLElement","_this$options$handler","addHandler","_possibleConstructorReturn","selectedIndex","selected","prompt","isActive","clean","direction","align","link","center","justify","background","codeIcon","color","rtl","bullet","check","ordered","script","sub","optionsCounter","toggleAriaAttribute","Picker","buildPicker","display","togglePicker","escape","tabIndex","selectItem","buildItem","buildLabel","buildOptions","close","trigger","dispatchEvent","Event","ColorPicker","_Picker","backgroundColor","colorLabel","stroke","IconPicker","icons","defaultItem","Tooltip","boundsContainer","el","overflowY","TEMPLATE","marginTop","hide","reference","rootBounds","verticalShift","ALIGNS","COLORS","FONTS","HEADERS","SIZES","BaseTheme","listener","tooltip","textbox","pickers","picker","removeEventListener","extendToolbar","buttons","button","selects","fillSelect","edit","fileInput","click","BaseTooltip","_Tooltip","save","cancel","restoreFocus","mode","preview","linkRange","extractVideoUrl","defaultValue","TOOLBAR_CONFIG","BubbleTooltip","_BaseTooltip","show","lastLine","getIndex","indexBounds","arrow","marginLeft","BubbleTheme","_BaseTheme","buildButtons","buildPickers","SnowTooltip","_this2$quill$scroll$d2","LinkBlot","SnowTheme","_range","Indent","List","InlineCode","Icons","$","createHTML","proto","forcedStringHTMLMethod","ReactQuill","_React$Component","editingAreaRef","createRef","dirtyProps","cleanProps","state","generation","onEditorChange","rangeOrDelta","oldRangeOrDelta","_this$onEditorChangeT","onEditorChangeText","unprivilegedEditor","_this$onEditorChangeS","onEditorChangeSelection","isControlled","React","Children","count","only","lastDeltaChangeSet","nextProps","nextState","validateProps","_nextProps$value","prevContents","getEditorContents","nextContents","isEqualValue","setEditorContents","setEditorReadOnly","instantiateEditor","destroyEditor","prevProps","prevState","shouldComponentRegenerate","regenerationSnapshot","setState","_this$regenerationSna","postpone","setEditorSelection","hookEditor","createEditor","getEditingArea","getEditorConfig","_this$props$modules","unhookEditor","leftOverToolbar","setEditorTabIndex","makeUnprivilegedEditor","nextValue","isDelta","sel","getEditorSelection","_editor$scroll","_this$props","preserveWhitespace","properties","cloneElement","_this$props$className","onKeyPress","onKeyDown","onKeyUp","renderEditingArea","_this$props$onChange","_this$props2","onChange","nextSelection","_this$props$onChangeS","_this$props3","_this$props$onFocus","_this$props4","currentSelection","hasGainedFocus","hasLostFocus","onChangeSelection","onFocus","_this$props$onBlur","_this$props5","onBlur","Component","fn","displayName","defaultProps","argsTag","funcTag","genTag","mapTag","setTag","reFlags","reIsHostCtor","reIsUint","freeGlobal","global","freeSelf","Function","freeExports","freeModule","moduleExports","addMapEntry","addSetEntry","arrayReduce","accumulator","initAccum","isHostObject","mapToArray","size","overArg","func","setToArray","uid","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","exec","IE_PROTO","funcToString","objectToString","reIsNative","Buffer","Symbol","Uint8Array","getPrototype","getPrototypeOf","objectCreate","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","nativeKeys","DataView","getNative","Map","Set","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","ListCache","MapCache","Stack","__data__","arrayLikeKeys","inherited","isObjectLike","isArrayLike","isArrayLikeObject","isArguments","n","baseTimes","skipIndexes","isIndex","assignValue","objValue","eq","assocIndexOf","initCloneArray","copyArray","getTag","buffer","cloneBuffer","isPrototype","initCloneObject","copyObject","getSymbols","copySymbols","baseAssign","cloneFunc","Ctor","cloneArrayBuffer","dataView","byteOffset","byteLength","cloneDataView","typedArray","cloneTypedArray","cloneMap","regexp","lastIndex","cloneRegExp","cloneSet","symbol","initCloneByTag","symbolsFunc","arrayPush","baseGetAllKeys","getAllKeys","arrayEach","baseIsNative","isFunction","arrayBuffer","newValue","getMapData","getValue","pairs","LARGE_ARRAY_SIZE","ArrayBuffer","ctorString","isLength","baseKeys","objectTag","typedArrayTags","freeProcess","process","nodeUtil","nodeIsTypedArray","isTypedArray","arraySome","nativeObjectToString","symToStringTag","toStringTag","SetCache","isArg","isBuff","isType","baseGetTag","isOwn","unmasked","getRawTag","baseIsArguments","baseIsEqual","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","isPartial","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","objLength","othLength","skipCtor","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","isMasked","arrLength","seen","arrValue","othIndex","resIndex","arrayFilter","baseUnary","escapeHtmlChar","reUnescapedHtml","reHasUnescapedHtml","string","basePropertyOf","diff_main","text1","text2","cursor_pos","cleanup","_fix_unicode","editdiff","oldLength","newLength","oldCursor","oldBefore","oldAfter","maybeNewCursor","newCursor","newBefore","newAfter","prefixLength","oldPrefix","newPrefix","oldMiddle","newMiddle","make_edit_splice","oldSuffix","newSuffix","find_cursor_edit_diff","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","longtext","shorttext","hm","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","floor","j","best_common","text1_a","text1_b","text2_a","text2_b","hm1","ceil","hm2","mid_common","diff_halfMatch_","diffs_a","diffs_b","text1_length","text2_length","max_d","v_offset","v_length","v1","v2","x","front","k1start","k1end","k2start","k2end","d","k1","k1_offset","y1","x1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","diff_bisect_","diff_compute_","diff_cleanupMerge","changes","equalities","equalitiesLength","lastequality","pointer","length_insertions1","length_deletions1","length_insertions2","length_deletions2","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","diff_commonOverlap_","overlap_length2","diff_cleanupSemantic","y","text1a","text2a","text1b","text2b","diffsb","pointermin","pointermax","pointermid","pointerstart","is_surrogate_pair_start","charCodeAt","text_length","best","pattern","pointerend","is_surrogate_pair_end","fix_unicode","count_delete","count_insert","text_delete","text_insert","previous_equality","ends_with_pair_start","stray","k","starts_with_pair_end","charCode","str","before","tuples","remove_empty_tuples","keepNull","attrs","baseInverted","retOp","substr","Events","EE","addListener","TypeError","_events","_eventsCount","clearEvent","__proto__","eventNames","names","listeners","l","ee","listenerCount","a1","a2","a3","a4","a5","len","removeListener","removeAllListeners","prefixed","InternalWeakMap","uncurryThis","defineBuiltIns","InternalMetadataModule","collection","collectionWeak","isExtensible","enforceInternalState","enforce","NATIVE_WEAK_MAP","IS_IE11","ActiveXObject","$WeakMap","getConstructor","WeakMapPrototype","nativeDelete","nativeHas","nativeGet","nativeSet","frozen","getWeakData","anObject","anInstance","iterate","ArrayIterationModule","hasOwn","InternalStateModule","setInternalState","internalStateGetterFor","getterFor","findIndex","uncaughtFrozenStore","store","UncaughtFrozenStore","findUncaughtFrozen","it","CONSTRUCTOR_NAME","IS_MAP","ADDER","Constructor","that","iterable","Prototype","AS_ENTRIES","getInternalState","define","microtask","aCallable","validateArgumentsLength","IS_NODE","enumerable","noTargetGet","domain","setPrototypeOf","isFrozen","getOwnPropertyDescriptor","freeze","seal","construct","Reflect","fun","thisValue","Func","arrayForEach","unapply","arrayLastIndexOf","lastIndexOf","arrayPop","arraySplice","stringToLowerCase","stringToString","stringMatch","stringReplace","stringIndexOf","stringTrim","objectHasOwnProperty","regExpTest","typeErrorCreate","thisArg","addToSet","transformCaseFunc","lcElement","cleanArray","newObject","property","lookupGetter","desc","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","NODE_TYPE","getGlobal","_createTrustedTypesPolicy","trustedTypes","purifyHostElement","createPolicy","policyName","createScriptURL","scriptUrl","_","createDOMPurify","DOMPurify","version","removed","isSupported","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","NodeFilter","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","ElementPrototype","getNextSibling","getChildNodes","getParentNode","template","content","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","getElementsByTagName","importNode","hooks","afterSanitizeAttributes","afterSanitizeElements","afterSanitizeShadowDOM","beforeSanitizeAttributes","beforeSanitizeElements","beforeSanitizeShadowDOM","uponSanitizeAttribute","uponSanitizeElement","uponSanitizeShadowNode","createHTMLDocument","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","writable","configurable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","SANITIZE_NAMED_PROPS_PREFIX","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","tbody","TRUSTED_TYPES_POLICY","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","namespaceURI","parentTagName","Boolean","_forceRemove","_removeAttribute","getAttributeNode","_initDocument","dirty","leadingWhitespace","dirtyPayload","createDocument","_createNodeIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","SHOW_PROCESSING_INSTRUCTION","SHOW_CDATA_SECTION","_isClobbered","nodeName","hasChildNodes","_isNode","_executeHooks","currentNode","hook","_sanitizeElements","allowedTags","_isBasicCustomElement","childClone","__removalCount","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","attrValue","keepAttr","allowedAttributes","forceKeepAttr","initValue","getAttributeType","setAttributeNS","_sanitizeShadowDOM","shadowNode","shadowIterator","nextNode","importedNode","returnNode","nodeIterator","shadowroot","shadowrootmode","serializedHTML","doctype","setConfig","clearConfig","isValidAttribute","addHook","entryPoint","hookFunction","removeHook","removeHooks","removeAllHooks","factory","arr","throwUnhandledCaseError","theValue","HtmlTag","whitespaceRegex","innerHtml","setTagName","getTagName","setAttr","getAttrs","getAttr","setAttrs","assign","setClass","cssClass","addClass","newClass","classAttr","getClass","newClasses","removeClass","removeClasses","idx","hasClass","setInnerHTML","setInnerHtml","getInnerHTML","getInnerHtml","toAnchorString","attrsStr","buildAttrsStr","attrsArr","urlSuffixRegex","AnchorTagBuilder","newWindow","truncate","createAttrs","processAnchorText","getAnchorText","getAnchorHref","createCssClass","returnClasses","cssClassSuffixes","getCssClassSuffixes","anchorText","doTruncate","truncateLength","truncateLocation","location","truncateLen","ellipsisChars","ellipsisLengthBeforeParsing","ellipsisLength","buildUrl","urlObj","scheme","buildSegment","segment","remainingAvailableLength","remainingAvailableLengthHalf","availableLength","urlSub","parse_url","matchQuery","pathAndQuery","truncateSmart","truncateMiddle","ellipsis","truncateEnd","Match","__jsduckDummyDocProp","matchedText","tagBuilder","getMatchedText","setOffset","getOffset","getType","buildTag","_super","EmailMatch","email","getEmail","HashtagMatch","serviceName","hashtag","getServiceName","getHashtag","MentionMatch","mention","getMention","PhoneMatch","plusSign","getPhoneNumber","getNumber","UrlMatch","urlMatchType","protocolUrlMatch","protocolRelativeMatch","stripPrefix","www","stripTrailingSlash","decodePercentEncoding","schemePrefixRegex","wwwPrefixRegex","protocolRelativeRegex","protocolPrepended","getUrlMatchType","getUrl","stripProtocolRelativePrefix","stripSchemePrefix","stripWwwPrefix","removeTrailingSlash","removePercentEncoding","preProcessedEntityAnchorText","decodeURIComponent","Matcher","letterRe","digitRe","nonDigitRe","whitespaceRe","quoteRe","controlCharsRe","alphaCharsStr","alphaCharsAndMarksStr","decimalNumbersStr","alphaNumericCharsStr","alphaNumericAndMarksCharsStr","ipStr","domainLabelStr","getDomainLabelStr","getDomainNameStr","domainNameCharRegex","tldRegex","EmailMatcher","localPartCharRegex","strictTldRegex","parseMatches","noCurrentEmailMatch","CurrentEmailMatch","mailtoTransitions","charIdx","currentEmailMatch","char","stateNonEmailAddress","stateMailTo","stateLocalPart","stateLocalPartDot","stateAtSign","stateDomainChar","stateDomainHyphen","stateDomainDot","captureMatchIfValidAndReset","beginEmailMatch","prevChar","hasMailtoPrefix","resetToNonEmailMatchState","hasDomainDot","newState","emailAddress","emailAddressNormalized","doesEmailHaveValidTld","UrlMatchValidator","isValid","urlMatch","isValidUriScheme","urlMatchDoesNotHaveProtocolOrDot","urlMatchDoesNotHaveAtLeastOneWordChar","isValidIpAddress","containsMultipleDots","uriSchemeMatch","newRegex","hasFullProtocolRegex","ipRegex","stringBeforeSlash","uriSchemeMatchArr","uriSchemeRegex","uriScheme","hasWordCharAfterProtocolRegex","wordCharRegExp","UrlMatcher","matcherRegex","_loop_1","matchStr","schemeUrlMatch","wwwUrlMatch","wwwProtocolRelativeMatch","tldProtocolRelativeMatch","this_1","matchHasUnbalancedClosingParen","matchHasInvalidCharAfterTld","foundCommonScheme","commonScheme","indexOfSchemeStart","startChar","endChar","numOpenBraces","res","HashtagMatcher","nonWordCharRegex","phoneMatcherRegex","PhoneMatcher","cleanNumber","contextClear","testMatch","twitterRegex","instagramRegex","soundcloudRegex","tiktokRegex","MentionMatcher","matcherRegexes","parseHtml","_a","onOpenTag","onCloseTag","onText","onComment","onDoctype","noCurrentTag","CurrentTag","currentDataIdx","currentTag","stateData","stateTagOpen","stateEndTagOpen","stateTagName","stateBeforeAttributeName","stateAttributeName","stateAfterAttributeName","stateBeforeAttributeValue","stateAttributeValueDoubleQuoted","stateAttributeValueSingleQuoted","stateAttributeValueUnquoted","stateAfterAttributeValueQuoted","stateSelfClosingStartTag","stateMarkupDeclarationOpen","stateCommentStart","stateCommentStartDash","stateComment","stateCommentEndDash","stateCommentEnd","stateCommentEndBang","stateDoctype","startNewTag","isClosing","isOpening","captureTagName","emitTagAndPreviousTextNode","resetToDataState","textBeforeTag","startIdx","Autolinker","urls","phone","replaceFn","sanitizeHtml","normalizeUrlsCfg","normalizeStripPrefixCfg","normalizeTruncateCfg","textOrHtml","parse","schemeMatches","wwwMatches","tldMatches","src","defaults","POSITIVE_INFINITY","skipTagNames","skipTagsStackCount","textSplit","splitRegex","lastIdx","splitAndCapture","currentOffset_1","textNodeMatches","parseText","compactMatches","removeUnwantedMatches","matchedTextLength","endIdx","removeIdx","m","getMatchers","numMatchers","textMatches","numTextMatches","newHtml","createMatchReturnVal","replaceFnResult","getTagBuilder","Email","Hashtag","Mention","Phone","Url","MentionEvent","_Event","_wrapNativeSuper","MentionBlot","mounted","clickHandler","getClickHandler","hoverHandler","getHoverHandler","buildEvent","bubbles","cancelable","dataset","denotationChar","isMentionBlotData","mentionValue","setDataValues","Keys","attachDataValues","dataAttributes","setInnerContent","_this$options$selectK","o","isOpen","itemIndex","suspendMouseEnter","mentionContainer","mentionContainerClass","cssText","onmousemove","onContainerMouseMove","fixMentionsToQuill","mentionList","mentionListClass","onTextChange","onSelectionChange","selectHandler","_step","_iterator","_createForOfIteratorHelper","selectKeys","selectKey","f","escapeHandler","upHandler","downHandler","existingSourceExecutionToken","abandoned","hideMentionList","prevItem","nextItem","positioningStrategy","visibility","setMentionContainerPosition","setIsOpen","onBeforeClose","scrollItemInView","elementAtItemIndex","disabled","itemHeight","itemPos","offsetTop","containerTop","containerBottom","_this$options$onSelec","_this$options","onSelect","asyncData","programmaticInsert","overriddenOptions","insertItem","_options$blotName","mentionCharPos","cursorPos","insertAtPos","showDenotationChar","spaceAfterInsert","_e$target","highlightItem","_e$currentTarget","stopImmediatePropagation","currentTarget","_this$options$renderL","_this$options$renderL2","_this$options2","renderedLoading","renderLoading","getElementsByClassName","showMentionList","loadingDiv","mentionChar","searchTerm","removeLoading","initialSelection","listItemClass","renderItem","onmouseenter","onDisabledItemMouseEnter","onItemMouseEnter","onmouseup","onItemClick","onmousedown","onItemMouseDown","newIndex","increment","decrement","topPos","containerPos","scrollY","innerHeight","leftPos","scrollX","_this$options$onOpen","_this$options3","_this$options$onClose","_this$options4","onOpen","onClose","setMentionContainerPosition_Fixed","setMentionContainerPosition_Normal","_this$options$mention","_this$options$mention2","containerHeight","offsetLeft","containerRightIsNotVisible","containerWidth","defaultMenuOrientation","overMentionCharPos","containerBottomIsNotVisible","mentionCharPosAbsolute","relativeToPos","rightPos","_this$options$mention3","_this$options$mention4","availableSpaceTop","availableSpaceBottom","fitsBottom","fitsTop","_this$cursorPos","_this$cursorPos2","startPos","maxChars","mentionDenotationChars","isolateChar","allowInlineMentionChar","textBeforeCursor","getTextBeforeCursor","textOffset","textPrefix","_getMentionCharIndex","isolateCharacter","mentionCharIndex","regex","lastMatch","mentionPrefix","hasValidMentionCharIndex","textAfter","minChars","allowedChars","hasValidChars","getAllowedCharsRegex","_this$options$source","_this$options5","sourceRequestToken","renderList","_this$options$allowed","_this$options$allowed2","_this$options6","oldContent","onSomethingChange","linkTarget","fromIndex","arrStacked","othStacked","objStacked"],"mappings":"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","file":"chunks/chunk.31.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AttributeMap = exports.OpIterator = exports.Op = void 0;\nconst diff = require(\"fast-diff\");\nconst cloneDeep = require(\"lodash.clonedeep\");\nconst isEqual = require(\"lodash.isequal\");\nconst AttributeMap_1 = require(\"./AttributeMap\");\nexports.AttributeMap = AttributeMap_1.default;\nconst Op_1 = require(\"./Op\");\nexports.Op = Op_1.default;\nconst OpIterator_1 = require(\"./OpIterator\");\nexports.OpIterator = OpIterator_1.default;\nconst NULL_CHARACTER = String.fromCharCode(0); // Placeholder char for embed in diff()\nconst getEmbedTypeAndData = (a, b) => {\n    if (typeof a !== 'object' || a === null) {\n        throw new Error(`cannot retain a ${typeof a}`);\n    }\n    if (typeof b !== 'object' || b === null) {\n        throw new Error(`cannot retain a ${typeof b}`);\n    }\n    const embedType = Object.keys(a)[0];\n    if (!embedType || embedType !== Object.keys(b)[0]) {\n        throw new Error(`embed types not matched: ${embedType} != ${Object.keys(b)[0]}`);\n    }\n    return [embedType, a[embedType], b[embedType]];\n};\nclass Delta {\n    constructor(ops) {\n        // Assume we are given a well formed ops\n        if (Array.isArray(ops)) {\n            this.ops = ops;\n        }\n        else if (ops != null && Array.isArray(ops.ops)) {\n            this.ops = ops.ops;\n        }\n        else {\n            this.ops = [];\n        }\n    }\n    static registerEmbed(embedType, handler) {\n        this.handlers[embedType] = handler;\n    }\n    static unregisterEmbed(embedType) {\n        delete this.handlers[embedType];\n    }\n    static getHandler(embedType) {\n        const handler = this.handlers[embedType];\n        if (!handler) {\n            throw new Error(`no handlers for embed type \"${embedType}\"`);\n        }\n        return handler;\n    }\n    insert(arg, attributes) {\n        const newOp = {};\n        if (typeof arg === 'string' && arg.length === 0) {\n            return this;\n        }\n        newOp.insert = arg;\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    }\n    delete(length) {\n        if (length <= 0) {\n            return this;\n        }\n        return this.push({ delete: length });\n    }\n    retain(length, attributes) {\n        if (typeof length === 'number' && length <= 0) {\n            return this;\n        }\n        const newOp = { retain: length };\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    }\n    push(newOp) {\n        let index = this.ops.length;\n        let lastOp = this.ops[index - 1];\n        newOp = cloneDeep(newOp);\n        if (typeof lastOp === 'object') {\n            if (typeof newOp.delete === 'number' &&\n                typeof lastOp.delete === 'number') {\n                this.ops[index - 1] = { delete: lastOp.delete + newOp.delete };\n                return this;\n            }\n            // Since it does not matter if we insert before or after deleting at the same index,\n            // always prefer to insert first\n            if (typeof lastOp.delete === 'number' && newOp.insert != null) {\n                index -= 1;\n                lastOp = this.ops[index - 1];\n                if (typeof lastOp !== 'object') {\n                    this.ops.unshift(newOp);\n                    return this;\n                }\n            }\n            if (isEqual(newOp.attributes, lastOp.attributes)) {\n                if (typeof newOp.insert === 'string' &&\n                    typeof lastOp.insert === 'string') {\n                    this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n                else if (typeof newOp.retain === 'number' &&\n                    typeof lastOp.retain === 'number') {\n                    this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n            }\n        }\n        if (index === this.ops.length) {\n            this.ops.push(newOp);\n        }\n        else {\n            this.ops.splice(index, 0, newOp);\n        }\n        return this;\n    }\n    chop() {\n        const lastOp = this.ops[this.ops.length - 1];\n        if (lastOp && typeof lastOp.retain === 'number' && !lastOp.attributes) {\n            this.ops.pop();\n        }\n        return this;\n    }\n    filter(predicate) {\n        return this.ops.filter(predicate);\n    }\n    forEach(predicate) {\n        this.ops.forEach(predicate);\n    }\n    map(predicate) {\n        return this.ops.map(predicate);\n    }\n    partition(predicate) {\n        const passed = [];\n        const failed = [];\n        this.forEach((op) => {\n            const target = predicate(op) ? passed : failed;\n            target.push(op);\n        });\n        return [passed, failed];\n    }\n    reduce(predicate, initialValue) {\n        return this.ops.reduce(predicate, initialValue);\n    }\n    changeLength() {\n        return this.reduce((length, elem) => {\n            if (elem.insert) {\n                return length + Op_1.default.length(elem);\n            }\n            else if (elem.delete) {\n                return length - elem.delete;\n            }\n            return length;\n        }, 0);\n    }\n    length() {\n        return this.reduce((length, elem) => {\n            return length + Op_1.default.length(elem);\n        }, 0);\n    }\n    slice(start = 0, end = Infinity) {\n        const ops = [];\n        const iter = new OpIterator_1.default(this.ops);\n        let index = 0;\n        while (index < end && iter.hasNext()) {\n            let nextOp;\n            if (index < start) {\n                nextOp = iter.next(start - index);\n            }\n            else {\n                nextOp = iter.next(end - index);\n                ops.push(nextOp);\n            }\n            index += Op_1.default.length(nextOp);\n        }\n        return new Delta(ops);\n    }\n    compose(other) {\n        const thisIter = new OpIterator_1.default(this.ops);\n        const otherIter = new OpIterator_1.default(other.ops);\n        const ops = [];\n        const firstOther = otherIter.peek();\n        if (firstOther != null &&\n            typeof firstOther.retain === 'number' &&\n            firstOther.attributes == null) {\n            let firstLeft = firstOther.retain;\n            while (thisIter.peekType() === 'insert' &&\n                thisIter.peekLength() <= firstLeft) {\n                firstLeft -= thisIter.peekLength();\n                ops.push(thisIter.next());\n            }\n            if (firstOther.retain - firstLeft > 0) {\n                otherIter.next(firstOther.retain - firstLeft);\n            }\n        }\n        const delta = new Delta(ops);\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else if (thisIter.peekType() === 'delete') {\n                delta.push(thisIter.next());\n            }\n            else {\n                const length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                const thisOp = thisIter.next(length);\n                const otherOp = otherIter.next(length);\n                if (otherOp.retain) {\n                    const newOp = {};\n                    if (typeof thisOp.retain === 'number') {\n                        newOp.retain =\n                            typeof otherOp.retain === 'number' ? length : otherOp.retain;\n                    }\n                    else {\n                        if (typeof otherOp.retain === 'number') {\n                            if (thisOp.retain == null) {\n                                newOp.insert = thisOp.insert;\n                            }\n                            else {\n                                newOp.retain = thisOp.retain;\n                            }\n                        }\n                        else {\n                            const action = thisOp.retain == null ? 'insert' : 'retain';\n                            const [embedType, thisData, otherData] = getEmbedTypeAndData(thisOp[action], otherOp.retain);\n                            const handler = Delta.getHandler(embedType);\n                            newOp[action] = {\n                                [embedType]: handler.compose(thisData, otherData, action === 'retain'),\n                            };\n                        }\n                    }\n                    // Preserve null when composing with a retain, otherwise remove it for inserts\n                    const attributes = AttributeMap_1.default.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n                    if (attributes) {\n                        newOp.attributes = attributes;\n                    }\n                    delta.push(newOp);\n                    // Optimization if rest of other is just retain\n                    if (!otherIter.hasNext() &&\n                        isEqual(delta.ops[delta.ops.length - 1], newOp)) {\n                        const rest = new Delta(thisIter.rest());\n                        return delta.concat(rest).chop();\n                    }\n                    // Other op should be delete, we could be an insert or retain\n                    // Insert + delete cancels out\n                }\n                else if (typeof otherOp.delete === 'number' &&\n                    (typeof thisOp.retain === 'number' ||\n                        (typeof thisOp.retain === 'object' && thisOp.retain !== null))) {\n                    delta.push(otherOp);\n                }\n            }\n        }\n        return delta.chop();\n    }\n    concat(other) {\n        const delta = new Delta(this.ops.slice());\n        if (other.ops.length > 0) {\n            delta.push(other.ops[0]);\n            delta.ops = delta.ops.concat(other.ops.slice(1));\n        }\n        return delta;\n    }\n    diff(other, cursor) {\n        if (this.ops === other.ops) {\n            return new Delta();\n        }\n        const strings = [this, other].map((delta) => {\n            return delta\n                .map((op) => {\n                if (op.insert != null) {\n                    return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n                }\n                const prep = delta === other ? 'on' : 'with';\n                throw new Error('diff() called ' + prep + ' non-document');\n            })\n                .join('');\n        });\n        const retDelta = new Delta();\n        const diffResult = diff(strings[0], strings[1], cursor, true);\n        const thisIter = new OpIterator_1.default(this.ops);\n        const otherIter = new OpIterator_1.default(other.ops);\n        diffResult.forEach((component) => {\n            let length = component[1].length;\n            while (length > 0) {\n                let opLength = 0;\n                switch (component[0]) {\n                    case diff.INSERT:\n                        opLength = Math.min(otherIter.peekLength(), length);\n                        retDelta.push(otherIter.next(opLength));\n                        break;\n                    case diff.DELETE:\n                        opLength = Math.min(length, thisIter.peekLength());\n                        thisIter.next(opLength);\n                        retDelta.delete(opLength);\n                        break;\n                    case diff.EQUAL:\n                        opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n                        const thisOp = thisIter.next(opLength);\n                        const otherOp = otherIter.next(opLength);\n                        if (isEqual(thisOp.insert, otherOp.insert)) {\n                            retDelta.retain(opLength, AttributeMap_1.default.diff(thisOp.attributes, otherOp.attributes));\n                        }\n                        else {\n                            retDelta.push(otherOp).delete(opLength);\n                        }\n                        break;\n                }\n                length -= opLength;\n            }\n        });\n        return retDelta.chop();\n    }\n    eachLine(predicate, newline = '\\n') {\n        const iter = new OpIterator_1.default(this.ops);\n        let line = new Delta();\n        let i = 0;\n        while (iter.hasNext()) {\n            if (iter.peekType() !== 'insert') {\n                return;\n            }\n            const thisOp = iter.peek();\n            const start = Op_1.default.length(thisOp) - iter.peekLength();\n            const index = typeof thisOp.insert === 'string'\n                ? thisOp.insert.indexOf(newline, start) - start\n                : -1;\n            if (index < 0) {\n                line.push(iter.next());\n            }\n            else if (index > 0) {\n                line.push(iter.next(index));\n            }\n            else {\n                if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n                    return;\n                }\n                i += 1;\n                line = new Delta();\n            }\n        }\n        if (line.length() > 0) {\n            predicate(line, {}, i);\n        }\n    }\n    invert(base) {\n        const inverted = new Delta();\n        this.reduce((baseIndex, op) => {\n            if (op.insert) {\n                inverted.delete(Op_1.default.length(op));\n            }\n            else if (typeof op.retain === 'number' && op.attributes == null) {\n                inverted.retain(op.retain);\n                return baseIndex + op.retain;\n            }\n            else if (op.delete || typeof op.retain === 'number') {\n                const length = (op.delete || op.retain);\n                const slice = base.slice(baseIndex, baseIndex + length);\n                slice.forEach((baseOp) => {\n                    if (op.delete) {\n                        inverted.push(baseOp);\n                    }\n                    else if (op.retain && op.attributes) {\n                        inverted.retain(Op_1.default.length(baseOp), AttributeMap_1.default.invert(op.attributes, baseOp.attributes));\n                    }\n                });\n                return baseIndex + length;\n            }\n            else if (typeof op.retain === 'object' && op.retain !== null) {\n                const slice = base.slice(baseIndex, baseIndex + 1);\n                const baseOp = new OpIterator_1.default(slice.ops).next();\n                const [embedType, opData, baseOpData] = getEmbedTypeAndData(op.retain, baseOp.insert);\n                const handler = Delta.getHandler(embedType);\n                inverted.retain({ [embedType]: handler.invert(opData, baseOpData) }, AttributeMap_1.default.invert(op.attributes, baseOp.attributes));\n                return baseIndex + 1;\n            }\n            return baseIndex;\n        }, 0);\n        return inverted.chop();\n    }\n    transform(arg, priority = false) {\n        priority = !!priority;\n        if (typeof arg === 'number') {\n            return this.transformPosition(arg, priority);\n        }\n        const other = arg;\n        const thisIter = new OpIterator_1.default(this.ops);\n        const otherIter = new OpIterator_1.default(other.ops);\n        const delta = new Delta();\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (thisIter.peekType() === 'insert' &&\n                (priority || otherIter.peekType() !== 'insert')) {\n                delta.retain(Op_1.default.length(thisIter.next()));\n            }\n            else if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else {\n                const length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                const thisOp = thisIter.next(length);\n                const otherOp = otherIter.next(length);\n                if (thisOp.delete) {\n                    // Our delete either makes their delete redundant or removes their retain\n                    continue;\n                }\n                else if (otherOp.delete) {\n                    delta.push(otherOp);\n                }\n                else {\n                    const thisData = thisOp.retain;\n                    const otherData = otherOp.retain;\n                    let transformedData = typeof otherData === 'object' && otherData !== null\n                        ? otherData\n                        : length;\n                    if (typeof thisData === 'object' &&\n                        thisData !== null &&\n                        typeof otherData === 'object' &&\n                        otherData !== null) {\n                        const embedType = Object.keys(thisData)[0];\n                        if (embedType === Object.keys(otherData)[0]) {\n                            const handler = Delta.getHandler(embedType);\n                            if (handler) {\n                                transformedData = {\n                                    [embedType]: handler.transform(thisData[embedType], otherData[embedType], priority),\n                                };\n                            }\n                        }\n                    }\n                    // We retain either their retain or insert\n                    delta.retain(transformedData, AttributeMap_1.default.transform(thisOp.attributes, otherOp.attributes, priority));\n                }\n            }\n        }\n        return delta.chop();\n    }\n    transformPosition(index, priority = false) {\n        priority = !!priority;\n        const thisIter = new OpIterator_1.default(this.ops);\n        let offset = 0;\n        while (thisIter.hasNext() && offset <= index) {\n            const length = thisIter.peekLength();\n            const nextType = thisIter.peekType();\n            thisIter.next();\n            if (nextType === 'delete') {\n                index -= Math.min(length, index - offset);\n                continue;\n            }\n            else if (nextType === 'insert' && (offset < index || !priority)) {\n                index += length;\n            }\n            offset += length;\n        }\n        return index;\n    }\n}\nDelta.Op = Op_1.default;\nDelta.OpIterator = OpIterator_1.default;\nDelta.AttributeMap = AttributeMap_1.default;\nDelta.handlers = {};\nexports.default = Delta;\nif (typeof module === 'object') {\n    module.exports = Delta;\n    module.exports.default = Delta;\n}\n//# sourceMappingURL=Delta.js.map","var Scope = /* @__PURE__ */ ((Scope2) => (Scope2[Scope2.TYPE = 3] = \"TYPE\", Scope2[Scope2.LEVEL = 12] = \"LEVEL\", Scope2[Scope2.ATTRIBUTE = 13] = \"ATTRIBUTE\", Scope2[Scope2.BLOT = 14] = \"BLOT\", Scope2[Scope2.INLINE = 7] = \"INLINE\", Scope2[Scope2.BLOCK = 11] = \"BLOCK\", Scope2[Scope2.BLOCK_BLOT = 10] = \"BLOCK_BLOT\", Scope2[Scope2.INLINE_BLOT = 6] = \"INLINE_BLOT\", Scope2[Scope2.BLOCK_ATTRIBUTE = 9] = \"BLOCK_ATTRIBUTE\", Scope2[Scope2.INLINE_ATTRIBUTE = 5] = \"INLINE_ATTRIBUTE\", Scope2[Scope2.ANY = 15] = \"ANY\", Scope2))(Scope || {});\nclass Attributor {\n  constructor(attrName, keyName, options = {}) {\n    this.attrName = attrName, this.keyName = keyName;\n    const attributeBit = Scope.TYPE & Scope.ATTRIBUTE;\n    this.scope = options.scope != null ? (\n      // Ignore type bits, force attribute bit\n      options.scope & Scope.LEVEL | attributeBit\n    ) : Scope.ATTRIBUTE, options.whitelist != null && (this.whitelist = options.whitelist);\n  }\n  static keys(node) {\n    return Array.from(node.attributes).map((item) => item.name);\n  }\n  add(node, value) {\n    return this.canAdd(node, value) ? (node.setAttribute(this.keyName, value), !0) : !1;\n  }\n  canAdd(_node, value) {\n    return this.whitelist == null ? !0 : typeof value == \"string\" ? this.whitelist.indexOf(value.replace(/[\"']/g, \"\")) > -1 : this.whitelist.indexOf(value) > -1;\n  }\n  remove(node) {\n    node.removeAttribute(this.keyName);\n  }\n  value(node) {\n    const value = node.getAttribute(this.keyName);\n    return this.canAdd(node, value) && value ? value : \"\";\n  }\n}\nclass ParchmentError extends Error {\n  constructor(message) {\n    message = \"[Parchment] \" + message, super(message), this.message = message, this.name = this.constructor.name;\n  }\n}\nconst _Registry = class _Registry {\n  constructor() {\n    this.attributes = {}, this.classes = {}, this.tags = {}, this.types = {};\n  }\n  static find(node, bubble = !1) {\n    if (node == null)\n      return null;\n    if (this.blots.has(node))\n      return this.blots.get(node) || null;\n    if (bubble) {\n      let parentNode = null;\n      try {\n        parentNode = node.parentNode;\n      } catch {\n        return null;\n      }\n      return this.find(parentNode, bubble);\n    }\n    return null;\n  }\n  create(scroll, input, value) {\n    const match2 = this.query(input);\n    if (match2 == null)\n      throw new ParchmentError(`Unable to create ${input} blot`);\n    const blotClass = match2, node = (\n      // @ts-expect-error Fix me later\n      input instanceof Node || input.nodeType === Node.TEXT_NODE ? input : blotClass.create(value)\n    ), blot = new blotClass(scroll, node, value);\n    return _Registry.blots.set(blot.domNode, blot), blot;\n  }\n  find(node, bubble = !1) {\n    return _Registry.find(node, bubble);\n  }\n  query(query, scope = Scope.ANY) {\n    let match2;\n    return typeof query == \"string\" ? match2 = this.types[query] || this.attributes[query] : query instanceof Text || query.nodeType === Node.TEXT_NODE ? match2 = this.types.text : typeof query == \"number\" ? query & Scope.LEVEL & Scope.BLOCK ? match2 = this.types.block : query & Scope.LEVEL & Scope.INLINE && (match2 = this.types.inline) : query instanceof Element && ((query.getAttribute(\"class\") || \"\").split(/\\s+/).some((name) => (match2 = this.classes[name], !!match2)), match2 = match2 || this.tags[query.tagName]), match2 == null ? null : \"scope\" in match2 && scope & Scope.LEVEL & match2.scope && scope & Scope.TYPE & match2.scope ? match2 : null;\n  }\n  register(...definitions) {\n    return definitions.map((definition) => {\n      const isBlot = \"blotName\" in definition, isAttr = \"attrName\" in definition;\n      if (!isBlot && !isAttr)\n        throw new ParchmentError(\"Invalid definition\");\n      if (isBlot && definition.blotName === \"abstract\")\n        throw new ParchmentError(\"Cannot register abstract class\");\n      const key = isBlot ? definition.blotName : isAttr ? definition.attrName : void 0;\n      return this.types[key] = definition, isAttr ? typeof definition.keyName == \"string\" && (this.attributes[definition.keyName] = definition) : isBlot && (definition.className && (this.classes[definition.className] = definition), definition.tagName && (Array.isArray(definition.tagName) ? definition.tagName = definition.tagName.map((tagName) => tagName.toUpperCase()) : definition.tagName = definition.tagName.toUpperCase(), (Array.isArray(definition.tagName) ? definition.tagName : [definition.tagName]).forEach((tag) => {\n        (this.tags[tag] == null || definition.className == null) && (this.tags[tag] = definition);\n      }))), definition;\n    });\n  }\n};\n_Registry.blots = /* @__PURE__ */ new WeakMap();\nlet Registry = _Registry;\nfunction match(node, prefix) {\n  return (node.getAttribute(\"class\") || \"\").split(/\\s+/).filter((name) => name.indexOf(`${prefix}-`) === 0);\n}\nclass ClassAttributor extends Attributor {\n  static keys(node) {\n    return (node.getAttribute(\"class\") || \"\").split(/\\s+/).map((name) => name.split(\"-\").slice(0, -1).join(\"-\"));\n  }\n  add(node, value) {\n    return this.canAdd(node, value) ? (this.remove(node), node.classList.add(`${this.keyName}-${value}`), !0) : !1;\n  }\n  remove(node) {\n    match(node, this.keyName).forEach((name) => {\n      node.classList.remove(name);\n    }), node.classList.length === 0 && node.removeAttribute(\"class\");\n  }\n  value(node) {\n    const value = (match(node, this.keyName)[0] || \"\").slice(this.keyName.length + 1);\n    return this.canAdd(node, value) ? value : \"\";\n  }\n}\nconst ClassAttributor$1 = ClassAttributor;\nfunction camelize(name) {\n  const parts = name.split(\"-\"), rest = parts.slice(1).map((part) => part[0].toUpperCase() + part.slice(1)).join(\"\");\n  return parts[0] + rest;\n}\nclass StyleAttributor extends Attributor {\n  static keys(node) {\n    return (node.getAttribute(\"style\") || \"\").split(\";\").map((value) => value.split(\":\")[0].trim());\n  }\n  add(node, value) {\n    return this.canAdd(node, value) ? (node.style[camelize(this.keyName)] = value, !0) : !1;\n  }\n  remove(node) {\n    node.style[camelize(this.keyName)] = \"\", node.getAttribute(\"style\") || node.removeAttribute(\"style\");\n  }\n  value(node) {\n    const value = node.style[camelize(this.keyName)];\n    return this.canAdd(node, value) ? value : \"\";\n  }\n}\nconst StyleAttributor$1 = StyleAttributor;\nclass AttributorStore {\n  constructor(domNode) {\n    this.attributes = {}, this.domNode = domNode, this.build();\n  }\n  attribute(attribute, value) {\n    value ? attribute.add(this.domNode, value) && (attribute.value(this.domNode) != null ? this.attributes[attribute.attrName] = attribute : delete this.attributes[attribute.attrName]) : (attribute.remove(this.domNode), delete this.attributes[attribute.attrName]);\n  }\n  build() {\n    this.attributes = {};\n    const blot = Registry.find(this.domNode);\n    if (blot == null)\n      return;\n    const attributes = Attributor.keys(this.domNode), classes = ClassAttributor$1.keys(this.domNode), styles = StyleAttributor$1.keys(this.domNode);\n    attributes.concat(classes).concat(styles).forEach((name) => {\n      const attr = blot.scroll.query(name, Scope.ATTRIBUTE);\n      attr instanceof Attributor && (this.attributes[attr.attrName] = attr);\n    });\n  }\n  copy(target) {\n    Object.keys(this.attributes).forEach((key) => {\n      const value = this.attributes[key].value(this.domNode);\n      target.format(key, value);\n    });\n  }\n  move(target) {\n    this.copy(target), Object.keys(this.attributes).forEach((key) => {\n      this.attributes[key].remove(this.domNode);\n    }), this.attributes = {};\n  }\n  values() {\n    return Object.keys(this.attributes).reduce(\n      (attributes, name) => (attributes[name] = this.attributes[name].value(this.domNode), attributes),\n      {}\n    );\n  }\n}\nconst AttributorStore$1 = AttributorStore, _ShadowBlot = class _ShadowBlot {\n  constructor(scroll, domNode) {\n    this.scroll = scroll, this.domNode = domNode, Registry.blots.set(domNode, this), this.prev = null, this.next = null;\n  }\n  static create(rawValue) {\n    if (this.tagName == null)\n      throw new ParchmentError(\"Blot definition missing tagName\");\n    let node, value;\n    return Array.isArray(this.tagName) ? (typeof rawValue == \"string\" ? (value = rawValue.toUpperCase(), parseInt(value, 10).toString() === value && (value = parseInt(value, 10))) : typeof rawValue == \"number\" && (value = rawValue), typeof value == \"number\" ? node = document.createElement(this.tagName[value - 1]) : value && this.tagName.indexOf(value) > -1 ? node = document.createElement(value) : node = document.createElement(this.tagName[0])) : node = document.createElement(this.tagName), this.className && node.classList.add(this.className), node;\n  }\n  // Hack for accessing inherited static methods\n  get statics() {\n    return this.constructor;\n  }\n  attach() {\n  }\n  clone() {\n    const domNode = this.domNode.cloneNode(!1);\n    return this.scroll.create(domNode);\n  }\n  detach() {\n    this.parent != null && this.parent.removeChild(this), Registry.blots.delete(this.domNode);\n  }\n  deleteAt(index, length) {\n    this.isolate(index, length).remove();\n  }\n  formatAt(index, length, name, value) {\n    const blot = this.isolate(index, length);\n    if (this.scroll.query(name, Scope.BLOT) != null && value)\n      blot.wrap(name, value);\n    else if (this.scroll.query(name, Scope.ATTRIBUTE) != null) {\n      const parent = this.scroll.create(this.statics.scope);\n      blot.wrap(parent), parent.format(name, value);\n    }\n  }\n  insertAt(index, value, def) {\n    const blot = def == null ? this.scroll.create(\"text\", value) : this.scroll.create(value, def), ref = this.split(index);\n    this.parent.insertBefore(blot, ref || void 0);\n  }\n  isolate(index, length) {\n    const target = this.split(index);\n    if (target == null)\n      throw new Error(\"Attempt to isolate at end\");\n    return target.split(length), target;\n  }\n  length() {\n    return 1;\n  }\n  offset(root = this.parent) {\n    return this.parent == null || this === root ? 0 : this.parent.children.offset(this) + this.parent.offset(root);\n  }\n  optimize(_context) {\n    this.statics.requiredContainer && !(this.parent instanceof this.statics.requiredContainer) && this.wrap(this.statics.requiredContainer.blotName);\n  }\n  remove() {\n    this.domNode.parentNode != null && this.domNode.parentNode.removeChild(this.domNode), this.detach();\n  }\n  replaceWith(name, value) {\n    const replacement = typeof name == \"string\" ? this.scroll.create(name, value) : name;\n    return this.parent != null && (this.parent.insertBefore(replacement, this.next || void 0), this.remove()), replacement;\n  }\n  split(index, _force) {\n    return index === 0 ? this : this.next;\n  }\n  update(_mutations, _context) {\n  }\n  wrap(name, value) {\n    const wrapper = typeof name == \"string\" ? this.scroll.create(name, value) : name;\n    if (this.parent != null && this.parent.insertBefore(wrapper, this.next || void 0), typeof wrapper.appendChild != \"function\")\n      throw new ParchmentError(`Cannot wrap ${name}`);\n    return wrapper.appendChild(this), wrapper;\n  }\n};\n_ShadowBlot.blotName = \"abstract\";\nlet ShadowBlot = _ShadowBlot;\nconst _LeafBlot = class _LeafBlot extends ShadowBlot {\n  /**\n   * Returns the value represented by domNode if it is this Blot's type\n   * No checking that domNode can represent this Blot type is required so\n   * applications needing it should check externally before calling.\n   */\n  static value(_domNode) {\n    return !0;\n  }\n  /**\n   * Given location represented by node and offset from DOM Selection Range,\n   * return index to that location.\n   */\n  index(node, offset) {\n    return this.domNode === node || this.domNode.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY ? Math.min(offset, 1) : -1;\n  }\n  /**\n   * Given index to location within blot, return node and offset representing\n   * that location, consumable by DOM Selection Range\n   */\n  position(index, _inclusive) {\n    let offset = Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);\n    return index > 0 && (offset += 1), [this.parent.domNode, offset];\n  }\n  /**\n   * Return value represented by this blot\n   * Should not change without interaction from API or\n   * user change detectable by update()\n   */\n  value() {\n    return {\n      [this.statics.blotName]: this.statics.value(this.domNode) || !0\n    };\n  }\n};\n_LeafBlot.scope = Scope.INLINE_BLOT;\nlet LeafBlot = _LeafBlot;\nconst LeafBlot$1 = LeafBlot;\nclass LinkedList {\n  constructor() {\n    this.head = null, this.tail = null, this.length = 0;\n  }\n  append(...nodes) {\n    if (this.insertBefore(nodes[0], null), nodes.length > 1) {\n      const rest = nodes.slice(1);\n      this.append(...rest);\n    }\n  }\n  at(index) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur && index > 0; )\n      index -= 1, cur = next();\n    return cur;\n  }\n  contains(node) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur; ) {\n      if (cur === node)\n        return !0;\n      cur = next();\n    }\n    return !1;\n  }\n  indexOf(node) {\n    const next = this.iterator();\n    let cur = next(), index = 0;\n    for (; cur; ) {\n      if (cur === node)\n        return index;\n      index += 1, cur = next();\n    }\n    return -1;\n  }\n  insertBefore(node, refNode) {\n    node != null && (this.remove(node), node.next = refNode, refNode != null ? (node.prev = refNode.prev, refNode.prev != null && (refNode.prev.next = node), refNode.prev = node, refNode === this.head && (this.head = node)) : this.tail != null ? (this.tail.next = node, node.prev = this.tail, this.tail = node) : (node.prev = null, this.head = this.tail = node), this.length += 1);\n  }\n  offset(target) {\n    let index = 0, cur = this.head;\n    for (; cur != null; ) {\n      if (cur === target)\n        return index;\n      index += cur.length(), cur = cur.next;\n    }\n    return -1;\n  }\n  remove(node) {\n    this.contains(node) && (node.prev != null && (node.prev.next = node.next), node.next != null && (node.next.prev = node.prev), node === this.head && (this.head = node.next), node === this.tail && (this.tail = node.prev), this.length -= 1);\n  }\n  iterator(curNode = this.head) {\n    return () => {\n      const ret = curNode;\n      return curNode != null && (curNode = curNode.next), ret;\n    };\n  }\n  find(index, inclusive = !1) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur; ) {\n      const length = cur.length();\n      if (index < length || inclusive && index === length && (cur.next == null || cur.next.length() !== 0))\n        return [cur, index];\n      index -= length, cur = next();\n    }\n    return [null, 0];\n  }\n  forEach(callback) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur; )\n      callback(cur), cur = next();\n  }\n  forEachAt(index, length, callback) {\n    if (length <= 0)\n      return;\n    const [startNode, offset] = this.find(index);\n    let curIndex = index - offset;\n    const next = this.iterator(startNode);\n    let cur = next();\n    for (; cur && curIndex < index + length; ) {\n      const curLength = cur.length();\n      index > curIndex ? callback(\n        cur,\n        index - curIndex,\n        Math.min(length, curIndex + curLength - index)\n      ) : callback(cur, 0, Math.min(curLength, index + length - curIndex)), curIndex += curLength, cur = next();\n    }\n  }\n  map(callback) {\n    return this.reduce((memo, cur) => (memo.push(callback(cur)), memo), []);\n  }\n  reduce(callback, memo) {\n    const next = this.iterator();\n    let cur = next();\n    for (; cur; )\n      memo = callback(memo, cur), cur = next();\n    return memo;\n  }\n}\nfunction makeAttachedBlot(node, scroll) {\n  const found = scroll.find(node);\n  if (found)\n    return found;\n  try {\n    return scroll.create(node);\n  } catch {\n    const blot = scroll.create(Scope.INLINE);\n    return Array.from(node.childNodes).forEach((child) => {\n      blot.domNode.appendChild(child);\n    }), node.parentNode && node.parentNode.replaceChild(blot.domNode, node), blot.attach(), blot;\n  }\n}\nconst _ParentBlot = class _ParentBlot extends ShadowBlot {\n  constructor(scroll, domNode) {\n    super(scroll, domNode), this.uiNode = null, this.build();\n  }\n  appendChild(other) {\n    this.insertBefore(other);\n  }\n  attach() {\n    super.attach(), this.children.forEach((child) => {\n      child.attach();\n    });\n  }\n  attachUI(node) {\n    this.uiNode != null && this.uiNode.remove(), this.uiNode = node, _ParentBlot.uiClass && this.uiNode.classList.add(_ParentBlot.uiClass), this.uiNode.setAttribute(\"contenteditable\", \"false\"), this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\n  }\n  /**\n   * Called during construction, should fill its own children LinkedList.\n   */\n  build() {\n    this.children = new LinkedList(), Array.from(this.domNode.childNodes).filter((node) => node !== this.uiNode).reverse().forEach((node) => {\n      try {\n        const child = makeAttachedBlot(node, this.scroll);\n        this.insertBefore(child, this.children.head || void 0);\n      } catch (err) {\n        if (err instanceof ParchmentError)\n          return;\n        throw err;\n      }\n    });\n  }\n  deleteAt(index, length) {\n    if (index === 0 && length === this.length())\n      return this.remove();\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\n      child.deleteAt(offset, childLength);\n    });\n  }\n  descendant(criteria, index = 0) {\n    const [child, offset] = this.children.find(index);\n    return criteria.blotName == null && criteria(child) || criteria.blotName != null && child instanceof criteria ? [child, offset] : child instanceof _ParentBlot ? child.descendant(criteria, offset) : [null, -1];\n  }\n  descendants(criteria, index = 0, length = Number.MAX_VALUE) {\n    let descendants = [], lengthLeft = length;\n    return this.children.forEachAt(\n      index,\n      length,\n      (child, childIndex, childLength) => {\n        (criteria.blotName == null && criteria(child) || criteria.blotName != null && child instanceof criteria) && descendants.push(child), child instanceof _ParentBlot && (descendants = descendants.concat(\n          child.descendants(criteria, childIndex, lengthLeft)\n        )), lengthLeft -= childLength;\n      }\n    ), descendants;\n  }\n  detach() {\n    this.children.forEach((child) => {\n      child.detach();\n    }), super.detach();\n  }\n  enforceAllowedChildren() {\n    let done = !1;\n    this.children.forEach((child) => {\n      done || this.statics.allowedChildren.some(\n        (def) => child instanceof def\n      ) || (child.statics.scope === Scope.BLOCK_BLOT ? (child.next != null && this.splitAfter(child), child.prev != null && this.splitAfter(child.prev), child.parent.unwrap(), done = !0) : child instanceof _ParentBlot ? child.unwrap() : child.remove());\n    });\n  }\n  formatAt(index, length, name, value) {\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\n      child.formatAt(offset, childLength, name, value);\n    });\n  }\n  insertAt(index, value, def) {\n    const [child, offset] = this.children.find(index);\n    if (child)\n      child.insertAt(offset, value, def);\n    else {\n      const blot = def == null ? this.scroll.create(\"text\", value) : this.scroll.create(value, def);\n      this.appendChild(blot);\n    }\n  }\n  insertBefore(childBlot, refBlot) {\n    childBlot.parent != null && childBlot.parent.children.remove(childBlot);\n    let refDomNode = null;\n    this.children.insertBefore(childBlot, refBlot || null), childBlot.parent = this, refBlot != null && (refDomNode = refBlot.domNode), (this.domNode.parentNode !== childBlot.domNode || this.domNode.nextSibling !== refDomNode) && this.domNode.insertBefore(childBlot.domNode, refDomNode), childBlot.attach();\n  }\n  length() {\n    return this.children.reduce((memo, child) => memo + child.length(), 0);\n  }\n  moveChildren(targetParent, refNode) {\n    this.children.forEach((child) => {\n      targetParent.insertBefore(child, refNode);\n    });\n  }\n  optimize(context) {\n    if (super.optimize(context), this.enforceAllowedChildren(), this.uiNode != null && this.uiNode !== this.domNode.firstChild && this.domNode.insertBefore(this.uiNode, this.domNode.firstChild), this.children.length === 0)\n      if (this.statics.defaultChild != null) {\n        const child = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(child);\n      } else\n        this.remove();\n  }\n  path(index, inclusive = !1) {\n    const [child, offset] = this.children.find(index, inclusive), position = [[this, index]];\n    return child instanceof _ParentBlot ? position.concat(child.path(offset, inclusive)) : (child != null && position.push([child, offset]), position);\n  }\n  removeChild(child) {\n    this.children.remove(child);\n  }\n  replaceWith(name, value) {\n    const replacement = typeof name == \"string\" ? this.scroll.create(name, value) : name;\n    return replacement instanceof _ParentBlot && this.moveChildren(replacement), super.replaceWith(replacement);\n  }\n  split(index, force = !1) {\n    if (!force) {\n      if (index === 0)\n        return this;\n      if (index === this.length())\n        return this.next;\n    }\n    const after = this.clone();\n    return this.parent && this.parent.insertBefore(after, this.next || void 0), this.children.forEachAt(index, this.length(), (child, offset, _length) => {\n      const split = child.split(offset, force);\n      split != null && after.appendChild(split);\n    }), after;\n  }\n  splitAfter(child) {\n    const after = this.clone();\n    for (; child.next != null; )\n      after.appendChild(child.next);\n    return this.parent && this.parent.insertBefore(after, this.next || void 0), after;\n  }\n  unwrap() {\n    this.parent && this.moveChildren(this.parent, this.next || void 0), this.remove();\n  }\n  update(mutations, _context) {\n    const addedNodes = [], removedNodes = [];\n    mutations.forEach((mutation) => {\n      mutation.target === this.domNode && mutation.type === \"childList\" && (addedNodes.push(...mutation.addedNodes), removedNodes.push(...mutation.removedNodes));\n    }), removedNodes.forEach((node) => {\n      if (node.parentNode != null && // @ts-expect-error Fix me later\n      node.tagName !== \"IFRAME\" && document.body.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY)\n        return;\n      const blot = this.scroll.find(node);\n      blot != null && (blot.domNode.parentNode == null || blot.domNode.parentNode === this.domNode) && blot.detach();\n    }), addedNodes.filter((node) => node.parentNode === this.domNode && node !== this.uiNode).sort((a, b) => a === b ? 0 : a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING ? 1 : -1).forEach((node) => {\n      let refBlot = null;\n      node.nextSibling != null && (refBlot = this.scroll.find(node.nextSibling));\n      const blot = makeAttachedBlot(node, this.scroll);\n      (blot.next !== refBlot || blot.next == null) && (blot.parent != null && blot.parent.removeChild(this), this.insertBefore(blot, refBlot || void 0));\n    }), this.enforceAllowedChildren();\n  }\n};\n_ParentBlot.uiClass = \"\";\nlet ParentBlot = _ParentBlot;\nconst ParentBlot$1 = ParentBlot;\nfunction isEqual(obj1, obj2) {\n  if (Object.keys(obj1).length !== Object.keys(obj2).length)\n    return !1;\n  for (const prop in obj1)\n    if (obj1[prop] !== obj2[prop])\n      return !1;\n  return !0;\n}\nconst _InlineBlot = class _InlineBlot extends ParentBlot$1 {\n  static create(value) {\n    return super.create(value);\n  }\n  static formats(domNode, scroll) {\n    const match2 = scroll.query(_InlineBlot.blotName);\n    if (!(match2 != null && domNode.tagName === match2.tagName)) {\n      if (typeof this.tagName == \"string\")\n        return !0;\n      if (Array.isArray(this.tagName))\n        return domNode.tagName.toLowerCase();\n    }\n  }\n  constructor(scroll, domNode) {\n    super(scroll, domNode), this.attributes = new AttributorStore$1(this.domNode);\n  }\n  format(name, value) {\n    if (name === this.statics.blotName && !value)\n      this.children.forEach((child) => {\n        child instanceof _InlineBlot || (child = child.wrap(_InlineBlot.blotName, !0)), this.attributes.copy(child);\n      }), this.unwrap();\n    else {\n      const format = this.scroll.query(name, Scope.INLINE);\n      if (format == null)\n        return;\n      format instanceof Attributor ? this.attributes.attribute(format, value) : value && (name !== this.statics.blotName || this.formats()[name] !== value) && this.replaceWith(name, value);\n    }\n  }\n  formats() {\n    const formats = this.attributes.values(), format = this.statics.formats(this.domNode, this.scroll);\n    return format != null && (formats[this.statics.blotName] = format), formats;\n  }\n  formatAt(index, length, name, value) {\n    this.formats()[name] != null || this.scroll.query(name, Scope.ATTRIBUTE) ? this.isolate(index, length).format(name, value) : super.formatAt(index, length, name, value);\n  }\n  optimize(context) {\n    super.optimize(context);\n    const formats = this.formats();\n    if (Object.keys(formats).length === 0)\n      return this.unwrap();\n    const next = this.next;\n    next instanceof _InlineBlot && next.prev === this && isEqual(formats, next.formats()) && (next.moveChildren(this), next.remove());\n  }\n  replaceWith(name, value) {\n    const replacement = super.replaceWith(name, value);\n    return this.attributes.copy(replacement), replacement;\n  }\n  update(mutations, context) {\n    super.update(mutations, context), mutations.some(\n      (mutation) => mutation.target === this.domNode && mutation.type === \"attributes\"\n    ) && this.attributes.build();\n  }\n  wrap(name, value) {\n    const wrapper = super.wrap(name, value);\n    return wrapper instanceof _InlineBlot && this.attributes.move(wrapper), wrapper;\n  }\n};\n_InlineBlot.allowedChildren = [_InlineBlot, LeafBlot$1], _InlineBlot.blotName = \"inline\", _InlineBlot.scope = Scope.INLINE_BLOT, _InlineBlot.tagName = \"SPAN\";\nlet InlineBlot = _InlineBlot;\nconst InlineBlot$1 = InlineBlot, _BlockBlot = class _BlockBlot extends ParentBlot$1 {\n  static create(value) {\n    return super.create(value);\n  }\n  static formats(domNode, scroll) {\n    const match2 = scroll.query(_BlockBlot.blotName);\n    if (!(match2 != null && domNode.tagName === match2.tagName)) {\n      if (typeof this.tagName == \"string\")\n        return !0;\n      if (Array.isArray(this.tagName))\n        return domNode.tagName.toLowerCase();\n    }\n  }\n  constructor(scroll, domNode) {\n    super(scroll, domNode), this.attributes = new AttributorStore$1(this.domNode);\n  }\n  format(name, value) {\n    const format = this.scroll.query(name, Scope.BLOCK);\n    format != null && (format instanceof Attributor ? this.attributes.attribute(format, value) : name === this.statics.blotName && !value ? this.replaceWith(_BlockBlot.blotName) : value && (name !== this.statics.blotName || this.formats()[name] !== value) && this.replaceWith(name, value));\n  }\n  formats() {\n    const formats = this.attributes.values(), format = this.statics.formats(this.domNode, this.scroll);\n    return format != null && (formats[this.statics.blotName] = format), formats;\n  }\n  formatAt(index, length, name, value) {\n    this.scroll.query(name, Scope.BLOCK) != null ? this.format(name, value) : super.formatAt(index, length, name, value);\n  }\n  insertAt(index, value, def) {\n    if (def == null || this.scroll.query(value, Scope.INLINE) != null)\n      super.insertAt(index, value, def);\n    else {\n      const after = this.split(index);\n      if (after != null) {\n        const blot = this.scroll.create(value, def);\n        after.parent.insertBefore(blot, after);\n      } else\n        throw new Error(\"Attempt to insertAt after block boundaries\");\n    }\n  }\n  replaceWith(name, value) {\n    const replacement = super.replaceWith(name, value);\n    return this.attributes.copy(replacement), replacement;\n  }\n  update(mutations, context) {\n    super.update(mutations, context), mutations.some(\n      (mutation) => mutation.target === this.domNode && mutation.type === \"attributes\"\n    ) && this.attributes.build();\n  }\n};\n_BlockBlot.blotName = \"block\", _BlockBlot.scope = Scope.BLOCK_BLOT, _BlockBlot.tagName = \"P\", _BlockBlot.allowedChildren = [\n  InlineBlot$1,\n  _BlockBlot,\n  LeafBlot$1\n];\nlet BlockBlot = _BlockBlot;\nconst BlockBlot$1 = BlockBlot, _ContainerBlot = class _ContainerBlot extends ParentBlot$1 {\n  checkMerge() {\n    return this.next !== null && this.next.statics.blotName === this.statics.blotName;\n  }\n  deleteAt(index, length) {\n    super.deleteAt(index, length), this.enforceAllowedChildren();\n  }\n  formatAt(index, length, name, value) {\n    super.formatAt(index, length, name, value), this.enforceAllowedChildren();\n  }\n  insertAt(index, value, def) {\n    super.insertAt(index, value, def), this.enforceAllowedChildren();\n  }\n  optimize(context) {\n    super.optimize(context), this.children.length > 0 && this.next != null && this.checkMerge() && (this.next.moveChildren(this), this.next.remove());\n  }\n};\n_ContainerBlot.blotName = \"container\", _ContainerBlot.scope = Scope.BLOCK_BLOT;\nlet ContainerBlot = _ContainerBlot;\nconst ContainerBlot$1 = ContainerBlot;\nclass EmbedBlot extends LeafBlot$1 {\n  static formats(_domNode, _scroll) {\n  }\n  format(name, value) {\n    super.formatAt(0, this.length(), name, value);\n  }\n  formatAt(index, length, name, value) {\n    index === 0 && length === this.length() ? this.format(name, value) : super.formatAt(index, length, name, value);\n  }\n  formats() {\n    return this.statics.formats(this.domNode, this.scroll);\n  }\n}\nconst EmbedBlot$1 = EmbedBlot, OBSERVER_CONFIG = {\n  attributes: !0,\n  characterData: !0,\n  characterDataOldValue: !0,\n  childList: !0,\n  subtree: !0\n}, MAX_OPTIMIZE_ITERATIONS = 100, _ScrollBlot = class _ScrollBlot extends ParentBlot$1 {\n  constructor(registry, node) {\n    super(null, node), this.registry = registry, this.scroll = this, this.build(), this.observer = new MutationObserver((mutations) => {\n      this.update(mutations);\n    }), this.observer.observe(this.domNode, OBSERVER_CONFIG), this.attach();\n  }\n  create(input, value) {\n    return this.registry.create(this, input, value);\n  }\n  find(node, bubble = !1) {\n    const blot = this.registry.find(node, bubble);\n    return blot ? blot.scroll === this ? blot : bubble ? this.find(blot.scroll.domNode.parentNode, !0) : null : null;\n  }\n  query(query, scope = Scope.ANY) {\n    return this.registry.query(query, scope);\n  }\n  register(...definitions) {\n    return this.registry.register(...definitions);\n  }\n  build() {\n    this.scroll != null && super.build();\n  }\n  detach() {\n    super.detach(), this.observer.disconnect();\n  }\n  deleteAt(index, length) {\n    this.update(), index === 0 && length === this.length() ? this.children.forEach((child) => {\n      child.remove();\n    }) : super.deleteAt(index, length);\n  }\n  formatAt(index, length, name, value) {\n    this.update(), super.formatAt(index, length, name, value);\n  }\n  insertAt(index, value, def) {\n    this.update(), super.insertAt(index, value, def);\n  }\n  optimize(mutations = [], context = {}) {\n    super.optimize(context);\n    const mutationsMap = context.mutationsMap || /* @__PURE__ */ new WeakMap();\n    let records = Array.from(this.observer.takeRecords());\n    for (; records.length > 0; )\n      mutations.push(records.pop());\n    const mark = (blot, markParent = !0) => {\n      blot == null || blot === this || blot.domNode.parentNode != null && (mutationsMap.has(blot.domNode) || mutationsMap.set(blot.domNode, []), markParent && mark(blot.parent));\n    }, optimize = (blot) => {\n      mutationsMap.has(blot.domNode) && (blot instanceof ParentBlot$1 && blot.children.forEach(optimize), mutationsMap.delete(blot.domNode), blot.optimize(context));\n    };\n    let remaining = mutations;\n    for (let i = 0; remaining.length > 0; i += 1) {\n      if (i >= MAX_OPTIMIZE_ITERATIONS)\n        throw new Error(\"[Parchment] Maximum optimize iterations reached\");\n      for (remaining.forEach((mutation) => {\n        const blot = this.find(mutation.target, !0);\n        blot != null && (blot.domNode === mutation.target && (mutation.type === \"childList\" ? (mark(this.find(mutation.previousSibling, !1)), Array.from(mutation.addedNodes).forEach((node) => {\n          const child = this.find(node, !1);\n          mark(child, !1), child instanceof ParentBlot$1 && child.children.forEach((grandChild) => {\n            mark(grandChild, !1);\n          });\n        })) : mutation.type === \"attributes\" && mark(blot.prev)), mark(blot));\n      }), this.children.forEach(optimize), remaining = Array.from(this.observer.takeRecords()), records = remaining.slice(); records.length > 0; )\n        mutations.push(records.pop());\n    }\n  }\n  update(mutations, context = {}) {\n    mutations = mutations || this.observer.takeRecords();\n    const mutationsMap = /* @__PURE__ */ new WeakMap();\n    mutations.map((mutation) => {\n      const blot = this.find(mutation.target, !0);\n      return blot == null ? null : mutationsMap.has(blot.domNode) ? (mutationsMap.get(blot.domNode).push(mutation), null) : (mutationsMap.set(blot.domNode, [mutation]), blot);\n    }).forEach((blot) => {\n      blot != null && blot !== this && mutationsMap.has(blot.domNode) && blot.update(mutationsMap.get(blot.domNode) || [], context);\n    }), context.mutationsMap = mutationsMap, mutationsMap.has(this.domNode) && super.update(mutationsMap.get(this.domNode), context), this.optimize(mutations, context);\n  }\n};\n_ScrollBlot.blotName = \"scroll\", _ScrollBlot.defaultChild = BlockBlot$1, _ScrollBlot.allowedChildren = [BlockBlot$1, ContainerBlot$1], _ScrollBlot.scope = Scope.BLOCK_BLOT, _ScrollBlot.tagName = \"DIV\";\nlet ScrollBlot = _ScrollBlot;\nconst ScrollBlot$1 = ScrollBlot, _TextBlot = class _TextBlot extends LeafBlot$1 {\n  static create(value) {\n    return document.createTextNode(value);\n  }\n  static value(domNode) {\n    return domNode.data;\n  }\n  constructor(scroll, node) {\n    super(scroll, node), this.text = this.statics.value(this.domNode);\n  }\n  deleteAt(index, length) {\n    this.domNode.data = this.text = this.text.slice(0, index) + this.text.slice(index + length);\n  }\n  index(node, offset) {\n    return this.domNode === node ? offset : -1;\n  }\n  insertAt(index, value, def) {\n    def == null ? (this.text = this.text.slice(0, index) + value + this.text.slice(index), this.domNode.data = this.text) : super.insertAt(index, value, def);\n  }\n  length() {\n    return this.text.length;\n  }\n  optimize(context) {\n    super.optimize(context), this.text = this.statics.value(this.domNode), this.text.length === 0 ? this.remove() : this.next instanceof _TextBlot && this.next.prev === this && (this.insertAt(this.length(), this.next.value()), this.next.remove());\n  }\n  position(index, _inclusive = !1) {\n    return [this.domNode, index];\n  }\n  split(index, force = !1) {\n    if (!force) {\n      if (index === 0)\n        return this;\n      if (index === this.length())\n        return this.next;\n    }\n    const after = this.scroll.create(this.domNode.splitText(index));\n    return this.parent.insertBefore(after, this.next || void 0), this.text = this.statics.value(this.domNode), after;\n  }\n  update(mutations, _context) {\n    mutations.some((mutation) => mutation.type === \"characterData\" && mutation.target === this.domNode) && (this.text = this.statics.value(this.domNode));\n  }\n  value() {\n    return this.text;\n  }\n};\n_TextBlot.blotName = \"text\", _TextBlot.scope = Scope.INLINE_BLOT;\nlet TextBlot = _TextBlot;\nconst TextBlot$1 = TextBlot;\nexport {\n  Attributor,\n  AttributorStore$1 as AttributorStore,\n  BlockBlot$1 as BlockBlot,\n  ClassAttributor$1 as ClassAttributor,\n  ContainerBlot$1 as ContainerBlot,\n  EmbedBlot$1 as EmbedBlot,\n  InlineBlot$1 as InlineBlot,\n  LeafBlot$1 as LeafBlot,\n  ParentBlot$1 as ParentBlot,\n  Registry,\n  Scope,\n  ScrollBlot$1 as ScrollBlot,\n  StyleAttributor$1 as StyleAttributor,\n  TextBlot$1 as TextBlot\n};\n//# sourceMappingURL=parchment.js.map\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","import { EmbedBlot } from 'parchment';\n\nclass Break extends EmbedBlot {\n  static value() {\n    return undefined;\n  }\n\n  optimize() {\n    if (this.prev || this.next) {\n      this.remove();\n    }\n  }\n\n  length() {\n    return 0;\n  }\n\n  value() {\n    return '';\n  }\n}\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\n\nexport default Break;\n","import { TextBlot } from 'parchment';\n\nclass Text extends TextBlot {}\n\n// https://lodash.com/docs#escape\nconst entityMap: Record<string, string> = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n};\n\nfunction escapeText(text: string) {\n  return text.replace(/[&<>\"']/g, (s) => entityMap[s]);\n}\n\nexport { Text as default, escapeText };\n","import { EmbedBlot, InlineBlot, Scope } from 'parchment';\nimport type { BlotConstructor } from 'parchment';\nimport Break from './break.js';\nimport Text from './text.js';\n\nclass Inline extends InlineBlot {\n  static allowedChildren: BlotConstructor[] = [Inline, Break, EmbedBlot, Text];\n  // Lower index means deeper in the DOM tree, since not found (-1) is for embeds\n  static order = [\n    'cursor',\n    'inline', // Must be lower\n    'link', // Chrome wants <a> to be lower\n    'underline',\n    'strike',\n    'italic',\n    'bold',\n    'script',\n    'code', // Must be higher\n  ];\n\n  static compare(self: string, other: string) {\n    const selfIndex = Inline.order.indexOf(self);\n    const otherIndex = Inline.order.indexOf(other);\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    }\n    if (self === other) {\n      return 0;\n    }\n    if (self < other) {\n      return -1;\n    }\n    return 1;\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (\n      Inline.compare(this.statics.blotName, name) < 0 &&\n      this.scroll.query(name, Scope.BLOT)\n    ) {\n      const blot = this.isolate(index, length);\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    if (\n      this.parent instanceof Inline &&\n      Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0\n    ) {\n      const parent = this.parent.isolate(this.offset(), this.length());\n      // @ts-expect-error TODO: make isolate generic\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n}\n\nexport default Inline;\n","import {\n  AttributorStore,\n  BlockBlot,\n  EmbedBlot,\n  LeafBlot,\n  Scope,\n} from 'parchment';\nimport type { Blot, Parent } from 'parchment';\nimport Delta from 'quill-delta';\nimport Break from './break.js';\nimport Inline from './inline.js';\nimport TextBlot from './text.js';\n\nconst NEWLINE_LENGTH = 1;\n\nclass Block extends BlockBlot {\n  cache: { delta?: Delta | null; length?: number } = {};\n\n  delta(): Delta {\n    if (this.cache.delta == null) {\n      this.cache.delta = blockDelta(this);\n    }\n    return this.cache.delta;\n  }\n\n  deleteAt(index: number, length: number) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (length <= 0) return;\n    if (this.scroll.query(name, Scope.BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(\n        index,\n        Math.min(length, this.length() - index - 1),\n        name,\n        value,\n      );\n    }\n    this.cache = {};\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      this.cache = {};\n      return;\n    }\n    if (value.length === 0) return;\n    const lines = value.split('\\n');\n    const text = lines.shift() as string;\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n      this.cache = {};\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let block: Blot | this = this;\n    lines.reduce((lineIndex, line) => {\n      // @ts-expect-error Fix me later\n      block = block.split(lineIndex, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n\n  insertBefore(blot: Blot, ref?: Blot | null) {\n    const { head } = this.children;\n    super.insertBefore(blot, ref);\n    if (head instanceof Break) {\n      head.remove();\n    }\n    this.cache = {};\n  }\n\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n    return this.cache.length;\n  }\n\n  moveChildren(target: Parent, ref?: Blot | null) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    this.cache = {};\n  }\n\n  path(index: number) {\n    return super.path(index, true);\n  }\n\n  removeChild(child: Blot) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n\n  split(index: number, force: boolean | undefined = false): Blot | null {\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      const clone = this.clone();\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      }\n      this.parent.insertBefore(clone, this.next);\n      return clone;\n    }\n    const next = super.split(index, force);\n    this.cache = {};\n    return next;\n  }\n}\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = Break;\nBlock.allowedChildren = [Break, Inline, EmbedBlot, TextBlot];\n\nclass BlockEmbed extends EmbedBlot {\n  attributes: AttributorStore;\n  domNode: HTMLElement;\n\n  attach() {\n    super.attach();\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  delta() {\n    return new Delta().insert(this.value(), {\n      ...this.formats(),\n      ...this.attributes.values(),\n    });\n  }\n\n  format(name: string, value: unknown) {\n    const attribute = this.scroll.query(name, Scope.BLOCK_ATTRIBUTE);\n    if (attribute != null) {\n      // @ts-expect-error TODO: Scroll#query() should return Attributor when scope is attribute\n      this.attributes.attribute(attribute, value);\n    }\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    this.format(name, value);\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      return;\n    }\n    const lines = value.split('\\n');\n    const text = lines.pop();\n    const blocks = lines.map((line) => {\n      const block = this.scroll.create(Block.blotName);\n      block.insertAt(0, line);\n      return block;\n    });\n    const ref = this.split(index);\n    blocks.forEach((block) => {\n      this.parent.insertBefore(block, ref);\n    });\n    if (text) {\n      this.parent.insertBefore(this.scroll.create('text', text), ref);\n    }\n  }\n}\nBlockEmbed.scope = Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\nfunction blockDelta(blot: BlockBlot, filter = true) {\n  return blot\n    .descendants(LeafBlot)\n    .reduce((delta, leaf) => {\n      if (leaf.length() === 0) {\n        return delta;\n      }\n      return delta.insert(leaf.value(), bubbleFormats(leaf, {}, filter));\n    }, new Delta())\n    .insert('\\n', bubbleFormats(blot));\n}\n\nfunction bubbleFormats(\n  blot: Blot | null,\n  formats: Record<string, unknown> = {},\n  filter = true,\n): Record<string, unknown> {\n  if (blot == null) return formats;\n  if ('formats' in blot && typeof blot.formats === 'function') {\n    formats = {\n      ...formats,\n      ...blot.formats(),\n    };\n    if (filter) {\n      // exclude syntax highlighting from deltas and getFormat()\n      delete formats['code-token'];\n    }\n  }\n  if (\n    blot.parent == null ||\n    blot.parent.statics.blotName === 'scroll' ||\n    blot.parent.statics.scope !== blot.statics.scope\n  ) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats, filter);\n}\n\nexport { blockDelta, bubbleFormats, BlockEmbed, Block as default };\n","import { EmbedBlot, Scope } from 'parchment';\nimport type { Parent, ScrollBlot } from 'parchment';\nimport type Selection from '../core/selection.js';\nimport TextBlot from './text.js';\nimport type { EmbedContextRange } from './embed.js';\n\nclass Cursor extends EmbedBlot {\n  static blotName = 'cursor';\n  static className = 'ql-cursor';\n  static tagName = 'span';\n  static CONTENTS = '\\uFEFF'; // Zero width no break space\n\n  static value() {\n    return undefined;\n  }\n\n  selection: Selection;\n  textNode: Text;\n  savedLength: number;\n\n  constructor(scroll: ScrollBlot, domNode: HTMLElement, selection: Selection) {\n    super(scroll, domNode);\n    this.selection = selection;\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\n    this.domNode.appendChild(this.textNode);\n    this.savedLength = 0;\n  }\n\n  detach() {\n    // super.detach() will also clear domNode.__blot\n    if (this.parent != null) this.parent.removeChild(this);\n  }\n\n  format(name: string, value: unknown) {\n    if (this.savedLength !== 0) {\n      super.format(name, value);\n      return;\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let target: Parent | this = this;\n    let index = 0;\n    while (target != null && target.statics.scope !== Scope.BLOCK_BLOT) {\n      index += target.offset(target.parent);\n      target = target.parent;\n    }\n    if (target != null) {\n      this.savedLength = Cursor.CONTENTS.length;\n      // @ts-expect-error TODO: allow empty context in Parchment\n      target.optimize();\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\n      this.savedLength = 0;\n    }\n  }\n\n  index(node: Node, offset: number) {\n    if (node === this.textNode) return 0;\n    return super.index(node, offset);\n  }\n\n  length() {\n    return this.savedLength;\n  }\n\n  position(): [Text, number] {\n    return [this.textNode, this.textNode.data.length];\n  }\n\n  remove() {\n    super.remove();\n    // @ts-expect-error Fix me later\n    this.parent = null;\n  }\n\n  restore(): EmbedContextRange | null {\n    if (this.selection.composing || this.parent == null) return null;\n    const range = this.selection.getNativeRange();\n    // Browser may push down styles/nodes inside the cursor blot.\n    // https://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#push-down-values\n    while (\n      this.domNode.lastChild != null &&\n      this.domNode.lastChild !== this.textNode\n    ) {\n      // @ts-expect-error Fix me later\n      this.domNode.parentNode.insertBefore(\n        this.domNode.lastChild,\n        this.domNode,\n      );\n    }\n\n    const prevTextBlot = this.prev instanceof TextBlot ? this.prev : null;\n    const prevTextLength = prevTextBlot ? prevTextBlot.length() : 0;\n    const nextTextBlot = this.next instanceof TextBlot ? this.next : null;\n    // @ts-expect-error TODO: make TextBlot.text public\n    const nextText = nextTextBlot ? nextTextBlot.text : '';\n    const { textNode } = this;\n    // take text from inside this blot and reset it\n    const newText = textNode.data.split(Cursor.CONTENTS).join('');\n    textNode.data = Cursor.CONTENTS;\n\n    // proactively merge TextBlots around cursor so that optimization\n    // doesn't lose the cursor.  the reason we are here in cursor.restore\n    // could be that the user clicked in prevTextBlot or nextTextBlot, or\n    // the user typed something.\n    let mergedTextBlot;\n    if (prevTextBlot) {\n      mergedTextBlot = prevTextBlot;\n      if (newText || nextTextBlot) {\n        prevTextBlot.insertAt(prevTextBlot.length(), newText + nextText);\n        if (nextTextBlot) {\n          nextTextBlot.remove();\n        }\n      }\n    } else if (nextTextBlot) {\n      mergedTextBlot = nextTextBlot;\n      nextTextBlot.insertAt(0, newText);\n    } else {\n      const newTextNode = document.createTextNode(newText);\n      mergedTextBlot = this.scroll.create(newTextNode);\n      this.parent.insertBefore(mergedTextBlot, this);\n    }\n\n    this.remove();\n    if (range) {\n      // calculate selection to restore\n      const remapOffset = (node: Node, offset: number) => {\n        if (prevTextBlot && node === prevTextBlot.domNode) {\n          return offset;\n        }\n        if (node === textNode) {\n          return prevTextLength + offset - 1;\n        }\n        if (nextTextBlot && node === nextTextBlot.domNode) {\n          return prevTextLength + newText.length + offset;\n        }\n        return null;\n      };\n\n      const start = remapOffset(range.start.node, range.start.offset);\n      const end = remapOffset(range.end.node, range.end.offset);\n      if (start !== null && end !== null) {\n        return {\n          startNode: mergedTextBlot.domNode,\n          startOffset: start,\n          endNode: mergedTextBlot.domNode,\n          endOffset: end,\n        };\n      }\n    }\n    return null;\n  }\n\n  update(mutations: MutationRecord[], context: Record<string, unknown>) {\n    if (\n      mutations.some((mutation) => {\n        return (\n          mutation.type === 'characterData' && mutation.target === this.textNode\n        );\n      })\n    ) {\n      const range = this.restore();\n      if (range) context.range = range;\n    }\n  }\n\n  // Avoid .ql-cursor being a descendant of `<a/>`.\n  // The reason is Safari pushes down `<a/>` on text insertion.\n  // That will cause DOM nodes not sync with the model.\n  //\n  // For example ({I} is the caret), given the markup:\n  //    <a><span class=\"ql-cursor\">\\uFEFF{I}</span></a>\n  // When typing a char \"x\", `<a/>` will be pushed down inside the `<span>` first:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF{I}</a></span>\n  // And then \"x\" will be inserted after `<a/>`:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF</a>d{I}</span>\n  optimize(context?: unknown) {\n    // @ts-expect-error Fix me later\n    super.optimize(context);\n\n    let { parent } = this;\n    while (parent) {\n      if (parent.domNode.tagName === 'A') {\n        this.savedLength = Cursor.CONTENTS.length;\n        // @ts-expect-error TODO: make isolate generic\n        parent.isolate(this.offset(parent), this.length()).unwrap();\n        this.savedLength = 0;\n        break;\n      }\n      parent = parent.parent;\n    }\n  }\n\n  value() {\n    return '';\n  }\n}\n\nexport default Cursor;\n","import type Quill from '../core.js';\n\nexport default new WeakMap<Node, Quill>();\n","const levels = ['error', 'warn', 'log', 'info'] as const;\nexport type DebugLevel = (typeof levels)[number];\nlet level: DebugLevel | false = 'warn';\n\nfunction debug(method: DebugLevel, ...args: unknown[]) {\n  if (level) {\n    if (levels.indexOf(method) <= levels.indexOf(level)) {\n      console[method](...args); // eslint-disable-line no-console\n    }\n  }\n}\n\nfunction namespace(\n  ns: string,\n): Record<DebugLevel, (...args: unknown[]) => void> {\n  return levels.reduce(\n    (logger, method) => {\n      logger[method] = debug.bind(console, method, ns);\n      return logger;\n    },\n    {} as Record<DebugLevel, (...args: unknown[]) => void>,\n  );\n}\n\nnamespace.level = (newLevel: DebugLevel | false) => {\n  level = newLevel;\n};\ndebug.level = namespace.level;\n\nexport default namespace;\n","import { EventEmitter } from 'eventemitter3';\nimport instances from './instances.js';\nimport logger from './logger.js';\n\nconst debug = logger('quill:events');\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\n\nEVENTS.forEach((eventName) => {\n  document.addEventListener(eventName, (...args) => {\n    Array.from(document.querySelectorAll('.ql-container')).forEach((node) => {\n      const quill = instances.get(node);\n      if (quill && quill.emitter) {\n        quill.emitter.handleDOM(...args);\n      }\n    });\n  });\n});\n\nclass Emitter extends EventEmitter<string> {\n  static events = {\n    EDITOR_CHANGE: 'editor-change',\n    SCROLL_BEFORE_UPDATE: 'scroll-before-update',\n    SCROLL_BLOT_MOUNT: 'scroll-blot-mount',\n    SCROLL_BLOT_UNMOUNT: 'scroll-blot-unmount',\n    SCROLL_OPTIMIZE: 'scroll-optimize',\n    SCROLL_UPDATE: 'scroll-update',\n    SCROLL_EMBED_UPDATE: 'scroll-embed-update',\n    SELECTION_CHANGE: 'selection-change',\n    TEXT_CHANGE: 'text-change',\n    COMPOSITION_BEFORE_START: 'composition-before-start',\n    COMPOSITION_START: 'composition-start',\n    COMPOSITION_BEFORE_END: 'composition-before-end',\n    COMPOSITION_END: 'composition-end',\n  } as const;\n\n  static sources = {\n    API: 'api',\n    SILENT: 'silent',\n    USER: 'user',\n  } as const;\n\n  protected domListeners: Record<string, { node: Node; handler: Function }[]>;\n\n  constructor() {\n    super();\n    this.domListeners = {};\n    this.on('error', debug.error);\n  }\n\n  emit(...args: unknown[]): boolean {\n    debug.log.call(debug, ...args);\n    // @ts-expect-error\n    return super.emit(...args);\n  }\n\n  handleDOM(event: Event, ...args: unknown[]) {\n    (this.domListeners[event.type] || []).forEach(({ node, handler }) => {\n      if (event.target === node || node.contains(event.target as Node)) {\n        handler(event, ...args);\n      }\n    });\n  }\n\n  listenDOM(eventName: string, node: Node, handler: EventListener) {\n    if (!this.domListeners[eventName]) {\n      this.domListeners[eventName] = [];\n    }\n    this.domListeners[eventName].push({ node, handler });\n  }\n}\n\nexport type EmitterSource =\n  (typeof Emitter.sources)[keyof typeof Emitter.sources];\n\nexport default Emitter;\n","import { LeafBlot, Scope } from 'parchment';\nimport { cloneDeep, isEqual } from 'lodash-es';\nimport Emitter from './emitter.js';\nimport type { EmitterSource } from './emitter.js';\nimport logger from './logger.js';\nimport type Cursor from '../blots/cursor.js';\nimport type Scroll from '../blots/scroll.js';\n\nconst debug = logger('quill:selection');\n\ntype NativeRange = AbstractRange;\n\ninterface NormalizedRange {\n  start: {\n    node: NativeRange['startContainer'];\n    offset: NativeRange['startOffset'];\n  };\n  end: { node: NativeRange['endContainer']; offset: NativeRange['endOffset'] };\n  native: NativeRange;\n}\n\nexport interface Bounds {\n  bottom: number;\n  height: number;\n  left: number;\n  right: number;\n  top: number;\n  width: number;\n}\n\nexport class Range {\n  constructor(\n    public index: number,\n    public length = 0,\n  ) {}\n}\n\nclass Selection {\n  scroll: Scroll;\n  emitter: Emitter;\n  composing: boolean;\n  mouseDown: boolean;\n\n  root: HTMLElement;\n  cursor: Cursor;\n  savedRange: Range;\n  lastRange: Range | null;\n  lastNative: NormalizedRange | null;\n\n  constructor(scroll: Scroll, emitter: Emitter) {\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    // @ts-expect-error\n    this.cursor = this.scroll.create('cursor', this);\n    // savedRange is last non-null range\n    this.savedRange = new Range(0, 0);\n    this.lastRange = this.savedRange;\n    this.lastNative = null;\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, () => {\n      if (!this.mouseDown && !this.composing) {\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\n      if (!this.hasFocus()) return;\n      const native = this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === this.cursor.textNode) return; // cursor.restore() will handle\n      this.emitter.once(\n        Emitter.events.SCROLL_UPDATE,\n        (source, mutations: MutationRecord[]) => {\n          try {\n            if (\n              this.root.contains(native.start.node) &&\n              this.root.contains(native.end.node)\n            ) {\n              this.setNativeRange(\n                native.start.node,\n                native.start.offset,\n                native.end.node,\n                native.end.offset,\n              );\n            }\n            const triggeredByTyping = mutations.some(\n              (mutation) =>\n                mutation.type === 'characterData' ||\n                mutation.type === 'childList' ||\n                (mutation.type === 'attributes' &&\n                  mutation.target === this.root),\n            );\n            this.update(triggeredByTyping ? Emitter.sources.SILENT : source);\n          } catch (ignored) {\n            // ignore\n          }\n        },\n      );\n    });\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\n      if (context.range) {\n        const { startNode, startOffset, endNode, endOffset } = context.range;\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\n        this.update(Emitter.sources.SILENT);\n      }\n    });\n    this.update(Emitter.sources.SILENT);\n  }\n\n  handleComposition() {\n    this.emitter.on(Emitter.events.COMPOSITION_BEFORE_START, () => {\n      this.composing = true;\n    });\n    this.emitter.on(Emitter.events.COMPOSITION_END, () => {\n      this.composing = false;\n      if (this.cursor.parent) {\n        const range = this.cursor.restore();\n        if (!range) return;\n        setTimeout(() => {\n          this.setNativeRange(\n            range.startNode,\n            range.startOffset,\n            range.endNode,\n            range.endOffset,\n          );\n        }, 1);\n      }\n    });\n  }\n\n  handleDragging() {\n    this.emitter.listenDOM('mousedown', document.body, () => {\n      this.mouseDown = true;\n    });\n    this.emitter.listenDOM('mouseup', document.body, () => {\n      this.mouseDown = false;\n      this.update(Emitter.sources.USER);\n    });\n  }\n\n  focus() {\n    if (this.hasFocus()) return;\n    this.root.focus({ preventScroll: true });\n    this.setRange(this.savedRange);\n  }\n\n  format(format: string, value: unknown) {\n    this.scroll.update();\n    const nativeRange = this.getNativeRange();\n    if (\n      nativeRange == null ||\n      !nativeRange.native.collapsed ||\n      this.scroll.query(format, Scope.BLOCK)\n    )\n      return;\n    if (nativeRange.start.node !== this.cursor.textNode) {\n      const blot = this.scroll.find(nativeRange.start.node, false);\n      if (blot == null) return;\n      // TODO Give blot ability to not split\n      if (blot instanceof LeafBlot) {\n        const after = blot.split(nativeRange.start.offset);\n        blot.parent.insertBefore(this.cursor, after);\n      } else {\n        // @ts-expect-error TODO: nativeRange.start.node doesn't seem to match function signature\n        blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\n      }\n      this.cursor.attach();\n    }\n    this.cursor.format(format, value);\n    this.scroll.optimize();\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n    this.update();\n  }\n\n  getBounds(index: number, length = 0) {\n    const scrollLength = this.scroll.length();\n    index = Math.min(index, scrollLength - 1);\n    length = Math.min(index + length, scrollLength - 1) - index;\n    let node: Node;\n    let [leaf, offset] = this.scroll.leaf(index);\n    if (leaf == null) return null;\n    if (length > 0 && offset === leaf.length()) {\n      const [next] = this.scroll.leaf(index + 1);\n      if (next) {\n        const [line] = this.scroll.line(index);\n        const [nextLine] = this.scroll.line(index + 1);\n        if (line === nextLine) {\n          leaf = next;\n          offset = 0;\n        }\n      }\n    }\n    [node, offset] = leaf.position(offset, true);\n    const range = document.createRange();\n    if (length > 0) {\n      range.setStart(node, offset);\n      [leaf, offset] = this.scroll.leaf(index + length);\n      if (leaf == null) return null;\n      [node, offset] = leaf.position(offset, true);\n      range.setEnd(node, offset);\n      return range.getBoundingClientRect();\n    }\n    let side: 'left' | 'right' = 'left';\n    let rect: DOMRect;\n    if (node instanceof Text) {\n      // Return null if the text node is empty because it is\n      // not able to get a useful client rect:\n      // https://github.com/w3c/csswg-drafts/issues/2514.\n      // Empty text nodes are most likely caused by TextBlot#optimize()\n      // not getting called when editor content changes.\n      if (!node.data.length) {\n        return null;\n      }\n      if (offset < node.data.length) {\n        range.setStart(node, offset);\n        range.setEnd(node, offset + 1);\n      } else {\n        range.setStart(node, offset - 1);\n        range.setEnd(node, offset);\n        side = 'right';\n      }\n      rect = range.getBoundingClientRect();\n    } else {\n      if (!(leaf.domNode instanceof Element)) return null;\n      rect = leaf.domNode.getBoundingClientRect();\n      if (offset > 0) side = 'right';\n    }\n    return {\n      bottom: rect.top + rect.height,\n      height: rect.height,\n      left: rect[side],\n      right: rect[side],\n      top: rect.top,\n      width: 0,\n    };\n  }\n\n  getNativeRange(): NormalizedRange | null {\n    const selection = document.getSelection();\n    if (selection == null || selection.rangeCount <= 0) return null;\n    const nativeRange = selection.getRangeAt(0);\n    if (nativeRange == null) return null;\n    const range = this.normalizeNative(nativeRange);\n    debug.info('getNativeRange', range);\n    return range;\n  }\n\n  getRange(): [Range, NormalizedRange] | [null, null] {\n    const root = this.scroll.domNode;\n    if ('isConnected' in root && !root.isConnected) {\n      // document.getSelection() forces layout on Blink, so we trend to\n      // not calling it.\n      return [null, null];\n    }\n    const normalized = this.getNativeRange();\n    if (normalized == null) return [null, null];\n    const range = this.normalizedToRange(normalized);\n    return [range, normalized];\n  }\n\n  hasFocus(): boolean {\n    return (\n      document.activeElement === this.root ||\n      (document.activeElement != null &&\n        contains(this.root, document.activeElement))\n    );\n  }\n\n  normalizedToRange(range: NormalizedRange) {\n    const positions: [Node, number][] = [\n      [range.start.node, range.start.offset],\n    ];\n    if (!range.native.collapsed) {\n      positions.push([range.end.node, range.end.offset]);\n    }\n    const indexes = positions.map((position) => {\n      const [node, offset] = position;\n      const blot = this.scroll.find(node, true);\n      // @ts-expect-error Fix me later\n      const index = blot.offset(this.scroll);\n      if (offset === 0) {\n        return index;\n      }\n      if (blot instanceof LeafBlot) {\n        return index + blot.index(node, offset);\n      }\n      // @ts-expect-error Fix me later\n      return index + blot.length();\n    });\n    const end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\n    const start = Math.min(end, ...indexes);\n    return new Range(start, end - start);\n  }\n\n  normalizeNative(nativeRange: NativeRange) {\n    if (\n      !contains(this.root, nativeRange.startContainer) ||\n      (!nativeRange.collapsed && !contains(this.root, nativeRange.endContainer))\n    ) {\n      return null;\n    }\n    const range = {\n      start: {\n        node: nativeRange.startContainer,\n        offset: nativeRange.startOffset,\n      },\n      end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\n      native: nativeRange,\n    };\n    [range.start, range.end].forEach((position) => {\n      let { node, offset } = position;\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\n        if (node.childNodes.length > offset) {\n          node = node.childNodes[offset];\n          offset = 0;\n        } else if (node.childNodes.length === offset) {\n          // @ts-expect-error Fix me later\n          node = node.lastChild;\n          if (node instanceof Text) {\n            offset = node.data.length;\n          } else if (node.childNodes.length > 0) {\n            // Container case\n            offset = node.childNodes.length;\n          } else {\n            // Embed case\n            offset = node.childNodes.length + 1;\n          }\n        } else {\n          break;\n        }\n      }\n      position.node = node;\n      position.offset = offset;\n    });\n    return range;\n  }\n\n  rangeToNative(range: Range): [Node | null, number, Node | null, number] {\n    const scrollLength = this.scroll.length();\n\n    const getPosition = (\n      index: number,\n      inclusive: boolean,\n    ): [Node | null, number] => {\n      index = Math.min(scrollLength - 1, index);\n      const [leaf, leafOffset] = this.scroll.leaf(index);\n      return leaf ? leaf.position(leafOffset, inclusive) : [null, -1];\n    };\n    return [\n      ...getPosition(range.index, false),\n      ...getPosition(range.index + range.length, true),\n    ];\n  }\n\n  setNativeRange(\n    startNode: Node | null,\n    startOffset?: number,\n    endNode = startNode,\n    endOffset = startOffset,\n    force = false,\n  ) {\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n    if (\n      startNode != null &&\n      (this.root.parentNode == null ||\n        startNode.parentNode == null ||\n        // @ts-expect-error Fix me later\n        endNode.parentNode == null)\n    ) {\n      return;\n    }\n    const selection = document.getSelection();\n    if (selection == null) return;\n    if (startNode != null) {\n      if (!this.hasFocus()) this.root.focus({ preventScroll: true });\n      const { native } = this.getNativeRange() || {};\n      if (\n        native == null ||\n        force ||\n        startNode !== native.startContainer ||\n        startOffset !== native.startOffset ||\n        endNode !== native.endContainer ||\n        endOffset !== native.endOffset\n      ) {\n        if (startNode instanceof Element && startNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          startOffset = Array.from(startNode.parentNode.childNodes).indexOf(\n            startNode,\n          );\n          startNode = startNode.parentNode;\n        }\n        if (endNode instanceof Element && endNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          endOffset = Array.from(endNode.parentNode.childNodes).indexOf(\n            endNode,\n          );\n          endNode = endNode.parentNode;\n        }\n        const range = document.createRange();\n        // @ts-expect-error Fix me later\n        range.setStart(startNode, startOffset);\n        // @ts-expect-error Fix me later\n        range.setEnd(endNode, endOffset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    } else {\n      selection.removeAllRanges();\n      this.root.blur();\n    }\n  }\n\n  setRange(range: Range | null, force: boolean, source?: EmitterSource): void;\n  setRange(range: Range | null, source?: EmitterSource): void;\n  setRange(\n    range: Range | null,\n    force: boolean | EmitterSource = false,\n    source: EmitterSource = Emitter.sources.API,\n  ): void {\n    if (typeof force === 'string') {\n      source = force;\n      force = false;\n    }\n    debug.info('setRange', range);\n    if (range != null) {\n      const args = this.rangeToNative(range);\n      this.setNativeRange(...args, force);\n    } else {\n      this.setNativeRange(null);\n    }\n    this.update(source);\n  }\n\n  update(source: EmitterSource = Emitter.sources.USER) {\n    const oldRange = this.lastRange;\n    const [lastRange, nativeRange] = this.getRange();\n    this.lastRange = lastRange;\n    this.lastNative = nativeRange;\n    if (this.lastRange != null) {\n      this.savedRange = this.lastRange;\n    }\n    if (!isEqual(oldRange, this.lastRange)) {\n      if (\n        !this.composing &&\n        nativeRange != null &&\n        nativeRange.native.collapsed &&\n        nativeRange.start.node !== this.cursor.textNode\n      ) {\n        const range = this.cursor.restore();\n        if (range) {\n          this.setNativeRange(\n            range.startNode,\n            range.startOffset,\n            range.endNode,\n            range.endOffset,\n          );\n        }\n      }\n      const args = [\n        Emitter.events.SELECTION_CHANGE,\n        cloneDeep(this.lastRange),\n        cloneDeep(oldRange),\n        source,\n      ];\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n      if (source !== Emitter.sources.SILENT) {\n        this.emitter.emit(...args);\n      }\n    }\n  }\n}\n\nfunction contains(parent: Node, descendant: Node) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode; // eslint-disable-line @typescript-eslint/no-unused-expressions\n  } catch (e) {\n    return false;\n  }\n  return parent.contains(descendant);\n}\n\nexport default Selection;\n","import { cloneDeep, isEqual, merge } from 'lodash-es';\nimport { LeafBlot, EmbedBlot, Scope, ParentBlot } from 'parchment';\nimport type { Blot } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Block, { BlockEmbed, bubbleFormats } from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport type Scroll from '../blots/scroll.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport { Range } from './selection.js';\n\nconst ASCII = /^[ -~]*$/;\n\ntype SelectionInfo = {\n  newRange: Range;\n  oldRange: Range;\n};\n\nclass Editor {\n  scroll: Scroll;\n  delta: Delta;\n\n  constructor(scroll: Scroll) {\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n\n  applyDelta(delta: Delta): Delta {\n    this.scroll.update();\n    let scrollLength = this.scroll.length();\n    this.scroll.batchStart();\n    const normalizedDelta = normalizeDelta(delta);\n    const deleteDelta = new Delta();\n    const normalizedOps = splitOpLines(normalizedDelta.ops.slice());\n    normalizedOps.reduce((index, op) => {\n      const length = Op.length(op);\n      let attributes = op.attributes || {};\n      let isImplicitNewlinePrepended = false;\n      let isImplicitNewlineAppended = false;\n      if (op.insert != null) {\n        deleteDelta.retain(length);\n        if (typeof op.insert === 'string') {\n          const text = op.insert;\n          isImplicitNewlineAppended =\n            !text.endsWith('\\n') &&\n            (scrollLength <= index ||\n              !!this.scroll.descendant(BlockEmbed, index)[0]);\n          this.scroll.insertAt(index, text);\n          const [line, offset] = this.scroll.line(index);\n          let formats = merge({}, bubbleFormats(line));\n          if (line instanceof Block) {\n            const [leaf] = line.descendant(LeafBlot, offset);\n            if (leaf) {\n              formats = merge(formats, bubbleFormats(leaf));\n            }\n          }\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        } else if (typeof op.insert === 'object') {\n          const key = Object.keys(op.insert)[0]; // There should only be one key\n          if (key == null) return index;\n          const isInlineEmbed = this.scroll.query(key, Scope.INLINE) != null;\n          if (isInlineEmbed) {\n            if (\n              scrollLength <= index ||\n              !!this.scroll.descendant(BlockEmbed, index)[0]\n            ) {\n              isImplicitNewlineAppended = true;\n            }\n          } else if (index > 0) {\n            const [leaf, offset] = this.scroll.descendant(LeafBlot, index - 1);\n            if (leaf instanceof TextBlot) {\n              const text = leaf.value();\n              if (text[offset] !== '\\n') {\n                isImplicitNewlinePrepended = true;\n              }\n            } else if (\n              leaf instanceof EmbedBlot &&\n              leaf.statics.scope === Scope.INLINE_BLOT\n            ) {\n              isImplicitNewlinePrepended = true;\n            }\n          }\n          this.scroll.insertAt(index, key, op.insert[key]);\n\n          if (isInlineEmbed) {\n            const [leaf] = this.scroll.descendant(LeafBlot, index);\n            if (leaf) {\n              const formats = merge({}, bubbleFormats(leaf));\n              attributes = AttributeMap.diff(formats, attributes) || {};\n            }\n          }\n        }\n        scrollLength += length;\n      } else {\n        deleteDelta.push(op);\n\n        if (op.retain !== null && typeof op.retain === 'object') {\n          const key = Object.keys(op.retain)[0];\n          if (key == null) return index;\n          this.scroll.updateEmbedAt(index, key, op.retain[key]);\n        }\n      }\n      Object.keys(attributes).forEach((name) => {\n        this.scroll.formatAt(index, length, name, attributes[name]);\n      });\n      const prependedLength = isImplicitNewlinePrepended ? 1 : 0;\n      const addedLength = isImplicitNewlineAppended ? 1 : 0;\n      scrollLength += prependedLength + addedLength;\n      deleteDelta.retain(prependedLength);\n      deleteDelta.delete(addedLength);\n      return index + length + prependedLength + addedLength;\n    }, 0);\n    deleteDelta.reduce((index, op) => {\n      if (typeof op.delete === 'number') {\n        this.scroll.deleteAt(index, op.delete);\n        return index;\n      }\n      return index + Op.length(op);\n    }, 0);\n    this.scroll.batchEnd();\n    this.scroll.optimize();\n    return this.update(normalizedDelta);\n  }\n\n  deleteText(index: number, length: number): Delta {\n    this.scroll.deleteAt(index, length);\n    return this.update(new Delta().retain(index).delete(length));\n  }\n\n  formatLine(\n    index: number,\n    length: number,\n    formats: Record<string, unknown> = {},\n  ): Delta {\n    this.scroll.update();\n    Object.keys(formats).forEach((format) => {\n      this.scroll.lines(index, Math.max(length, 1)).forEach((line) => {\n        line.format(format, formats[format]);\n      });\n    });\n    this.scroll.optimize();\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n\n  formatText(\n    index: number,\n    length: number,\n    formats: Record<string, unknown> = {},\n  ): Delta {\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, length, format, formats[format]);\n    });\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n\n  getContents(index: number, length: number): Delta {\n    return this.delta.slice(index, index + length);\n  }\n\n  getDelta(): Delta {\n    return this.scroll.lines().reduce((delta, line) => {\n      return delta.concat(line.delta());\n    }, new Delta());\n  }\n\n  getFormat(index: number, length = 0): Record<string, unknown> {\n    let lines: (Block | BlockEmbed)[] = [];\n    let leaves: LeafBlot[] = [];\n    if (length === 0) {\n      this.scroll.path(index).forEach((path) => {\n        const [blot] = path;\n        if (blot instanceof Block) {\n          lines.push(blot);\n        } else if (blot instanceof LeafBlot) {\n          leaves.push(blot);\n        }\n      });\n    } else {\n      lines = this.scroll.lines(index, length);\n      leaves = this.scroll.descendants(LeafBlot, index, length);\n    }\n    const [lineFormats, leafFormats] = [lines, leaves].map((blots) => {\n      const blot = blots.shift();\n      if (blot == null) return {};\n      let formats = bubbleFormats(blot);\n      while (Object.keys(formats).length > 0) {\n        const blot = blots.shift();\n        if (blot == null) return formats;\n        formats = combineFormats(bubbleFormats(blot), formats);\n      }\n      return formats;\n    });\n    return { ...lineFormats, ...leafFormats };\n  }\n\n  getHTML(index: number, length: number): string {\n    const [line, lineOffset] = this.scroll.line(index);\n    if (line) {\n      const lineLength = line.length();\n      const isWithinLine = line.length() >= lineOffset + length;\n      if (isWithinLine && !(lineOffset === 0 && length === lineLength)) {\n        return convertHTML(line, lineOffset, length, true);\n      }\n      return convertHTML(this.scroll, index, length, true);\n    }\n    return '';\n  }\n\n  getText(index: number, length: number): string {\n    return this.getContents(index, length)\n      .filter((op) => typeof op.insert === 'string')\n      .map((op) => op.insert)\n      .join('');\n  }\n\n  insertContents(index: number, contents: Delta): Delta {\n    const normalizedDelta = normalizeDelta(contents);\n    const change = new Delta().retain(index).concat(normalizedDelta);\n    this.scroll.insertContents(index, normalizedDelta);\n    return this.update(change);\n  }\n\n  insertEmbed(index: number, embed: string, value: unknown): Delta {\n    this.scroll.insertAt(index, embed, value);\n    return this.update(new Delta().retain(index).insert({ [embed]: value }));\n  }\n\n  insertText(\n    index: number,\n    text: string,\n    formats: Record<string, unknown> = {},\n  ): Delta {\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    this.scroll.insertAt(index, text);\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, text.length, format, formats[format]);\n    });\n    return this.update(\n      new Delta().retain(index).insert(text, cloneDeep(formats)),\n    );\n  }\n\n  isBlank(): boolean {\n    if (this.scroll.children.length === 0) return true;\n    if (this.scroll.children.length > 1) return false;\n    const blot = this.scroll.children.head;\n    if (blot?.statics.blotName !== Block.blotName) return false;\n    const block = blot as Block;\n    if (block.children.length > 1) return false;\n    return block.children.head instanceof Break;\n  }\n\n  removeFormat(index: number, length: number): Delta {\n    const text = this.getText(index, length);\n    const [line, offset] = this.scroll.line(index + length);\n    let suffixLength = 0;\n    let suffix = new Delta();\n    if (line != null) {\n      suffixLength = line.length() - offset;\n      suffix = line\n        .delta()\n        .slice(offset, offset + suffixLength - 1)\n        .insert('\\n');\n    }\n    const contents = this.getContents(index, length + suffixLength);\n    const diff = contents.diff(new Delta().insert(text).concat(suffix));\n    const delta = new Delta().retain(index).concat(diff);\n    return this.applyDelta(delta);\n  }\n\n  update(\n    change: Delta | null,\n    mutations: MutationRecord[] = [],\n    selectionInfo: SelectionInfo | undefined = undefined,\n  ): Delta {\n    const oldDelta = this.delta;\n    if (\n      mutations.length === 1 &&\n      mutations[0].type === 'characterData' &&\n      // @ts-expect-error Fix me later\n      mutations[0].target.data.match(ASCII) &&\n      this.scroll.find(mutations[0].target)\n    ) {\n      // Optimization for character changes\n      const textBlot = this.scroll.find(mutations[0].target) as Blot;\n      const formats = bubbleFormats(textBlot);\n      const index = textBlot.offset(this.scroll);\n      // @ts-expect-error Fix me later\n      const oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\n      const oldText = new Delta().insert(oldValue);\n      // @ts-expect-error\n      const newText = new Delta().insert(textBlot.value());\n      const relativeSelectionInfo = selectionInfo && {\n        oldRange: shiftRange(selectionInfo.oldRange, -index),\n        newRange: shiftRange(selectionInfo.newRange, -index),\n      };\n      const diffDelta = new Delta()\n        .retain(index)\n        .concat(oldText.diff(newText, relativeSelectionInfo));\n      change = diffDelta.reduce((delta, op) => {\n        if (op.insert) {\n          return delta.insert(op.insert, formats);\n        }\n        return delta.push(op);\n      }, new Delta());\n      this.delta = oldDelta.compose(change);\n    } else {\n      this.delta = this.getDelta();\n      if (!change || !isEqual(oldDelta.compose(change), this.delta)) {\n        change = oldDelta.diff(this.delta, selectionInfo);\n      }\n    }\n    return change;\n  }\n}\n\ninterface ListItem {\n  child: Blot;\n  offset: number;\n  length: number;\n  indent: number;\n  type: string;\n}\nfunction convertListHTML(\n  items: ListItem[],\n  lastIndent: number,\n  types: string[],\n): string {\n  if (items.length === 0) {\n    const [endTag] = getListType(types.pop());\n    if (lastIndent <= 0) {\n      return `</li></${endTag}>`;\n    }\n    return `</li></${endTag}>${convertListHTML([], lastIndent - 1, types)}`;\n  }\n  const [{ child, offset, length, indent, type }, ...rest] = items;\n  const [tag, attribute] = getListType(type);\n  if (indent > lastIndent) {\n    types.push(type);\n    if (indent === lastIndent + 1) {\n      return `<${tag}><li${attribute}>${convertHTML(\n        child,\n        offset,\n        length,\n      )}${convertListHTML(rest, indent, types)}`;\n    }\n    return `<${tag}><li>${convertListHTML(items, lastIndent + 1, types)}`;\n  }\n  const previousType = types[types.length - 1];\n  if (indent === lastIndent && type === previousType) {\n    return `</li><li${attribute}>${convertHTML(\n      child,\n      offset,\n      length,\n    )}${convertListHTML(rest, indent, types)}`;\n  }\n  const [endTag] = getListType(types.pop());\n  return `</li></${endTag}>${convertListHTML(items, lastIndent - 1, types)}`;\n}\n\nfunction convertHTML(\n  blot: Blot,\n  index: number,\n  length: number,\n  isRoot = false,\n): string {\n  if ('html' in blot && typeof blot.html === 'function') {\n    return blot.html(index, length);\n  }\n  if (blot instanceof TextBlot) {\n    const escapedText = escapeText(blot.value().slice(index, index + length));\n    return escapedText.replaceAll(' ', '&nbsp;');\n  }\n  if (blot instanceof ParentBlot) {\n    // TODO fix API\n    if (blot.statics.blotName === 'list-container') {\n      const items: any[] = [];\n      blot.children.forEachAt(index, length, (child, offset, childLength) => {\n        const formats =\n          'formats' in child && typeof child.formats === 'function'\n            ? child.formats()\n            : {};\n        items.push({\n          child,\n          offset,\n          length: childLength,\n          indent: formats.indent || 0,\n          type: formats.list,\n        });\n      });\n      return convertListHTML(items, -1, []);\n    }\n    const parts: string[] = [];\n    blot.children.forEachAt(index, length, (child, offset, childLength) => {\n      parts.push(convertHTML(child, offset, childLength));\n    });\n    if (isRoot || blot.statics.blotName === 'list') {\n      return parts.join('');\n    }\n    const { outerHTML, innerHTML } = blot.domNode as Element;\n    const [start, end] = outerHTML.split(`>${innerHTML}<`);\n    // TODO cleanup\n    if (start === '<table') {\n      return `<table style=\"border: 1px solid #000;\">${parts.join('')}<${end}`;\n    }\n    return `${start}>${parts.join('')}<${end}`;\n  }\n  return blot.domNode instanceof Element ? blot.domNode.outerHTML : '';\n}\n\nfunction combineFormats(\n  formats: Record<string, unknown>,\n  combined: Record<string, unknown>,\n): Record<string, unknown> {\n  return Object.keys(combined).reduce(\n    (merged, name) => {\n      if (formats[name] == null) return merged;\n      const combinedValue = combined[name];\n      if (combinedValue === formats[name]) {\n        merged[name] = combinedValue;\n      } else if (Array.isArray(combinedValue)) {\n        if (combinedValue.indexOf(formats[name]) < 0) {\n          merged[name] = combinedValue.concat([formats[name]]);\n        } else {\n          // If style already exists, don't add to an array, but don't lose other styles\n          merged[name] = combinedValue;\n        }\n      } else {\n        merged[name] = [combinedValue, formats[name]];\n      }\n      return merged;\n    },\n    {} as Record<string, unknown>,\n  );\n}\n\nfunction getListType(type: string | undefined) {\n  const tag = type === 'ordered' ? 'ol' : 'ul';\n  switch (type) {\n    case 'checked':\n      return [tag, ' data-list=\"checked\"'];\n    case 'unchecked':\n      return [tag, ' data-list=\"unchecked\"'];\n    default:\n      return [tag, ''];\n  }\n}\n\nfunction normalizeDelta(delta: Delta) {\n  return delta.reduce((normalizedDelta, op) => {\n    if (typeof op.insert === 'string') {\n      const text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return normalizedDelta.insert(text, op.attributes);\n    }\n    return normalizedDelta.push(op);\n  }, new Delta());\n}\n\nfunction shiftRange({ index, length }: Range, amount: number) {\n  return new Range(index + amount, length);\n}\n\nfunction splitOpLines(ops: Op[]) {\n  const split: Op[] = [];\n  ops.forEach((op) => {\n    if (typeof op.insert === 'string') {\n      const lines = op.insert.split('\\n');\n      lines.forEach((line, index) => {\n        if (index) split.push({ insert: '\\n', attributes: op.attributes });\n        if (line) split.push({ insert: line, attributes: op.attributes });\n      });\n    } else {\n      split.push(op);\n    }\n  });\n\n  return split;\n}\n\nexport default Editor;\n","import type Quill from './quill.js';\n\nabstract class Module<T extends {} = {}> {\n  static DEFAULTS = {};\n\n  constructor(\n    public quill: Quill,\n    protected options: Partial<T> = {},\n  ) {}\n}\n\nexport default Module;\n","import type { ScrollBlot } from 'parchment';\nimport { EmbedBlot } from 'parchment';\nimport TextBlot from './text.js';\n\nconst GUARD_TEXT = '\\uFEFF';\n\nexport interface EmbedContextRange {\n  startNode: Node | Text;\n  startOffset: number;\n  endNode?: Node | Text;\n  endOffset?: number;\n}\n\nclass Embed extends EmbedBlot {\n  contentNode: HTMLSpanElement;\n  leftGuard: Text;\n  rightGuard: Text;\n\n  constructor(scroll: ScrollBlot, node: Node) {\n    super(scroll, node);\n    this.contentNode = document.createElement('span');\n    this.contentNode.setAttribute('contenteditable', 'false');\n    Array.from(this.domNode.childNodes).forEach((childNode) => {\n      this.contentNode.appendChild(childNode);\n    });\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\n    this.domNode.appendChild(this.leftGuard);\n    this.domNode.appendChild(this.contentNode);\n    this.domNode.appendChild(this.rightGuard);\n  }\n\n  index(node: Node, offset: number) {\n    if (node === this.leftGuard) return 0;\n    if (node === this.rightGuard) return 1;\n    return super.index(node, offset);\n  }\n\n  restore(node: Text): EmbedContextRange | null {\n    let range: EmbedContextRange | null = null;\n    let textNode: Text;\n    const text = node.data.split(GUARD_TEXT).join('');\n    if (node === this.leftGuard) {\n      if (this.prev instanceof TextBlot) {\n        const prevLength = this.prev.length();\n        this.prev.insertAt(prevLength, text);\n        range = {\n          startNode: this.prev.domNode,\n          startOffset: prevLength + text.length,\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this);\n        range = {\n          startNode: textNode,\n          startOffset: text.length,\n        };\n      }\n    } else if (node === this.rightGuard) {\n      if (this.next instanceof TextBlot) {\n        this.next.insertAt(0, text);\n        range = {\n          startNode: this.next.domNode,\n          startOffset: text.length,\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this.next);\n        range = {\n          startNode: textNode,\n          startOffset: text.length,\n        };\n      }\n    }\n    node.data = GUARD_TEXT;\n    return range;\n  }\n\n  update(mutations: MutationRecord[], context: Record<string, unknown>) {\n    mutations.forEach((mutation) => {\n      if (\n        mutation.type === 'characterData' &&\n        (mutation.target === this.leftGuard ||\n          mutation.target === this.rightGuard)\n      ) {\n        const range = this.restore(mutation.target as Text);\n        if (range) context.range = range;\n      }\n    });\n  }\n}\n\nexport default Embed;\n","import Embed from '../blots/embed.js';\nimport type Scroll from '../blots/scroll.js';\nimport Emitter from './emitter.js';\n\nclass Composition {\n  isComposing = false;\n\n  constructor(\n    private scroll: Scroll,\n    private emitter: Emitter,\n  ) {\n    this.setupListeners();\n  }\n\n  private setupListeners() {\n    this.scroll.domNode.addEventListener('compositionstart', (event) => {\n      if (!this.isComposing) {\n        this.handleCompositionStart(event);\n      }\n    });\n\n    this.scroll.domNode.addEventListener('compositionend', (event) => {\n      if (this.isComposing) {\n        // Webkit makes DOM changes after compositionend, so we use microtask to\n        // ensure the order.\n        // https://bugs.webkit.org/show_bug.cgi?id=31902\n        queueMicrotask(() => {\n          this.handleCompositionEnd(event);\n        });\n      }\n    });\n  }\n\n  private handleCompositionStart(event: CompositionEvent) {\n    const blot =\n      event.target instanceof Node\n        ? this.scroll.find(event.target, true)\n        : null;\n\n    if (blot && !(blot instanceof Embed)) {\n      this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_START, event);\n      this.scroll.batchStart();\n      this.emitter.emit(Emitter.events.COMPOSITION_START, event);\n      this.isComposing = true;\n    }\n  }\n\n  private handleCompositionEnd(event: CompositionEvent) {\n    this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_END, event);\n    this.scroll.batchEnd();\n    this.emitter.emit(Emitter.events.COMPOSITION_END, event);\n    this.isComposing = false;\n  }\n}\n\nexport default Composition;\n","import type Quill from '../core.js';\nimport type Clipboard from '../modules/clipboard.js';\nimport type History from '../modules/history.js';\nimport type Keyboard from '../modules/keyboard.js';\nimport type { ToolbarProps } from '../modules/toolbar.js';\nimport type Uploader from '../modules/uploader.js';\n\nexport interface ThemeOptions {\n  modules: Record<string, unknown> & {\n    toolbar?: null | ToolbarProps;\n  };\n}\n\nclass Theme {\n  static DEFAULTS: ThemeOptions = {\n    modules: {},\n  };\n\n  static themes = {\n    default: Theme,\n  };\n\n  modules: ThemeOptions['modules'] = {};\n\n  constructor(\n    protected quill: Quill,\n    protected options: ThemeOptions,\n  ) {}\n\n  init() {\n    Object.keys(this.options.modules).forEach((name) => {\n      if (this.modules[name] == null) {\n        this.addModule(name);\n      }\n    });\n  }\n\n  addModule(name: 'clipboard'): Clipboard;\n  addModule(name: 'keyboard'): Keyboard;\n  addModule(name: 'uploader'): Uploader;\n  addModule(name: 'history'): History;\n  addModule(name: string): unknown;\n  addModule(name: string) {\n    // @ts-expect-error\n    const ModuleClass = this.quill.constructor.import(`modules/${name}`);\n    this.modules[name] = new ModuleClass(\n      this.quill,\n      this.options.modules[name] || {},\n    );\n    return this.modules[name];\n  }\n}\n\nexport interface ThemeConstructor {\n  new (quill: Quill, options: unknown): Theme;\n  DEFAULTS: ThemeOptions;\n}\n\nexport default Theme;\n","export type Rect = {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n};\n\nconst getParentElement = (element: Node): Element | null =>\n  element.parentElement || (element.getRootNode() as ShadowRoot).host || null;\n\nconst getElementRect = (element: Element): Rect => {\n  const rect = element.getBoundingClientRect();\n  const scaleX =\n    ('offsetWidth' in element &&\n      Math.abs(rect.width) / (element as HTMLElement).offsetWidth) ||\n    1;\n  const scaleY =\n    ('offsetHeight' in element &&\n      Math.abs(rect.height) / (element as HTMLElement).offsetHeight) ||\n    1;\n  return {\n    top: rect.top,\n    right: rect.left + element.clientWidth * scaleX,\n    bottom: rect.top + element.clientHeight * scaleY,\n    left: rect.left,\n  };\n};\n\nconst paddingValueToInt = (value: string) => {\n  const number = parseInt(value, 10);\n  return Number.isNaN(number) ? 0 : number;\n};\n\n// Follow the steps described in https://www.w3.org/TR/cssom-view-1/#element-scrolling-members,\n// assuming that the scroll option is set to 'nearest'.\nconst getScrollDistance = (\n  targetStart: number,\n  targetEnd: number,\n  scrollStart: number,\n  scrollEnd: number,\n  scrollPaddingStart: number,\n  scrollPaddingEnd: number,\n) => {\n  if (targetStart < scrollStart && targetEnd > scrollEnd) {\n    return 0;\n  }\n\n  if (targetStart < scrollStart) {\n    return -(scrollStart - targetStart + scrollPaddingStart);\n  }\n\n  if (targetEnd > scrollEnd) {\n    return targetEnd - targetStart > scrollEnd - scrollStart\n      ? targetStart + scrollPaddingStart - scrollStart\n      : targetEnd - scrollEnd + scrollPaddingEnd;\n  }\n  return 0;\n};\n\nconst scrollRectIntoView = (root: HTMLElement, targetRect: Rect) => {\n  const document = root.ownerDocument;\n\n  let rect = targetRect;\n\n  let current: Element | null = root;\n  while (current) {\n    const isDocumentBody: boolean = current === document.body;\n    const bounding = isDocumentBody\n      ? {\n          top: 0,\n          right:\n            window.visualViewport?.width ??\n            document.documentElement.clientWidth,\n          bottom:\n            window.visualViewport?.height ??\n            document.documentElement.clientHeight,\n          left: 0,\n        }\n      : getElementRect(current);\n\n    const style = getComputedStyle(current);\n    const scrollDistanceX = getScrollDistance(\n      rect.left,\n      rect.right,\n      bounding.left,\n      bounding.right,\n      paddingValueToInt(style.scrollPaddingLeft),\n      paddingValueToInt(style.scrollPaddingRight),\n    );\n    const scrollDistanceY = getScrollDistance(\n      rect.top,\n      rect.bottom,\n      bounding.top,\n      bounding.bottom,\n      paddingValueToInt(style.scrollPaddingTop),\n      paddingValueToInt(style.scrollPaddingBottom),\n    );\n    if (scrollDistanceX || scrollDistanceY) {\n      if (isDocumentBody) {\n        document.defaultView?.scrollBy(scrollDistanceX, scrollDistanceY);\n      } else {\n        const { scrollLeft, scrollTop } = current;\n        if (scrollDistanceY) {\n          current.scrollTop += scrollDistanceY;\n        }\n        if (scrollDistanceX) {\n          current.scrollLeft += scrollDistanceX;\n        }\n        const scrolledLeft = current.scrollLeft - scrollLeft;\n        const scrolledTop = current.scrollTop - scrollTop;\n        rect = {\n          left: rect.left - scrolledLeft,\n          top: rect.top - scrolledTop,\n          right: rect.right - scrolledLeft,\n          bottom: rect.bottom - scrolledTop,\n        };\n      }\n    }\n\n    current =\n      isDocumentBody || style.position === 'fixed'\n        ? null\n        : getParentElement(current);\n  }\n};\n\nexport default scrollRectIntoView;\n","import { Registry } from 'parchment';\n\nconst MAX_REGISTER_ITERATIONS = 100;\nconst CORE_FORMATS = ['block', 'break', 'cursor', 'inline', 'scroll', 'text'];\n\nconst createRegistryWithFormats = (\n  formats: string[],\n  sourceRegistry: Registry,\n  debug: { error: (errorMessage: string) => void },\n) => {\n  const registry = new Registry();\n  CORE_FORMATS.forEach((name) => {\n    const coreBlot = sourceRegistry.query(name);\n    if (coreBlot) registry.register(coreBlot);\n  });\n\n  formats.forEach((name) => {\n    let format = sourceRegistry.query(name);\n    if (!format) {\n      debug.error(\n        `Cannot register \"${name}\" specified in \"formats\" config. Are you sure it was registered?`,\n      );\n    }\n    let iterations = 0;\n    while (format) {\n      registry.register(format);\n      format = 'blotName' in format ? format.requiredContainer ?? null : null;\n\n      iterations += 1;\n      if (iterations > MAX_REGISTER_ITERATIONS) {\n        debug.error(\n          `Cycle detected in registering blot requiredContainer: \"${name}\"`,\n        );\n        break;\n      }\n    }\n  });\n\n  return registry;\n};\n\nexport default createRegistryWithFormats;\n","import { merge } from 'lodash-es';\nimport * as Parchment from 'parchment';\nimport type { Op } from 'quill-delta';\nimport Delta from 'quill-delta';\nimport type { BlockEmbed } from '../blots/block.js';\nimport type Block from '../blots/block.js';\nimport type Scroll from '../blots/scroll.js';\nimport type Clipboard from '../modules/clipboard.js';\nimport type History from '../modules/history.js';\nimport type Keyboard from '../modules/keyboard.js';\nimport type Uploader from '../modules/uploader.js';\nimport Editor from './editor.js';\nimport Emitter from './emitter.js';\nimport type { EmitterSource } from './emitter.js';\nimport instances from './instances.js';\nimport logger from './logger.js';\nimport type { DebugLevel } from './logger.js';\nimport Module from './module.js';\nimport Selection, { Range } from './selection.js';\nimport type { Bounds } from './selection.js';\nimport Composition from './composition.js';\nimport Theme from './theme.js';\nimport type { ThemeConstructor } from './theme.js';\nimport scrollRectIntoView from './utils/scrollRectIntoView.js';\nimport type { Rect } from './utils/scrollRectIntoView.js';\nimport createRegistryWithFormats from './utils/createRegistryWithFormats.js';\n\nconst debug = logger('quill');\n\nconst globalRegistry = new Parchment.Registry();\nParchment.ParentBlot.uiClass = 'ql-ui';\n\n/**\n * Options for initializing a Quill instance\n */\nexport interface QuillOptions {\n  theme?: string;\n  debug?: DebugLevel | boolean;\n  registry?: Parchment.Registry;\n  /**\n   * Whether to disable the editing\n   * @default false\n   */\n  readOnly?: boolean;\n\n  /**\n   * Placeholder text to display when the editor is empty\n   * @default \"\"\n   */\n  placeholder?: string;\n  bounds?: HTMLElement | string | null;\n  modules?: Record<string, unknown>;\n\n  /**\n   * A list of formats that are recognized and can exist within the editor contents.\n   * `null` means all formats are allowed.\n   * @default null\n   */\n  formats?: string[] | null;\n}\n\n/**\n * Similar to QuillOptions, but with all properties expanded to their default values,\n * and all selectors resolved to HTMLElements.\n */\nexport interface ExpandedQuillOptions\n  extends Omit<QuillOptions, 'theme' | 'formats'> {\n  theme: ThemeConstructor;\n  registry: Parchment.Registry;\n  container: HTMLElement;\n  modules: Record<string, unknown>;\n  bounds?: HTMLElement | null;\n  readOnly: boolean;\n}\n\nclass Quill {\n  static DEFAULTS = {\n    bounds: null,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true,\n      uploader: true,\n    },\n    placeholder: '',\n    readOnly: false,\n    registry: globalRegistry,\n    theme: 'default',\n  } satisfies Partial<QuillOptions>;\n  static events = Emitter.events;\n  static sources = Emitter.sources;\n  static version = typeof QUILL_VERSION === 'undefined' ? 'dev' : QUILL_VERSION;\n\n  static imports: Record<string, unknown> = {\n    delta: Delta,\n    parchment: Parchment,\n    'core/module': Module,\n    'core/theme': Theme,\n  };\n\n  static debug(limit: DebugLevel | boolean) {\n    if (limit === true) {\n      limit = 'log';\n    }\n    logger.level(limit);\n  }\n\n  static find(node: Node, bubble = false) {\n    return instances.get(node) || globalRegistry.find(node, bubble);\n  }\n\n  static import(name: 'core/module'): typeof Module;\n  static import(name: `themes/${string}`): typeof Theme;\n  static import(name: 'parchment'): typeof Parchment;\n  static import(name: 'delta'): typeof Delta;\n  static import(name: string): unknown;\n  static import(name: string) {\n    if (this.imports[name] == null) {\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\n    }\n    return this.imports[name];\n  }\n\n  static register(\n    targets: Record<\n      string,\n      | Parchment.RegistryDefinition\n      | Record<string, unknown> // any objects\n      | Theme\n      | Module\n      | Function // ES5 constructors\n    >,\n    overwrite?: boolean,\n  ): void;\n  static register(\n    target: Parchment.RegistryDefinition,\n    overwrite?: boolean,\n  ): void;\n  static register(path: string, target: any, overwrite?: boolean): void;\n  static register(...args: any[]): void {\n    if (typeof args[0] !== 'string') {\n      const target = args[0];\n      const overwrite = !!args[1];\n\n      const name = 'attrName' in target ? target.attrName : target.blotName;\n      if (typeof name === 'string') {\n        // Shortcut for formats:\n        // register(Blot | Attributor, overwrite)\n        this.register(`formats/${name}`, target, overwrite);\n      } else {\n        Object.keys(target).forEach((key) => {\n          this.register(key, target[key], overwrite);\n        });\n      }\n    } else {\n      const path = args[0];\n      const target = args[1];\n      const overwrite = !!args[2];\n\n      if (this.imports[path] != null && !overwrite) {\n        debug.warn(`Overwriting ${path} with`, target);\n      }\n      this.imports[path] = target;\n      if (\n        (path.startsWith('blots/') || path.startsWith('formats/')) &&\n        target &&\n        typeof target !== 'boolean' &&\n        target.blotName !== 'abstract'\n      ) {\n        globalRegistry.register(target);\n      }\n      if (typeof target.register === 'function') {\n        target.register(globalRegistry);\n      }\n    }\n  }\n\n  container: HTMLElement;\n  root: HTMLDivElement;\n  scroll: Scroll;\n  emitter: Emitter;\n  protected allowReadOnlyEdits: boolean;\n  editor: Editor;\n  composition: Composition;\n  selection: Selection;\n\n  theme: Theme;\n  keyboard: Keyboard;\n  clipboard: Clipboard;\n  history: History;\n  uploader: Uploader;\n\n  options: ExpandedQuillOptions;\n\n  constructor(container: HTMLElement | string, options: QuillOptions = {}) {\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      debug.error('Invalid Quill container', container);\n      return;\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    const html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    instances.set(this.container, this);\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.emitter = new Emitter();\n    const scrollBlotName = Parchment.ScrollBlot.blotName;\n    const ScrollBlot = this.options.registry.query(scrollBlotName);\n    if (!ScrollBlot || !('blotName' in ScrollBlot)) {\n      throw new Error(\n        `Cannot initialize Quill without \"${scrollBlotName}\" blot`,\n      );\n    }\n    this.scroll = new ScrollBlot(this.options.registry, this.root, {\n      emitter: this.emitter,\n    }) as Scroll;\n    this.editor = new Editor(this.scroll);\n    this.selection = new Selection(this.scroll, this.emitter);\n    this.composition = new Composition(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options); // eslint-disable-line new-cap\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.uploader = this.theme.addModule('uploader');\n    this.theme.addModule('input');\n    this.theme.addModule('uiNode');\n    this.theme.init();\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, (type) => {\n      if (type === Emitter.events.TEXT_CHANGE) {\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo =\n        oldRange && newRange ? { oldRange, newRange } : undefined;\n      modify.call(\n        this,\n        () => this.editor.update(null, mutations, selectionInfo),\n        source,\n      );\n    });\n    this.emitter.on(Emitter.events.SCROLL_EMBED_UPDATE, (blot, delta) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo =\n        oldRange && newRange ? { oldRange, newRange } : undefined;\n      modify.call(\n        this,\n        () => {\n          const change = new Delta()\n            .retain(blot.offset(this))\n            .retain({ [blot.statics.blotName]: delta });\n          return this.editor.update(change, [], selectionInfo);\n        },\n        Quill.sources.USER,\n      );\n    });\n    if (html) {\n      const contents = this.clipboard.convert({\n        html: `${html}<p><br></p>`,\n        text: '\\n',\n      });\n      this.setContents(contents);\n    }\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n    this.allowReadOnlyEdits = false;\n  }\n\n  addContainer(container: string, refNode?: Node | null): HTMLDivElement;\n  addContainer(container: HTMLElement, refNode?: Node | null): HTMLElement;\n  addContainer(\n    container: string | HTMLElement,\n    refNode: Node | null = null,\n  ): HTMLDivElement | HTMLElement {\n    if (typeof container === 'string') {\n      const className = container;\n      container = document.createElement('div');\n      container.classList.add(className);\n    }\n    this.container.insertBefore(container, refNode);\n    return container;\n  }\n\n  blur() {\n    this.selection.setRange(null);\n  }\n\n  deleteText(range: Range, source?: EmitterSource): Delta;\n  deleteText(index: number, length: number, source?: EmitterSource): Delta;\n  deleteText(\n    index: number | Range,\n    length?: number | EmitterSource,\n    source?: EmitterSource,\n  ): Delta {\n    // @ts-expect-error\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.deleteText(index, length);\n      },\n      source,\n      index,\n      -1 * length,\n    );\n  }\n\n  disable() {\n    this.enable(false);\n  }\n\n  editReadOnly<T>(modifier: () => T): T {\n    this.allowReadOnlyEdits = true;\n    const value = modifier();\n    this.allowReadOnlyEdits = false;\n    return value;\n  }\n\n  enable(enabled = true) {\n    this.scroll.enable(enabled);\n    this.container.classList.toggle('ql-disabled', !enabled);\n  }\n\n  focus(options: { preventScroll?: boolean } = {}) {\n    this.selection.focus();\n    if (!options.preventScroll) {\n      this.scrollSelectionIntoView();\n    }\n  }\n\n  format(\n    name: string,\n    value: unknown,\n    source: EmitterSource = Emitter.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        const range = this.getSelection(true);\n        let change = new Delta();\n        if (range == null) return change;\n        if (this.scroll.query(name, Parchment.Scope.BLOCK)) {\n          change = this.editor.formatLine(range.index, range.length, {\n            [name]: value,\n          });\n        } else if (range.length === 0) {\n          this.selection.format(name, value);\n          return change;\n        } else {\n          change = this.editor.formatText(range.index, range.length, {\n            [name]: value,\n          });\n        }\n        this.setSelection(range, Emitter.sources.SILENT);\n        return change;\n      },\n      source,\n    );\n  }\n\n  formatLine(\n    index: number,\n    length: number,\n    formats: Record<string, unknown>,\n    source?: EmitterSource,\n  ): Delta;\n  formatLine(\n    index: number,\n    length: number,\n    name: string,\n    value?: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  formatLine(\n    index: number,\n    length: number,\n    name: string | Record<string, unknown>,\n    value?: unknown | EmitterSource,\n    source?: EmitterSource,\n  ): Delta {\n    let formats: Record<string, unknown>;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n      index,\n      length,\n      // @ts-expect-error\n      name,\n      value,\n      source,\n    );\n    return modify.call(\n      this,\n      () => {\n        return this.editor.formatLine(index, length, formats);\n      },\n      source,\n      index,\n      0,\n    );\n  }\n\n  formatText(\n    range: Range,\n    name: string,\n    value: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  formatText(\n    index: number,\n    length: number,\n    name: string,\n    value: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  formatText(\n    index: number,\n    length: number,\n    formats: Record<string, unknown>,\n    source?: EmitterSource,\n  ): Delta;\n  formatText(\n    index: number | Range,\n    length: number | string,\n    name: string | unknown,\n    value?: unknown | EmitterSource,\n    source?: EmitterSource,\n  ): Delta {\n    let formats: Record<string, unknown>;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n      // @ts-expect-error\n      index,\n      length,\n      name,\n      value,\n      source,\n    );\n    return modify.call(\n      this,\n      () => {\n        return this.editor.formatText(index, length, formats);\n      },\n      source,\n      index,\n      0,\n    );\n  }\n\n  getBounds(index: number | Range, length = 0): Bounds | null {\n    let bounds: Bounds | null = null;\n    if (typeof index === 'number') {\n      bounds = this.selection.getBounds(index, length);\n    } else {\n      bounds = this.selection.getBounds(index.index, index.length);\n    }\n    if (!bounds) return null;\n    const containerBounds = this.container.getBoundingClientRect();\n    return {\n      bottom: bounds.bottom - containerBounds.top,\n      height: bounds.height,\n      left: bounds.left - containerBounds.left,\n      right: bounds.right - containerBounds.left,\n      top: bounds.top - containerBounds.top,\n      width: bounds.width,\n    };\n  }\n\n  getContents(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getContents(index, length);\n  }\n\n  getFormat(index?: number, length?: number): { [format: string]: unknown };\n  getFormat(range?: Range): {\n    [format: string]: unknown;\n  };\n  getFormat(\n    index: Range | number = this.getSelection(true),\n    length = 0,\n  ): { [format: string]: unknown } {\n    if (typeof index === 'number') {\n      return this.editor.getFormat(index, length);\n    }\n    return this.editor.getFormat(index.index, index.length);\n  }\n\n  getIndex(blot: Parchment.Blot) {\n    return blot.offset(this.scroll);\n  }\n\n  getLength() {\n    return this.scroll.length();\n  }\n\n  getLeaf(index: number) {\n    return this.scroll.leaf(index);\n  }\n\n  getLine(index: number) {\n    return this.scroll.line(index);\n  }\n\n  getLines(range: Range): (Block | BlockEmbed)[];\n  getLines(index?: number, length?: number): (Block | BlockEmbed)[];\n  getLines(\n    index: Range | number = 0,\n    length = Number.MAX_VALUE,\n  ): (Block | BlockEmbed)[] {\n    if (typeof index !== 'number') {\n      return this.scroll.lines(index.index, index.length);\n    }\n    return this.scroll.lines(index, length);\n  }\n\n  getModule(name: string) {\n    return this.theme.modules[name];\n  }\n\n  getSelection(focus: true): Range;\n  getSelection(focus?: boolean): Range | null;\n  getSelection(focus = false): Range | null {\n    if (focus) this.focus();\n    this.update(); // Make sure we access getRange with editor in consistent state\n    return this.selection.getRange()[0];\n  }\n\n  getSemanticHTML(range: Range): string;\n  getSemanticHTML(index?: number, length?: number): string;\n  getSemanticHTML(index: Range | number = 0, length?: number) {\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getHTML(index, length);\n  }\n\n  getText(range?: Range): string;\n  getText(index?: number, length?: number): string;\n  getText(index: Range | number = 0, length?: number): string {\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getText(index, length);\n  }\n\n  hasFocus() {\n    return this.selection.hasFocus();\n  }\n\n  insertEmbed(\n    index: number,\n    embed: string,\n    value: unknown,\n    source: EmitterSource = Quill.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        return this.editor.insertEmbed(index, embed, value);\n      },\n      source,\n      index,\n    );\n  }\n\n  insertText(index: number, text: string, source?: EmitterSource): Delta;\n  insertText(\n    index: number,\n    text: string,\n    formats: Record<string, unknown>,\n    source?: EmitterSource,\n  ): Delta;\n  insertText(\n    index: number,\n    text: string,\n    name: string,\n    value: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  insertText(\n    index: number,\n    text: string,\n    name?: string | Record<string, unknown> | EmitterSource,\n    value?: unknown,\n    source?: EmitterSource,\n  ): Delta {\n    let formats: Record<string, unknown>;\n    // eslint-disable-next-line prefer-const\n    // @ts-expect-error\n    [index, , formats, source] = overload(index, 0, name, value, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.insertText(index, text, formats);\n      },\n      source,\n      index,\n      text.length,\n    );\n  }\n\n  isEnabled() {\n    return this.scroll.isEnabled();\n  }\n\n  off(...args: Parameters<(typeof Emitter)['prototype']['off']>) {\n    return this.emitter.off(...args);\n  }\n\n  on(\n    event: (typeof Emitter)['events']['TEXT_CHANGE'],\n    handler: (delta: Delta, oldContent: Delta, source: EmitterSource) => void,\n  ): Emitter;\n  on(\n    event: (typeof Emitter)['events']['SELECTION_CHANGE'],\n    handler: (range: Range, oldRange: Range, source: EmitterSource) => void,\n  ): Emitter;\n  on(\n    event: (typeof Emitter)['events']['EDITOR_CHANGE'],\n    handler: (\n      ...args:\n        | [\n            (typeof Emitter)['events']['TEXT_CHANGE'],\n            Delta,\n            Delta,\n            EmitterSource,\n          ]\n        | [\n            (typeof Emitter)['events']['SELECTION_CHANGE'],\n            Range,\n            Range,\n            EmitterSource,\n          ]\n    ) => void,\n  ): Emitter;\n  on(event: string, ...args: unknown[]): Emitter;\n  on(...args: Parameters<(typeof Emitter)['prototype']['on']>): Emitter {\n    return this.emitter.on(...args);\n  }\n\n  once(...args: Parameters<(typeof Emitter)['prototype']['once']>) {\n    return this.emitter.once(...args);\n  }\n\n  removeFormat(index: number, length: number, source?: EmitterSource): Delta {\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.removeFormat(index, length);\n      },\n      source,\n      index,\n    );\n  }\n\n  scrollRectIntoView(rect: Rect) {\n    scrollRectIntoView(this.root, rect);\n  }\n\n  /**\n   * @deprecated Use Quill#scrollSelectionIntoView() instead.\n   */\n  scrollIntoView() {\n    console.warn(\n      'Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead.',\n    );\n    this.scrollSelectionIntoView();\n  }\n\n  /**\n   * Scroll the current selection into the visible area.\n   * If the selection is already visible, no scrolling will occur.\n   */\n  scrollSelectionIntoView() {\n    const range = this.selection.lastRange;\n    const bounds = range && this.selection.getBounds(range.index, range.length);\n    if (bounds) {\n      this.scrollRectIntoView(bounds);\n    }\n  }\n\n  setContents(\n    delta: Delta | Op[],\n    source: EmitterSource = Emitter.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        delta = new Delta(delta);\n        const length = this.getLength();\n        // Quill will set empty editor to \\n\n        const delete1 = this.editor.deleteText(0, length);\n        const applied = this.editor.insertContents(0, delta);\n        // Remove extra \\n from empty editor initialization\n        const delete2 = this.editor.deleteText(this.getLength() - 1, 1);\n        return delete1.compose(applied).compose(delete2);\n      },\n      source,\n    );\n  }\n  setSelection(range: Range | null, source?: EmitterSource): void;\n  setSelection(index: number, source?: EmitterSource): void;\n  setSelection(index: number, length?: number, source?: EmitterSource): void;\n  setSelection(index: number, source?: EmitterSource): void;\n  setSelection(\n    index: Range | null | number,\n    length?: EmitterSource | number,\n    source?: EmitterSource,\n  ): void {\n    if (index == null) {\n      // @ts-expect-error https://github.com/microsoft/TypeScript/issues/22609\n      this.selection.setRange(null, length || Quill.sources.API);\n    } else {\n      // @ts-expect-error\n      [index, length, , source] = overload(index, length, source);\n      this.selection.setRange(new Range(Math.max(0, index), length), source);\n      if (source !== Emitter.sources.SILENT) {\n        this.scrollSelectionIntoView();\n      }\n    }\n  }\n\n  setText(text: string, source: EmitterSource = Emitter.sources.API) {\n    const delta = new Delta().insert(text);\n    return this.setContents(delta, source);\n  }\n\n  update(source: EmitterSource = Emitter.sources.USER) {\n    const change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\n    this.selection.update(source);\n    // TODO this is usually undefined\n    return change;\n  }\n\n  updateContents(\n    delta: Delta | Op[],\n    source: EmitterSource = Emitter.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        delta = new Delta(delta);\n        return this.editor.applyDelta(delta);\n      },\n      source,\n      true,\n    );\n  }\n}\n\nfunction resolveSelector(selector: string | HTMLElement | null | undefined) {\n  return typeof selector === 'string'\n    ? document.querySelector<HTMLElement>(selector)\n    : selector;\n}\n\nfunction expandModuleConfig(config: Record<string, unknown> | undefined) {\n  return Object.entries(config ?? {}).reduce(\n    (expanded, [key, value]) => ({\n      ...expanded,\n      [key]: value === true ? {} : value,\n    }),\n    {} as Record<string, unknown>,\n  );\n}\n\nfunction omitUndefinedValuesFromOptions(obj: QuillOptions) {\n  return Object.fromEntries(\n    Object.entries(obj).filter((entry) => entry[1] !== undefined),\n  );\n}\n\nfunction expandConfig(\n  containerOrSelector: HTMLElement | string,\n  options: QuillOptions,\n): ExpandedQuillOptions {\n  const container = resolveSelector(containerOrSelector);\n  if (!container) {\n    throw new Error('Invalid Quill container');\n  }\n\n  const shouldUseDefaultTheme =\n    !options.theme || options.theme === Quill.DEFAULTS.theme;\n  const theme = shouldUseDefaultTheme\n    ? Theme\n    : Quill.import(`themes/${options.theme}`);\n  if (!theme) {\n    throw new Error(`Invalid theme ${options.theme}. Did you register it?`);\n  }\n\n  const { modules: quillModuleDefaults, ...quillDefaults } = Quill.DEFAULTS;\n  const { modules: themeModuleDefaults, ...themeDefaults } = theme.DEFAULTS;\n\n  let userModuleOptions = expandModuleConfig(options.modules);\n  // Special case toolbar shorthand\n  if (\n    userModuleOptions != null &&\n    userModuleOptions.toolbar &&\n    userModuleOptions.toolbar.constructor !== Object\n  ) {\n    userModuleOptions = {\n      ...userModuleOptions,\n      toolbar: { container: userModuleOptions.toolbar },\n    };\n  }\n\n  const modules: ExpandedQuillOptions['modules'] = merge(\n    {},\n    expandModuleConfig(quillModuleDefaults),\n    expandModuleConfig(themeModuleDefaults),\n    userModuleOptions,\n  );\n\n  const config = {\n    ...quillDefaults,\n    ...omitUndefinedValuesFromOptions(themeDefaults),\n    ...omitUndefinedValuesFromOptions(options),\n  };\n\n  let registry = options.registry;\n  if (registry) {\n    if (options.formats) {\n      debug.warn('Ignoring \"formats\" option because \"registry\" is specified');\n    }\n  } else {\n    registry = options.formats\n      ? createRegistryWithFormats(options.formats, config.registry, debug)\n      : config.registry;\n  }\n\n  return {\n    ...config,\n    registry,\n    container,\n    theme,\n    modules: Object.entries(modules).reduce(\n      (modulesWithDefaults, [name, value]) => {\n        if (!value) return modulesWithDefaults;\n\n        const moduleClass = Quill.import(`modules/${name}`);\n        if (moduleClass == null) {\n          debug.error(\n            `Cannot load ${name} module. Are you sure you registered it?`,\n          );\n          return modulesWithDefaults;\n        }\n        return {\n          ...modulesWithDefaults,\n          // @ts-expect-error\n          [name]: merge({}, moduleClass.DEFAULTS || {}, value),\n        };\n      },\n      {},\n    ),\n    bounds: resolveSelector(config.bounds),\n  };\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(\n  modifier: () => Delta,\n  source: EmitterSource,\n  index: number | boolean,\n  shift: number | null,\n) {\n  if (\n    !this.isEnabled() &&\n    source === Emitter.sources.USER &&\n    !this.allowReadOnlyEdits\n  ) {\n    return new Delta();\n  }\n  let range = index == null ? null : this.getSelection();\n  const oldDelta = this.editor.delta;\n  const change = modifier();\n  if (range != null) {\n    if (index === true) {\n      index = range.index; // eslint-disable-line prefer-destructuring\n    }\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      // @ts-expect-error index should always be number\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, Emitter.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    const args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n    if (source !== Emitter.sources.SILENT) {\n      this.emitter.emit(...args);\n    }\n  }\n  return change;\n}\n\ntype NormalizedIndexLength = [\n  number,\n  number,\n  Record<string, unknown>,\n  EmitterSource,\n];\nfunction overload(index: number, source?: EmitterSource): NormalizedIndexLength;\nfunction overload(\n  index: number,\n  length: number,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  index: number,\n  length: number,\n  format: string,\n  value: unknown,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  index: number,\n  length: number,\n  format: Record<string, unknown>,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(range: Range, source?: EmitterSource): NormalizedIndexLength;\nfunction overload(\n  range: Range,\n  format: string,\n  value: unknown,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  range: Range,\n  format: Record<string, unknown>,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  index: Range | number,\n  length?: number | string | Record<string, unknown> | EmitterSource,\n  name?: string | unknown | Record<string, unknown> | EmitterSource,\n  value?: unknown | EmitterSource,\n  source?: EmitterSource,\n): NormalizedIndexLength {\n  let formats: Record<string, unknown> = {};\n  // @ts-expect-error\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      // @ts-expect-error\n      source = value;\n      value = name;\n      name = length;\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    } else {\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    }\n  } else if (typeof length !== 'number') {\n    // @ts-expect-error\n    source = value;\n    value = name;\n    name = length;\n    length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if (typeof name === 'object') {\n    // @ts-expect-error Fix me later\n    formats = name;\n    // @ts-expect-error\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      // @ts-expect-error\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || Emitter.sources.API;\n  // @ts-expect-error\n  return [index, length, formats, source];\n}\n\nfunction shiftRange(range: Range, change: Delta, source?: EmitterSource): Range;\nfunction shiftRange(\n  range: Range,\n  index: number,\n  length?: number,\n  source?: EmitterSource,\n): Range;\nfunction shiftRange(\n  range: Range,\n  index: number | Delta,\n  lengthOrSource?: number | EmitterSource,\n  source?: EmitterSource,\n) {\n  const length = typeof lengthOrSource === 'number' ? lengthOrSource : 0;\n  if (range == null) return null;\n  let start;\n  let end;\n  // @ts-expect-error -- TODO: add a better type guard around `index`\n  if (index && typeof index.transformPosition === 'function') {\n    [start, end] = [range.index, range.index + range.length].map((pos) =>\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      index.transformPosition(pos, source !== Emitter.sources.USER),\n    );\n  } else {\n    [start, end] = [range.index, range.index + range.length].map((pos) => {\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      if (pos < index || (pos === index && source === Emitter.sources.USER))\n        return pos;\n      if (length >= 0) {\n        return pos + length;\n      }\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      return Math.max(index, pos + length);\n    });\n  }\n  return new Range(start, end - start);\n}\n\nexport type { Bounds, DebugLevel, EmitterSource };\nexport { Parchment, Range };\n\nexport { globalRegistry, expandConfig, overload, Quill as default };\n","import { ContainerBlot } from 'parchment';\n\nclass Container extends ContainerBlot {}\n\nexport default Container;\n","import { ContainerBlot, LeafBlot, Scope, ScrollBlot } from 'parchment';\nimport type { Blot, Parent, EmbedBlot, ParentBlot, Registry } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Emitter from '../core/emitter.js';\nimport type { EmitterSource } from '../core/emitter.js';\nimport Block, { BlockEmbed, bubbleFormats } from './block.js';\nimport Break from './break.js';\nimport Container from './container.js';\n\ntype RenderBlock =\n  | {\n      type: 'blockEmbed';\n      attributes: AttributeMap;\n      key: string;\n      value: unknown;\n    }\n  | { type: 'block'; attributes: AttributeMap; delta: Delta };\n\nfunction isLine(blot: unknown): blot is Block | BlockEmbed {\n  return blot instanceof Block || blot instanceof BlockEmbed;\n}\n\ninterface UpdatableEmbed {\n  updateContent(change: unknown): void;\n}\n\nfunction isUpdatable(blot: Blot): blot is Blot & UpdatableEmbed {\n  return typeof (blot as unknown as any).updateContent === 'function';\n}\n\nclass Scroll extends ScrollBlot {\n  static blotName = 'scroll';\n  static className = 'ql-editor';\n  static tagName = 'DIV';\n  static defaultChild = Block;\n  static allowedChildren = [Block, BlockEmbed, Container];\n\n  emitter: Emitter;\n  batch: false | MutationRecord[];\n\n  constructor(\n    registry: Registry,\n    domNode: HTMLDivElement,\n    { emitter }: { emitter: Emitter },\n  ) {\n    super(registry, domNode);\n    this.emitter = emitter;\n    this.batch = false;\n    this.optimize();\n    this.enable();\n    this.domNode.addEventListener('dragstart', (e) => this.handleDragStart(e));\n  }\n\n  batchStart() {\n    if (!Array.isArray(this.batch)) {\n      this.batch = [];\n    }\n  }\n\n  batchEnd() {\n    if (!this.batch) return;\n    const mutations = this.batch;\n    this.batch = false;\n    this.update(mutations);\n  }\n\n  emitMount(blot: Blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_MOUNT, blot);\n  }\n\n  emitUnmount(blot: Blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_UNMOUNT, blot);\n  }\n\n  emitEmbedUpdate(blot: Blot, change: unknown) {\n    this.emitter.emit(Emitter.events.SCROLL_EMBED_UPDATE, blot, change);\n  }\n\n  deleteAt(index: number, length: number) {\n    const [first, offset] = this.line(index);\n    const [last] = this.line(index + length);\n    super.deleteAt(index, length);\n    if (last != null && first !== last && offset > 0) {\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\n        this.optimize();\n        return;\n      }\n      const ref =\n        last.children.head instanceof Break ? null : last.children.head;\n      // @ts-expect-error\n      first.moveChildren(last, ref);\n      // @ts-expect-error\n      first.remove();\n    }\n    this.optimize();\n  }\n\n  enable(enabled = true) {\n    this.domNode.setAttribute('contenteditable', enabled ? 'true' : 'false');\n  }\n\n  formatAt(index: number, length: number, format: string, value: unknown) {\n    super.formatAt(index, length, format, value);\n    this.optimize();\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (index >= this.length()) {\n      if (def == null || this.scroll.query(value, Scope.BLOCK) == null) {\n        const blot = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(blot);\n        if (def == null && value.endsWith('\\n')) {\n          blot.insertAt(0, value.slice(0, -1), def);\n        } else {\n          blot.insertAt(0, value, def);\n        }\n      } else {\n        const embed = this.scroll.create(value, def);\n        this.appendChild(embed);\n      }\n    } else {\n      super.insertAt(index, value, def);\n    }\n    this.optimize();\n  }\n\n  insertBefore(blot: Blot, ref?: Blot | null) {\n    if (blot.statics.scope === Scope.INLINE_BLOT) {\n      const wrapper = this.scroll.create(\n        this.statics.defaultChild.blotName,\n      ) as Parent;\n      wrapper.appendChild(blot);\n      super.insertBefore(wrapper, ref);\n    } else {\n      super.insertBefore(blot, ref);\n    }\n  }\n\n  insertContents(index: number, delta: Delta) {\n    const renderBlocks = this.deltaToRenderBlocks(\n      delta.concat(new Delta().insert('\\n')),\n    );\n    const last = renderBlocks.pop();\n    if (last == null) return;\n\n    this.batchStart();\n\n    const first = renderBlocks.shift();\n    if (first) {\n      const shouldInsertNewlineChar =\n        first.type === 'block' &&\n        (first.delta.length() === 0 ||\n          (!this.descendant(BlockEmbed, index)[0] && index < this.length()));\n      const delta =\n        first.type === 'block'\n          ? first.delta\n          : new Delta().insert({ [first.key]: first.value });\n      insertInlineContents(this, index, delta);\n      const newlineCharLength = first.type === 'block' ? 1 : 0;\n      const lineEndIndex = index + delta.length() + newlineCharLength;\n      if (shouldInsertNewlineChar) {\n        this.insertAt(lineEndIndex - 1, '\\n');\n      }\n\n      const formats = bubbleFormats(this.line(index)[0]);\n      const attributes = AttributeMap.diff(formats, first.attributes) || {};\n      Object.keys(attributes).forEach((name) => {\n        this.formatAt(lineEndIndex - 1, 1, name, attributes[name]);\n      });\n\n      index = lineEndIndex;\n    }\n\n    let [refBlot, refBlotOffset] = this.children.find(index);\n    if (renderBlocks.length) {\n      if (refBlot) {\n        refBlot = refBlot.split(refBlotOffset);\n        refBlotOffset = 0;\n      }\n\n      renderBlocks.forEach((renderBlock) => {\n        if (renderBlock.type === 'block') {\n          const block = this.createBlock(\n            renderBlock.attributes,\n            refBlot || undefined,\n          );\n          insertInlineContents(block, 0, renderBlock.delta);\n        } else {\n          const blockEmbed = this.create(\n            renderBlock.key,\n            renderBlock.value,\n          ) as EmbedBlot;\n          this.insertBefore(blockEmbed, refBlot || undefined);\n          Object.keys(renderBlock.attributes).forEach((name) => {\n            blockEmbed.format(name, renderBlock.attributes[name]);\n          });\n        }\n      });\n    }\n\n    if (last.type === 'block' && last.delta.length()) {\n      const offset = refBlot\n        ? refBlot.offset(refBlot.scroll) + refBlotOffset\n        : this.length();\n      insertInlineContents(this, offset, last.delta);\n    }\n\n    this.batchEnd();\n    this.optimize();\n  }\n\n  isEnabled() {\n    return this.domNode.getAttribute('contenteditable') === 'true';\n  }\n\n  leaf(index: number): [LeafBlot | null, number] {\n    const last = this.path(index).pop();\n    if (!last) {\n      return [null, -1];\n    }\n\n    const [blot, offset] = last;\n    return blot instanceof LeafBlot ? [blot, offset] : [null, -1];\n  }\n\n  line(index: number): [Block | BlockEmbed | null, number] {\n    if (index === this.length()) {\n      return this.line(index - 1);\n    }\n    // @ts-expect-error TODO: make descendant() generic\n    return this.descendant(isLine, index);\n  }\n\n  lines(index = 0, length = Number.MAX_VALUE): (Block | BlockEmbed)[] {\n    const getLines = (\n      blot: ParentBlot,\n      blotIndex: number,\n      blotLength: number,\n    ) => {\n      let lines: (Block | BlockEmbed)[] = [];\n      let lengthLeft = blotLength;\n      blot.children.forEachAt(\n        blotIndex,\n        blotLength,\n        (child, childIndex, childLength) => {\n          if (isLine(child)) {\n            lines.push(child);\n          } else if (child instanceof ContainerBlot) {\n            lines = lines.concat(getLines(child, childIndex, lengthLeft));\n          }\n          lengthLeft -= childLength;\n        },\n      );\n      return lines;\n    };\n    return getLines(this, index, length);\n  }\n\n  optimize(context?: { [key: string]: any }): void;\n  optimize(\n    mutations?: MutationRecord[],\n    context?: { [key: string]: any },\n  ): void;\n  optimize(mutations = [], context = {}) {\n    if (this.batch) return;\n    super.optimize(mutations, context);\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\n    }\n  }\n\n  path(index: number) {\n    return super.path(index).slice(1); // Exclude self\n  }\n\n  remove() {\n    // Never remove self\n  }\n\n  update(source?: EmitterSource): void;\n  update(mutations?: MutationRecord[]): void;\n  update(mutations?: MutationRecord[] | EmitterSource): void {\n    if (this.batch) {\n      if (Array.isArray(mutations)) {\n        this.batch = this.batch.concat(mutations);\n      }\n      return;\n    }\n    let source: EmitterSource = Emitter.sources.USER;\n    if (typeof mutations === 'string') {\n      source = mutations;\n    }\n    if (!Array.isArray(mutations)) {\n      mutations = this.observer.takeRecords();\n    }\n    mutations = mutations.filter(({ target }) => {\n      const blot = this.find(target, true);\n      return blot && !isUpdatable(blot);\n    });\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\n    }\n    super.update(mutations.concat([])); // pass copy\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\n    }\n  }\n\n  updateEmbedAt(index: number, key: string, change: unknown) {\n    // Currently it only supports top-level embeds (BlockEmbed).\n    // We can update `ParentBlot` in parchment to support inline embeds.\n    const [blot] = this.descendant((b: Blot) => b instanceof BlockEmbed, index);\n    if (blot && blot.statics.blotName === key && isUpdatable(blot)) {\n      blot.updateContent(change);\n    }\n  }\n\n  protected handleDragStart(event: DragEvent) {\n    event.preventDefault();\n  }\n\n  private deltaToRenderBlocks(delta: Delta) {\n    const renderBlocks: RenderBlock[] = [];\n\n    let currentBlockDelta = new Delta();\n    delta.forEach((op) => {\n      const insert = op?.insert;\n      if (!insert) return;\n      if (typeof insert === 'string') {\n        const splitted = insert.split('\\n');\n        splitted.slice(0, -1).forEach((text) => {\n          currentBlockDelta.insert(text, op.attributes);\n          renderBlocks.push({\n            type: 'block',\n            delta: currentBlockDelta,\n            attributes: op.attributes ?? {},\n          });\n          currentBlockDelta = new Delta();\n        });\n        const last = splitted[splitted.length - 1];\n        if (last) {\n          currentBlockDelta.insert(last, op.attributes);\n        }\n      } else {\n        const key = Object.keys(insert)[0];\n        if (!key) return;\n        if (this.query(key, Scope.INLINE)) {\n          currentBlockDelta.push(op);\n        } else {\n          if (currentBlockDelta.length()) {\n            renderBlocks.push({\n              type: 'block',\n              delta: currentBlockDelta,\n              attributes: {},\n            });\n          }\n          currentBlockDelta = new Delta();\n          renderBlocks.push({\n            type: 'blockEmbed',\n            key,\n            value: insert[key],\n            attributes: op.attributes ?? {},\n          });\n        }\n      }\n    });\n\n    if (currentBlockDelta.length()) {\n      renderBlocks.push({\n        type: 'block',\n        delta: currentBlockDelta,\n        attributes: {},\n      });\n    }\n\n    return renderBlocks;\n  }\n\n  private createBlock(attributes: AttributeMap, refBlot?: Blot) {\n    let blotName: string | undefined;\n    const formats: AttributeMap = {};\n\n    Object.entries(attributes).forEach(([key, value]) => {\n      const isBlockBlot = this.query(key, Scope.BLOCK & Scope.BLOT) != null;\n      if (isBlockBlot) {\n        blotName = key;\n      } else {\n        formats[key] = value;\n      }\n    });\n\n    const block = this.create(\n      blotName || this.statics.defaultChild.blotName,\n      blotName ? attributes[blotName] : undefined,\n    ) as ParentBlot;\n\n    this.insertBefore(block, refBlot || undefined);\n\n    const length = block.length();\n    Object.entries(formats).forEach(([key, value]) => {\n      block.formatAt(0, length, key, value);\n    });\n\n    return block;\n  }\n}\n\nfunction insertInlineContents(\n  parent: ParentBlot,\n  index: number,\n  inlineContents: Delta,\n) {\n  inlineContents.reduce((index, op) => {\n    const length = Op.length(op);\n    let attributes = op.attributes || {};\n    if (op.insert != null) {\n      if (typeof op.insert === 'string') {\n        const text = op.insert;\n        parent.insertAt(index, text);\n        const [leaf] = parent.descendant(LeafBlot, index);\n        const formats = bubbleFormats(leaf);\n        attributes = AttributeMap.diff(formats, attributes) || {};\n      } else if (typeof op.insert === 'object') {\n        const key = Object.keys(op.insert)[0]; // There should only be one key\n        if (key == null) return index;\n        parent.insertAt(index, key, op.insert[key]);\n        const isInlineEmbed = parent.scroll.query(key, Scope.INLINE) != null;\n        if (isInlineEmbed) {\n          const [leaf] = parent.descendant(LeafBlot, index);\n          const formats = bubbleFormats(leaf);\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        }\n      }\n    }\n    Object.keys(attributes).forEach((key) => {\n      parent.formatAt(index, length, key, attributes[key]);\n    });\n    return index + length;\n  }, index);\n}\n\nexport default Scroll;\n","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify'],\n};\n\nconst AlignAttribute = new Attributor('align', 'align', config);\nconst AlignClass = new ClassAttributor('align', 'ql-align', config);\nconst AlignStyle = new StyleAttributor('align', 'text-align', config);\n\nexport { AlignAttribute, AlignClass, AlignStyle };\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nclass ColorAttributor extends StyleAttributor {\n  value(domNode: HTMLElement) {\n    let value = super.value(domNode) as string;\n    if (!value.startsWith('rgb(')) return value;\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n    const hex = value\n      .split(',')\n      .map((component) => `00${parseInt(component, 10).toString(16)}`.slice(-2))\n      .join('');\n    return `#${hex}`;\n  }\n}\n\nconst ColorClass = new ClassAttributor('color', 'ql-color', {\n  scope: Scope.INLINE,\n});\nconst ColorStyle = new ColorAttributor('color', 'color', {\n  scope: Scope.INLINE,\n});\n\nexport { ColorAttributor, ColorClass, ColorStyle };\n","import { ClassAttributor, Scope } from 'parchment';\nimport { ColorAttributor } from './color.js';\n\nconst BackgroundClass = new ClassAttributor('background', 'ql-bg', {\n  scope: Scope.INLINE,\n});\nconst BackgroundStyle = new ColorAttributor('background', 'background-color', {\n  scope: Scope.INLINE,\n});\n\nexport { BackgroundClass, BackgroundStyle };\n","import Block from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport Cursor from '../blots/cursor.js';\nimport Inline from '../blots/inline.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport Container from '../blots/container.js';\nimport Quill from '../core/quill.js';\n\nclass CodeBlockContainer extends Container {\n  static create(value: string) {\n    const domNode = super.create(value) as Element;\n    domNode.setAttribute('spellcheck', 'false');\n    return domNode;\n  }\n\n  code(index: number, length: number) {\n    return (\n      this.children\n        // @ts-expect-error\n        .map((child) => (child.length() <= 1 ? '' : child.domNode.innerText))\n        .join('\\n')\n        .slice(index, index + length)\n    );\n  }\n\n  html(index: number, length: number) {\n    // `\\n`s are needed in order to support empty lines at the beginning and the end.\n    // https://html.spec.whatwg.org/multipage/syntax.html#element-restrictions\n    return `<pre>\\n${escapeText(this.code(index, length))}\\n</pre>`;\n  }\n}\n\nclass CodeBlock extends Block {\n  static TAB = '  ';\n\n  static register() {\n    Quill.register(CodeBlockContainer);\n  }\n}\n\nclass Code extends Inline {}\nCode.blotName = 'code';\nCode.tagName = 'CODE';\n\nCodeBlock.blotName = 'code-block';\nCodeBlock.className = 'ql-code-block';\nCodeBlock.tagName = 'DIV';\nCodeBlockContainer.blotName = 'code-block-container';\nCodeBlockContainer.className = 'ql-code-block-container';\nCodeBlockContainer.tagName = 'DIV';\n\nCodeBlockContainer.allowedChildren = [CodeBlock];\n\nCodeBlock.allowedChildren = [TextBlot, Break, Cursor];\nCodeBlock.requiredContainer = CodeBlockContainer;\n\nexport { Code, CodeBlockContainer, CodeBlock as default };\n","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['rtl'],\n};\n\nconst DirectionAttribute = new Attributor('direction', 'dir', config);\nconst DirectionClass = new ClassAttributor('direction', 'ql-direction', config);\nconst DirectionStyle = new StyleAttributor('direction', 'direction', config);\n\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.INLINE,\n  whitelist: ['serif', 'monospace'],\n};\n\nconst FontClass = new ClassAttributor('font', 'ql-font', config);\n\nclass FontStyleAttributor extends StyleAttributor {\n  value(node: HTMLElement) {\n    return super.value(node).replace(/[\"']/g, '');\n  }\n}\n\nconst FontStyle = new FontStyleAttributor('font', 'font-family', config);\n\nexport { FontStyle, FontClass };\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst SizeClass = new ClassAttributor('size', 'ql-size', {\n  scope: Scope.INLINE,\n  whitelist: ['small', 'large', 'huge'],\n});\nconst SizeStyle = new StyleAttributor('size', 'font-size', {\n  scope: Scope.INLINE,\n  whitelist: ['10px', '18px', '32px'],\n});\n\nexport { SizeClass, SizeStyle };\n","import { cloneDeep, isEqual } from 'lodash-es';\nimport Delta, { AttributeMap } from 'quill-delta';\nimport { EmbedBlot, Scope, TextBlot } from 'parchment';\nimport type { Blot, BlockBlot } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport type { BlockEmbed } from '../blots/block.js';\nimport type { Range } from '../core/selection.js';\n\nconst debug = logger('quill:keyboard');\n\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n\nexport interface Context {\n  collapsed: boolean;\n  empty: boolean;\n  offset: number;\n  prefix: string;\n  suffix: string;\n  format: Record<string, unknown>;\n  event: KeyboardEvent;\n  line: BlockEmbed | BlockBlot;\n}\n\ninterface BindingObject\n  extends Partial<Omit<Context, 'prefix' | 'suffix' | 'format'>> {\n  key: number | string | string[];\n  shortKey?: boolean | null;\n  shiftKey?: boolean | null;\n  altKey?: boolean | null;\n  metaKey?: boolean | null;\n  ctrlKey?: boolean | null;\n  prefix?: RegExp;\n  suffix?: RegExp;\n  format?: Record<string, unknown> | string[];\n  handler?: (\n    this: { quill: Quill },\n    range: Range,\n    curContext: Context,\n    // eslint-disable-next-line no-use-before-define\n    binding: NormalizedBinding,\n  ) => boolean | void;\n}\n\ntype Binding = BindingObject | string | number;\n\ninterface NormalizedBinding extends Omit<BindingObject, 'key' | 'shortKey'> {\n  key: string | number;\n}\n\ninterface KeyboardOptions {\n  bindings: Record<string, Binding>;\n}\n\ninterface KeyboardOptions {\n  bindings: Record<string, Binding>;\n}\n\nclass Keyboard extends Module<KeyboardOptions> {\n  static DEFAULTS: KeyboardOptions;\n\n  static match(evt: KeyboardEvent, binding: BindingObject) {\n    if (\n      (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'] as const).some((key) => {\n        return !!binding[key] !== evt[key] && binding[key] !== null;\n      })\n    ) {\n      return false;\n    }\n    return binding.key === evt.key || binding.key === evt.which;\n  }\n\n  bindings: Record<string, NormalizedBinding[]>;\n\n  constructor(quill: Quill, options: Partial<KeyboardOptions>) {\n    super(quill, options);\n    this.bindings = {};\n    // @ts-expect-error Fix me later\n    Object.keys(this.options.bindings).forEach((name) => {\n      // @ts-expect-error Fix me later\n      if (this.options.bindings[name]) {\n        // @ts-expect-error Fix me later\n        this.addBinding(this.options.bindings[name]);\n      }\n    });\n    this.addBinding({ key: 'Enter', shiftKey: null }, this.handleEnter);\n    this.addBinding(\n      { key: 'Enter', metaKey: null, ctrlKey: null, altKey: null },\n      () => {},\n    );\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      this.addBinding(\n        { key: 'Backspace' },\n        { collapsed: true },\n        this.handleBackspace,\n      );\n      this.addBinding(\n        { key: 'Delete' },\n        { collapsed: true },\n        this.handleDelete,\n      );\n    } else {\n      this.addBinding(\n        { key: 'Backspace' },\n        { collapsed: true, prefix: /^.?$/ },\n        this.handleBackspace,\n      );\n      this.addBinding(\n        { key: 'Delete' },\n        { collapsed: true, suffix: /^.?$/ },\n        this.handleDelete,\n      );\n    }\n    this.addBinding(\n      { key: 'Backspace' },\n      { collapsed: false },\n      this.handleDeleteRange,\n    );\n    this.addBinding(\n      { key: 'Delete' },\n      { collapsed: false },\n      this.handleDeleteRange,\n    );\n    this.addBinding(\n      {\n        key: 'Backspace',\n        altKey: null,\n        ctrlKey: null,\n        metaKey: null,\n        shiftKey: null,\n      },\n      { collapsed: true, offset: 0 },\n      this.handleBackspace,\n    );\n    this.listen();\n  }\n\n  addBinding(\n    keyBinding: Binding,\n    context:\n      | Required<BindingObject['handler']>\n      | Partial<Omit<BindingObject, 'key' | 'handler'>> = {},\n    handler:\n      | Required<BindingObject['handler']>\n      | Partial<Omit<BindingObject, 'key' | 'handler'>> = {},\n  ) {\n    const binding = normalize(keyBinding);\n    if (binding == null) {\n      debug.warn('Attempted to add invalid keyboard binding', binding);\n      return;\n    }\n    if (typeof context === 'function') {\n      context = { handler: context };\n    }\n    if (typeof handler === 'function') {\n      handler = { handler };\n    }\n    const keys = Array.isArray(binding.key) ? binding.key : [binding.key];\n    keys.forEach((key) => {\n      const singleBinding = {\n        ...binding,\n        key,\n        ...context,\n        ...handler,\n      };\n      this.bindings[singleBinding.key] = this.bindings[singleBinding.key] || [];\n      this.bindings[singleBinding.key].push(singleBinding);\n    });\n  }\n\n  listen() {\n    this.quill.root.addEventListener('keydown', (evt) => {\n      if (evt.defaultPrevented || evt.isComposing) return;\n\n      // evt.isComposing is false when pressing Enter/Backspace when composing in Safari\n      // https://bugs.webkit.org/show_bug.cgi?id=165004\n      const isComposing =\n        evt.keyCode === 229 && (evt.key === 'Enter' || evt.key === 'Backspace');\n      if (isComposing) return;\n\n      const bindings = (this.bindings[evt.key] || []).concat(\n        this.bindings[evt.which] || [],\n      );\n      const matches = bindings.filter((binding) =>\n        Keyboard.match(evt, binding),\n      );\n      if (matches.length === 0) return;\n      // @ts-expect-error\n      const blot = Quill.find(evt.target, true);\n      if (blot && blot.scroll !== this.quill.scroll) return;\n      const range = this.quill.getSelection();\n      if (range == null || !this.quill.hasFocus()) return;\n      const [line, offset] = this.quill.getLine(range.index);\n      const [leafStart, offsetStart] = this.quill.getLeaf(range.index);\n      const [leafEnd, offsetEnd] =\n        range.length === 0\n          ? [leafStart, offsetStart]\n          : this.quill.getLeaf(range.index + range.length);\n      const prefixText =\n        leafStart instanceof TextBlot\n          ? leafStart.value().slice(0, offsetStart)\n          : '';\n      const suffixText =\n        leafEnd instanceof TextBlot ? leafEnd.value().slice(offsetEnd) : '';\n      const curContext = {\n        collapsed: range.length === 0,\n        // @ts-expect-error Fix me later\n        empty: range.length === 0 && line.length() <= 1,\n        format: this.quill.getFormat(range),\n        line,\n        offset,\n        prefix: prefixText,\n        suffix: suffixText,\n        event: evt,\n      };\n      const prevented = matches.some((binding) => {\n        if (\n          binding.collapsed != null &&\n          binding.collapsed !== curContext.collapsed\n        ) {\n          return false;\n        }\n        if (binding.empty != null && binding.empty !== curContext.empty) {\n          return false;\n        }\n        if (binding.offset != null && binding.offset !== curContext.offset) {\n          return false;\n        }\n        if (Array.isArray(binding.format)) {\n          // any format is present\n          if (binding.format.every((name) => curContext.format[name] == null)) {\n            return false;\n          }\n        } else if (typeof binding.format === 'object') {\n          // all formats must match\n          if (\n            !Object.keys(binding.format).every((name) => {\n              // @ts-expect-error Fix me later\n              if (binding.format[name] === true)\n                return curContext.format[name] != null;\n              // @ts-expect-error Fix me later\n              if (binding.format[name] === false)\n                return curContext.format[name] == null;\n              // @ts-expect-error Fix me later\n              return isEqual(binding.format[name], curContext.format[name]);\n            })\n          ) {\n            return false;\n          }\n        }\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) {\n          return false;\n        }\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) {\n          return false;\n        }\n        // @ts-expect-error Fix me later\n        return binding.handler.call(this, range, curContext, binding) !== true;\n      });\n      if (prevented) {\n        evt.preventDefault();\n      }\n    });\n  }\n\n  handleBackspace(range: Range, context: Context) {\n    // Check for astral symbols\n    const length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix)\n      ? 2\n      : 1;\n    if (range.index === 0 || this.quill.getLength() <= 1) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index - length).delete(length);\n    if (context.offset === 0) {\n      // Always deleting newline here, length always 1\n      const [prev] = this.quill.getLine(range.index - 1);\n      if (prev) {\n        const isPrevLineEmpty =\n          prev.statics.blotName === 'block' && prev.length() <= 1;\n        if (!isPrevLineEmpty) {\n          // @ts-expect-error Fix me later\n          const curFormats = line.formats();\n          const prevFormats = this.quill.getFormat(range.index - 1, 1);\n          formats = AttributeMap.diff(curFormats, prevFormats) || {};\n          if (Object.keys(formats).length > 0) {\n            // line.length() - 1 targets \\n in line, another -1 for newline being deleted\n            const formatDelta = new Delta()\n              // @ts-expect-error Fix me later\n              .retain(range.index + line.length() - 2)\n              .retain(1, formats);\n            delta = delta.compose(formatDelta);\n          }\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n\n  handleDelete(range: Range, context: Context) {\n    // Check for astral symbols\n    const length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix)\n      ? 2\n      : 1;\n    if (range.index >= this.quill.getLength() - length) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index).delete(length);\n    // @ts-expect-error Fix me later\n    if (context.offset >= line.length() - 1) {\n      const [next] = this.quill.getLine(range.index + 1);\n      if (next) {\n        // @ts-expect-error Fix me later\n        const curFormats = line.formats();\n        const nextFormats = this.quill.getFormat(range.index, 1);\n        formats = AttributeMap.diff(curFormats, nextFormats) || {};\n        if (Object.keys(formats).length > 0) {\n          delta = delta.retain(next.length() - 1).retain(1, formats);\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n\n  handleDeleteRange(range: Range) {\n    deleteRange({ range, quill: this.quill });\n    this.quill.focus();\n  }\n\n  handleEnter(range: Range, context: Context) {\n    const lineFormats = Object.keys(context.format).reduce(\n      (formats: Record<string, unknown>, format) => {\n        if (\n          this.quill.scroll.query(format, Scope.BLOCK) &&\n          !Array.isArray(context.format[format])\n        ) {\n          formats[format] = context.format[format];\n        }\n        return formats;\n      },\n      {},\n    );\n    const delta = new Delta()\n      .retain(range.index)\n      .delete(range.length)\n      .insert('\\n', lineFormats);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n    this.quill.focus();\n  }\n}\n\nconst defaultOptions: KeyboardOptions = {\n  bindings: {\n    bold: makeFormatHandler('bold'),\n    italic: makeFormatHandler('italic'),\n    underline: makeFormatHandler('underline'),\n    indent: {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: 'Tab',\n      format: ['blockquote', 'indent', 'list'],\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', Quill.sources.USER);\n        return false;\n      },\n    },\n    outdent: {\n      key: 'Tab',\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', Quill.sources.USER);\n        return false;\n      },\n    },\n    'outdent backspace': {\n      key: 'Backspace',\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', Quill.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, Quill.sources.USER);\n        }\n      },\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: 'Tab',\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler(range) {\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\n      },\n    },\n    tab: {\n      key: 'Tab',\n      handler(range, context) {\n        if (context.format.table) return true;\n        this.quill.history.cutoff();\n        const delta = new Delta()\n          .retain(range.index)\n          .delete(range.length)\n          .insert('\\t');\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        return false;\n      },\n    },\n    'blockquote empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['blockquote'],\n      empty: true,\n      handler() {\n        this.quill.format('blockquote', false, Quill.sources.USER);\n      },\n    },\n    'list empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler(range, context) {\n        const formats: Record<string, unknown> = { list: false };\n        if (context.format.indent) {\n          formats.indent = false;\n        }\n        this.quill.formatLine(\n          range.index,\n          range.length,\n          formats,\n          Quill.sources.USER,\n        );\n      },\n    },\n    'checklist enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: { list: 'checked' },\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const formats = {\n          // @ts-expect-error Fix me later\n          ...line.formats(),\n          list: 'checked',\n        };\n        const delta = new Delta()\n          .retain(range.index)\n          .insert('\\n', formats)\n          // @ts-expect-error Fix me later\n          .retain(line.length() - offset - 1)\n          .retain(1, { list: 'unchecked' });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      },\n    },\n    'header enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler(range, context) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const delta = new Delta()\n          .retain(range.index)\n          .insert('\\n', context.format)\n          // @ts-expect-error Fix me later\n          .retain(line.length() - offset - 1)\n          .retain(1, { header: null });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      },\n    },\n    'table backspace': {\n      key: 'Backspace',\n      format: ['table'],\n      collapsed: true,\n      offset: 0,\n      handler() {},\n    },\n    'table delete': {\n      key: 'Delete',\n      format: ['table'],\n      collapsed: true,\n      suffix: /^$/,\n      handler() {},\n    },\n    'table enter': {\n      key: 'Enter',\n      shiftKey: null,\n      format: ['table'],\n      handler(range) {\n        const module = this.quill.getModule('table');\n        if (module) {\n          // @ts-expect-error\n          const [table, row, cell, offset] = module.getTable(range);\n          const shift = tableSide(table, row, cell, offset);\n          if (shift == null) return;\n          let index = table.offset();\n          if (shift < 0) {\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(\n              range.index + 1,\n              range.length,\n              Quill.sources.SILENT,\n            );\n          } else if (shift > 0) {\n            index += table.length();\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(index, Quill.sources.USER);\n          }\n        }\n      },\n    },\n    'table tab': {\n      key: 'Tab',\n      shiftKey: null,\n      format: ['table'],\n      handler(range, context) {\n        const { event, line: cell } = context;\n        const offset = cell.offset(this.quill.scroll);\n        if (event.shiftKey) {\n          this.quill.setSelection(offset - 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(offset + cell.length(), Quill.sources.USER);\n        }\n      },\n    },\n    'list autofill': {\n      key: ' ',\n      shiftKey: null,\n      collapsed: true,\n      format: {\n        'code-block': false,\n        blockquote: false,\n        table: false,\n      },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler(range, context) {\n        if (this.quill.scroll.query('list') == null) return true;\n        const { length } = context.prefix;\n        const [line, offset] = this.quill.getLine(range.index);\n        if (offset > length) return true;\n        let value;\n        switch (context.prefix.trim()) {\n          case '[]':\n          case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-':\n          case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\n        this.quill.history.cutoff();\n        const delta = new Delta()\n          .retain(range.index - offset)\n          .delete(length + 1)\n          // @ts-expect-error Fix me later\n          .retain(line.length() - 2 - offset)\n          .retain(1, { list: value });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\n        return false;\n      },\n    },\n    'code exit': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /^$/,\n      suffix: /^\\s*$/,\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        let numLines = 2;\n        let cur = line;\n        while (\n          cur != null &&\n          cur.length() <= 1 &&\n          cur.formats()['code-block']\n        ) {\n          // @ts-expect-error\n          cur = cur.prev;\n          numLines -= 1;\n          // Requisite prev lines are empty\n          if (numLines <= 0) {\n            const delta = new Delta()\n              // @ts-expect-error Fix me later\n              .retain(range.index + line.length() - offset - 2)\n              .retain(1, { 'code-block': null })\n              .delete(1);\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(range.index - 1, Quill.sources.SILENT);\n            return false;\n          }\n        }\n        return true;\n      },\n    },\n    'embed left': makeEmbedArrowHandler('ArrowLeft', false),\n    'embed left shift': makeEmbedArrowHandler('ArrowLeft', true),\n    'embed right': makeEmbedArrowHandler('ArrowRight', false),\n    'embed right shift': makeEmbedArrowHandler('ArrowRight', true),\n    'table down': makeTableArrowHandler(false),\n    'table up': makeTableArrowHandler(true),\n  },\n};\n\nKeyboard.DEFAULTS = defaultOptions;\n\nfunction makeCodeBlockHandler(indent: boolean): BindingObject {\n  return {\n    key: 'Tab',\n    shiftKey: !indent,\n    format: { 'code-block': true },\n    handler(range, { event }) {\n      const CodeBlock = this.quill.scroll.query('code-block');\n      // @ts-expect-error\n      const { TAB } = CodeBlock;\n      if (range.length === 0 && !event.shiftKey) {\n        this.quill.insertText(range.index, TAB, Quill.sources.USER);\n        this.quill.setSelection(range.index + TAB.length, Quill.sources.SILENT);\n        return;\n      }\n\n      const lines =\n        range.length === 0\n          ? this.quill.getLines(range.index, 1)\n          : this.quill.getLines(range);\n      let { index, length } = range;\n      lines.forEach((line, i) => {\n        if (indent) {\n          line.insertAt(0, TAB);\n          if (i === 0) {\n            index += TAB.length;\n          } else {\n            length += TAB.length;\n          }\n          // @ts-expect-error Fix me later\n        } else if (line.domNode.textContent.startsWith(TAB)) {\n          line.deleteAt(0, TAB.length);\n          if (i === 0) {\n            index -= TAB.length;\n          } else {\n            length -= TAB.length;\n          }\n        }\n      });\n      this.quill.update(Quill.sources.USER);\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\n    },\n  };\n}\n\nfunction makeEmbedArrowHandler(\n  key: string,\n  shiftKey: boolean | null,\n): BindingObject {\n  const where = key === 'ArrowLeft' ? 'prefix' : 'suffix';\n  return {\n    key,\n    shiftKey,\n    altKey: null,\n    [where]: /^$/,\n    handler(range) {\n      let { index } = range;\n      if (key === 'ArrowRight') {\n        index += range.length + 1;\n      }\n      const [leaf] = this.quill.getLeaf(index);\n      if (!(leaf instanceof EmbedBlot)) return true;\n      if (key === 'ArrowLeft') {\n        if (shiftKey) {\n          this.quill.setSelection(\n            range.index - 1,\n            range.length + 1,\n            Quill.sources.USER,\n          );\n        } else {\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\n        }\n      } else if (shiftKey) {\n        this.quill.setSelection(\n          range.index,\n          range.length + 1,\n          Quill.sources.USER,\n        );\n      } else {\n        this.quill.setSelection(\n          range.index + range.length + 1,\n          Quill.sources.USER,\n        );\n      }\n      return false;\n    },\n  };\n}\n\nfunction makeFormatHandler(format: string): BindingObject {\n  return {\n    key: format[0],\n    shortKey: true,\n    handler(range, context) {\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\n    },\n  };\n}\n\nfunction makeTableArrowHandler(up: boolean): BindingObject {\n  return {\n    key: up ? 'ArrowUp' : 'ArrowDown',\n    collapsed: true,\n    format: ['table'],\n    handler(range, context) {\n      // TODO move to table module\n      const key = up ? 'prev' : 'next';\n      const cell = context.line;\n      const targetRow = cell.parent[key];\n      if (targetRow != null) {\n        if (targetRow.statics.blotName === 'table-row') {\n          // @ts-expect-error\n          let targetCell = targetRow.children.head;\n          let cur = cell;\n          while (cur.prev != null) {\n            // @ts-expect-error\n            cur = cur.prev;\n            targetCell = targetCell.next;\n          }\n          const index =\n            targetCell.offset(this.quill.scroll) +\n            Math.min(context.offset, targetCell.length() - 1);\n          this.quill.setSelection(index, 0, Quill.sources.USER);\n        }\n      } else {\n        // @ts-expect-error\n        const targetLine = cell.table()[key];\n        if (targetLine != null) {\n          if (up) {\n            this.quill.setSelection(\n              targetLine.offset(this.quill.scroll) + targetLine.length() - 1,\n              0,\n              Quill.sources.USER,\n            );\n          } else {\n            this.quill.setSelection(\n              targetLine.offset(this.quill.scroll),\n              0,\n              Quill.sources.USER,\n            );\n          }\n        }\n      }\n      return false;\n    },\n  };\n}\n\nfunction normalize(binding: Binding): BindingObject | null {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    binding = { key: binding };\n  } else if (typeof binding === 'object') {\n    binding = cloneDeep(binding);\n  } else {\n    return null;\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\n// TODO: Move into quill.ts or editor.ts\nfunction deleteRange({ quill, range }: { quill: Quill; range: Range }) {\n  const lines = quill.getLines(range);\n  let formats = {};\n  if (lines.length > 1) {\n    const firstFormats = lines[0].formats();\n    const lastFormats = lines[lines.length - 1].formats();\n    formats = AttributeMap.diff(lastFormats, firstFormats) || {};\n  }\n  quill.deleteText(range, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    quill.formatLine(range.index, 1, formats, Quill.sources.USER);\n  }\n  quill.setSelection(range.index, Quill.sources.SILENT);\n}\n\nfunction tableSide(_table: unknown, row: Blot, cell: Blot, offset: number) {\n  if (row.prev == null && row.next == null) {\n    if (cell.prev == null && cell.next == null) {\n      return offset === 0 ? -1 : 1;\n    }\n    return cell.prev == null ? -1 : 1;\n  }\n  if (row.prev == null) {\n    return -1;\n  }\n  if (row.next == null) {\n    return 1;\n  }\n  return null;\n}\n\nexport { Keyboard as default, SHORTKEY, normalize, deleteRange };\n","const normalWeightRegexp = /font-weight:\\s*normal/;\nconst blockTagNames = ['P', 'OL', 'UL'];\n\nconst isBlockElement = (element: Element | null) => {\n  return element && blockTagNames.includes(element.tagName);\n};\n\nconst normalizeEmptyLines = (doc: Document) => {\n  Array.from(doc.querySelectorAll('br'))\n    .filter(\n      (br) =>\n        isBlockElement(br.previousElementSibling) &&\n        isBlockElement(br.nextElementSibling),\n    )\n    .forEach((br) => {\n      br.parentNode?.removeChild(br);\n    });\n};\n\nconst normalizeFontWeight = (doc: Document) => {\n  Array.from(doc.querySelectorAll('b[style*=\"font-weight\"]'))\n    .filter((node) => node.getAttribute('style')?.match(normalWeightRegexp))\n    .forEach((node) => {\n      const fragment = doc.createDocumentFragment();\n      fragment.append(...node.childNodes);\n      node.parentNode?.replaceChild(fragment, node);\n    });\n};\n\nexport default function normalize(doc: Document) {\n  if (doc.querySelector('[id^=\"docs-internal-guid-\"]')) {\n    normalizeFontWeight(doc);\n    normalizeEmptyLines(doc);\n  }\n}\n","const ignoreRegexp = /\\bmso-list:[^;]*ignore/i;\nconst idRegexp = /\\bmso-list:[^;]*\\bl(\\d+)/i;\nconst indentRegexp = /\\bmso-list:[^;]*\\blevel(\\d+)/i;\n\nconst parseListItem = (element: Element, html: string) => {\n  const style = element.getAttribute('style');\n  const idMatch = style?.match(idRegexp);\n  if (!idMatch) {\n    return null;\n  }\n  const id = Number(idMatch[1]);\n\n  const indentMatch = style?.match(indentRegexp);\n  const indent = indentMatch ? Number(indentMatch[1]) : 1;\n\n  const typeRegexp = new RegExp(\n    `@list l${id}:level${indent}\\\\s*\\\\{[^\\\\}]*mso-level-number-format:\\\\s*([\\\\w-]+)`,\n    'i',\n  );\n  const typeMatch = html.match(typeRegexp);\n  const type = typeMatch && typeMatch[1] === 'bullet' ? 'bullet' : 'ordered';\n\n  return { id, indent, type, element };\n};\n\n// list items are represented as `p` tags with styles like `mso-list: l0 level1` where:\n// 1. \"0\" in \"l0\" means the list item id;\n// 2. \"1\" in \"level1\" means the indent level, starting from 1.\nconst normalizeListItem = (doc: Document) => {\n  const msoList = Array.from(doc.querySelectorAll('[style*=mso-list]'));\n  const ignored: Element[] = [];\n  const others: Element[] = [];\n  msoList.forEach((node) => {\n    const shouldIgnore = (node.getAttribute('style') || '').match(ignoreRegexp);\n    if (shouldIgnore) {\n      ignored.push(node);\n    } else {\n      others.push(node);\n    }\n  });\n\n  // Each list item contains a marker wrapped with \"mso-list: Ignore\".\n  ignored.forEach((node) => node.parentNode?.removeChild(node));\n\n  // The list stype is not defined inline with the tag, instead, it's in the\n  // style tag so we need to pass the html as a string.\n  const html = doc.documentElement.innerHTML;\n  const listItems = others\n    .map((element) => parseListItem(element, html))\n    .filter((parsed) => parsed);\n\n  while (listItems.length) {\n    const childListItems = [];\n\n    let current = listItems.shift();\n    // Group continuous items into the same group (aka \"ul\")\n    while (current) {\n      childListItems.push(current);\n      current =\n        listItems.length &&\n        listItems[0]?.element === current.element.nextElementSibling &&\n        // Different id means the next item doesn't belong to this group.\n        listItems[0].id === current.id\n          ? listItems.shift()\n          : null;\n    }\n\n    const ul = document.createElement('ul');\n    childListItems.forEach((listItem) => {\n      const li = document.createElement('li');\n      li.setAttribute('data-list', listItem.type);\n      if (listItem.indent > 1) {\n        li.setAttribute('class', `ql-indent-${listItem.indent - 1}`);\n      }\n      li.innerHTML = listItem.element.innerHTML;\n      ul.appendChild(li);\n    });\n\n    const element = childListItems[0]?.element;\n    const { parentNode } = element ?? {};\n    if (element) {\n      parentNode?.replaceChild(ul, element);\n    }\n    childListItems.slice(1).forEach(({ element: e }) => {\n      parentNode?.removeChild(e);\n    });\n  }\n};\n\nexport default function normalize(doc: Document) {\n  if (\n    doc.documentElement.getAttribute('xmlns:w') ===\n    'urn:schemas-microsoft-com:office:word'\n  ) {\n    normalizeListItem(doc);\n  }\n}\n","import googleDocs from './normalizers/googleDocs.js';\nimport msWord from './normalizers/msWord.js';\n\nconst NORMALIZERS = [msWord, googleDocs];\n\nconst normalizeExternalHTML = (doc: Document) => {\n  if (doc.documentElement) {\n    NORMALIZERS.forEach((normalize) => {\n      normalize(doc);\n    });\n  }\n};\n\nexport default normalizeExternalHTML;\n","import type { ScrollBlot } from 'parchment';\nimport {\n  Attributor,\n  BlockBlot,\n  ClassAttributor,\n  EmbedBlot,\n  Scope,\n  StyleAttributor,\n} from 'parchment';\nimport Delta from 'quill-delta';\nimport { BlockEmbed } from '../blots/block.js';\nimport type { EmitterSource } from '../core/emitter.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type { Range } from '../core/selection.js';\nimport { AlignAttribute, AlignStyle } from '../formats/align.js';\nimport { BackgroundStyle } from '../formats/background.js';\nimport CodeBlock from '../formats/code.js';\nimport { ColorStyle } from '../formats/color.js';\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction.js';\nimport { FontStyle } from '../formats/font.js';\nimport { SizeStyle } from '../formats/size.js';\nimport { deleteRange } from './keyboard.js';\nimport normalizeExternalHTML from './normalizeExternalHTML/index.js';\n\nconst debug = logger('quill:clipboard');\n\ntype Selector = string | Node['TEXT_NODE'] | Node['ELEMENT_NODE'];\ntype Matcher = (node: Node, delta: Delta, scroll: ScrollBlot) => Delta;\n\nconst CLIPBOARD_CONFIG: [Selector, Matcher][] = [\n  [Node.TEXT_NODE, matchText],\n  [Node.TEXT_NODE, matchNewline],\n  ['br', matchBreak],\n  [Node.ELEMENT_NODE, matchNewline],\n  [Node.ELEMENT_NODE, matchBlot],\n  [Node.ELEMENT_NODE, matchAttributor],\n  [Node.ELEMENT_NODE, matchStyles],\n  ['li', matchIndent],\n  ['ol, ul', matchList],\n  ['pre', matchCodeBlock],\n  ['tr', matchTable],\n  ['b', createMatchAlias('bold')],\n  ['i', createMatchAlias('italic')],\n  ['strike', createMatchAlias('strike')],\n  ['style', matchIgnore],\n];\n\nconst ATTRIBUTE_ATTRIBUTORS = [AlignAttribute, DirectionAttribute].reduce(\n  (memo: Record<string, Attributor>, attr) => {\n    memo[attr.keyName] = attr;\n    return memo;\n  },\n  {},\n);\n\nconst STYLE_ATTRIBUTORS = [\n  AlignStyle,\n  BackgroundStyle,\n  ColorStyle,\n  DirectionStyle,\n  FontStyle,\n  SizeStyle,\n].reduce((memo: Record<string, Attributor>, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\ninterface ClipboardOptions {\n  matchers: [Selector, Matcher][];\n}\n\nclass Clipboard extends Module<ClipboardOptions> {\n  static DEFAULTS: ClipboardOptions = {\n    matchers: [],\n  };\n\n  matchers: [Selector, Matcher][];\n\n  constructor(quill: Quill, options: Partial<ClipboardOptions>) {\n    super(quill, options);\n    this.quill.root.addEventListener('copy', (e) =>\n      this.onCaptureCopy(e, false),\n    );\n    this.quill.root.addEventListener('cut', (e) => this.onCaptureCopy(e, true));\n    this.quill.root.addEventListener('paste', this.onCapturePaste.bind(this));\n    this.matchers = [];\n    CLIPBOARD_CONFIG.concat(this.options.matchers ?? []).forEach(\n      ([selector, matcher]) => {\n        this.addMatcher(selector, matcher);\n      },\n    );\n  }\n\n  addMatcher(selector: Selector, matcher: Matcher) {\n    this.matchers.push([selector, matcher]);\n  }\n\n  convert(\n    { html, text }: { html?: string; text?: string },\n    formats: Record<string, unknown> = {},\n  ) {\n    if (formats[CodeBlock.blotName]) {\n      return new Delta().insert(text || '', {\n        [CodeBlock.blotName]: formats[CodeBlock.blotName],\n      });\n    }\n    if (!html) {\n      return new Delta().insert(text || '', formats);\n    }\n    const delta = this.convertHTML(html);\n    // Remove trailing newline\n    if (\n      deltaEndsWith(delta, '\\n') &&\n      (delta.ops[delta.ops.length - 1].attributes == null || formats.table)\n    ) {\n      return delta.compose(new Delta().retain(delta.length() - 1).delete(1));\n    }\n    return delta;\n  }\n\n  protected normalizeHTML(doc: Document) {\n    normalizeExternalHTML(doc);\n  }\n\n  protected convertHTML(html: string) {\n    const doc = new DOMParser().parseFromString(html, 'text/html');\n    this.normalizeHTML(doc);\n    const container = doc.body;\n    const nodeMatches = new WeakMap();\n    const [elementMatchers, textMatchers] = this.prepareMatching(\n      container,\n      nodeMatches,\n    );\n    return traverse(\n      this.quill.scroll,\n      container,\n      elementMatchers,\n      textMatchers,\n      nodeMatches,\n    );\n  }\n\n  dangerouslyPasteHTML(html: string, source?: EmitterSource): void;\n  dangerouslyPasteHTML(\n    index: number,\n    html: string,\n    source?: EmitterSource,\n  ): void;\n  dangerouslyPasteHTML(\n    index: number | string,\n    html?: string,\n    source: EmitterSource = Quill.sources.API,\n  ) {\n    if (typeof index === 'string') {\n      const delta = this.convert({ html: index, text: '' });\n      // @ts-expect-error\n      this.quill.setContents(delta, html);\n      this.quill.setSelection(0, Quill.sources.SILENT);\n    } else {\n      const paste = this.convert({ html, text: '' });\n      this.quill.updateContents(\n        new Delta().retain(index).concat(paste),\n        source,\n      );\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\n    }\n  }\n\n  onCaptureCopy(e: ClipboardEvent, isCut = false) {\n    if (e.defaultPrevented) return;\n    e.preventDefault();\n    const [range] = this.quill.selection.getRange();\n    if (range == null) return;\n    const { html, text } = this.onCopy(range, isCut);\n    e.clipboardData?.setData('text/plain', text);\n    e.clipboardData?.setData('text/html', html);\n    if (isCut) {\n      deleteRange({ range, quill: this.quill });\n    }\n  }\n\n  /*\n   * https://www.iana.org/assignments/media-types/text/uri-list\n   */\n  private normalizeURIList(urlList: string) {\n    return (\n      urlList\n        .split(/\\r?\\n/)\n        // Ignore all comments\n        .filter((url) => url[0] !== '#')\n        .join('\\n')\n    );\n  }\n\n  onCapturePaste(e: ClipboardEvent) {\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\n    e.preventDefault();\n    const range = this.quill.getSelection(true);\n    if (range == null) return;\n    const html = e.clipboardData?.getData('text/html');\n    let text = e.clipboardData?.getData('text/plain');\n    if (!html && !text) {\n      const urlList = e.clipboardData?.getData('text/uri-list');\n      if (urlList) {\n        text = this.normalizeURIList(urlList);\n      }\n    }\n    const files = Array.from(e.clipboardData?.files || []);\n    if (!html && files.length > 0) {\n      this.quill.uploader.upload(range, files);\n      return;\n    }\n    if (html && files.length > 0) {\n      const doc = new DOMParser().parseFromString(html, 'text/html');\n      if (\n        doc.body.childElementCount === 1 &&\n        doc.body.firstElementChild?.tagName === 'IMG'\n      ) {\n        this.quill.uploader.upload(range, files);\n        return;\n      }\n    }\n    this.onPaste(range, { html, text });\n  }\n\n  onCopy(range: Range, isCut: boolean): { html: string; text: string };\n  onCopy(range: Range) {\n    const text = this.quill.getText(range);\n    const html = this.quill.getSemanticHTML(range);\n    return { html, text };\n  }\n\n  onPaste(range: Range, { text, html }: { text?: string; html?: string }) {\n    const formats = this.quill.getFormat(range.index);\n    const pastedDelta = this.convert({ text, html }, formats);\n    debug.log('onPaste', pastedDelta, { text, html });\n    const delta = new Delta()\n      .retain(range.index)\n      .delete(range.length)\n      .concat(pastedDelta);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    // range.length contributes to delta.length()\n    this.quill.setSelection(\n      delta.length() - range.length,\n      Quill.sources.SILENT,\n    );\n    this.quill.scrollSelectionIntoView();\n  }\n\n  prepareMatching(container: Element, nodeMatches: WeakMap<Node, Matcher[]>) {\n    const elementMatchers: Matcher[] = [];\n    const textMatchers: Matcher[] = [];\n    this.matchers.forEach((pair) => {\n      const [selector, matcher] = pair;\n      switch (selector) {\n        case Node.TEXT_NODE:\n          textMatchers.push(matcher);\n          break;\n        case Node.ELEMENT_NODE:\n          elementMatchers.push(matcher);\n          break;\n        default:\n          Array.from(container.querySelectorAll(selector)).forEach((node) => {\n            if (nodeMatches.has(node)) {\n              const matches = nodeMatches.get(node);\n              matches?.push(matcher);\n            } else {\n              nodeMatches.set(node, [matcher]);\n            }\n          });\n          break;\n      }\n    });\n    return [elementMatchers, textMatchers];\n  }\n}\n\nfunction applyFormat(\n  delta: Delta,\n  format: string,\n  value: unknown,\n  scroll: ScrollBlot,\n): Delta {\n  if (!scroll.query(format)) {\n    return delta;\n  }\n\n  return delta.reduce((newDelta, op) => {\n    if (!op.insert) return newDelta;\n    if (op.attributes && op.attributes[format]) {\n      return newDelta.push(op);\n    }\n    const formats = value ? { [format]: value } : {};\n    return newDelta.insert(op.insert, { ...formats, ...op.attributes });\n  }, new Delta());\n}\n\nfunction deltaEndsWith(delta: Delta, text: string) {\n  let endText = '';\n  for (\n    let i = delta.ops.length - 1;\n    i >= 0 && endText.length < text.length;\n    --i // eslint-disable-line no-plusplus\n  ) {\n    const op = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1 * text.length) === text;\n}\n\nfunction isLine(node: Node, scroll: ScrollBlot) {\n  if (!(node instanceof Element)) return false;\n  const match = scroll.query(node);\n  // @ts-expect-error\n  if (match && match.prototype instanceof EmbedBlot) return false;\n\n  return [\n    'address',\n    'article',\n    'blockquote',\n    'canvas',\n    'dd',\n    'div',\n    'dl',\n    'dt',\n    'fieldset',\n    'figcaption',\n    'figure',\n    'footer',\n    'form',\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    'header',\n    'iframe',\n    'li',\n    'main',\n    'nav',\n    'ol',\n    'output',\n    'p',\n    'pre',\n    'section',\n    'table',\n    'td',\n    'tr',\n    'ul',\n    'video',\n  ].includes(node.tagName.toLowerCase());\n}\n\nfunction isBetweenInlineElements(node: HTMLElement, scroll: ScrollBlot) {\n  return (\n    node.previousElementSibling &&\n    node.nextElementSibling &&\n    !isLine(node.previousElementSibling, scroll) &&\n    !isLine(node.nextElementSibling, scroll)\n  );\n}\n\nconst preNodes = new WeakMap();\nfunction isPre(node: Node | null) {\n  if (node == null) return false;\n  if (!preNodes.has(node)) {\n    // @ts-expect-error\n    if (node.tagName === 'PRE') {\n      preNodes.set(node, true);\n    } else {\n      preNodes.set(node, isPre(node.parentNode));\n    }\n  }\n  return preNodes.get(node);\n}\n\nfunction traverse(\n  scroll: ScrollBlot,\n  node: ChildNode,\n  elementMatchers: Matcher[],\n  textMatchers: Matcher[],\n  nodeMatches: WeakMap<Node, Matcher[]>,\n): Delta {\n  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce((delta: Delta, matcher) => {\n      return matcher(node, delta, scroll);\n    }, new Delta());\n  }\n  if (node.nodeType === node.ELEMENT_NODE) {\n    return Array.from(node.childNodes || []).reduce((delta, childNode) => {\n      let childrenDelta = traverse(\n        scroll,\n        childNode,\n        elementMatchers,\n        textMatchers,\n        nodeMatches,\n      );\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce((reducedDelta, matcher) => {\n          return matcher(childNode as HTMLElement, reducedDelta, scroll);\n        }, childrenDelta);\n        childrenDelta = (nodeMatches.get(childNode) || []).reduce(\n          (reducedDelta, matcher) => {\n            return matcher(childNode, reducedDelta, scroll);\n          },\n          childrenDelta,\n        );\n      }\n      return delta.concat(childrenDelta);\n    }, new Delta());\n  }\n  return new Delta();\n}\n\nfunction createMatchAlias(format: string) {\n  return (_node: Element, delta: Delta, scroll: ScrollBlot) => {\n    return applyFormat(delta, format, true, scroll);\n  };\n}\n\nfunction matchAttributor(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\n  const attributes = Attributor.keys(node);\n  const classes = ClassAttributor.keys(node);\n  const styles = StyleAttributor.keys(node);\n  const formats: Record<string, string | undefined> = {};\n  attributes\n    .concat(classes)\n    .concat(styles)\n    .forEach((name) => {\n      let attr = scroll.query(name, Scope.ATTRIBUTE) as Attributor;\n      if (attr != null) {\n        formats[attr.attrName] = attr.value(node);\n        if (formats[attr.attrName]) return;\n      }\n      attr = ATTRIBUTE_ATTRIBUTORS[name];\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n        formats[attr.attrName] = attr.value(node) || undefined;\n      }\n      attr = STYLE_ATTRIBUTORS[name];\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n        attr = STYLE_ATTRIBUTORS[name];\n        formats[attr.attrName] = attr.value(node) || undefined;\n      }\n    });\n\n  return Object.entries(formats).reduce(\n    (newDelta, [name, value]) => applyFormat(newDelta, name, value, scroll),\n    delta,\n  );\n}\n\nfunction matchBlot(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const match = scroll.query(node);\n  if (match == null) return delta;\n  // @ts-expect-error\n  if (match.prototype instanceof EmbedBlot) {\n    const embed = {};\n    // @ts-expect-error\n    const value = match.value(node);\n    if (value != null) {\n      // @ts-expect-error\n      embed[match.blotName] = value;\n      // @ts-expect-error\n      return new Delta().insert(embed, match.formats(node, scroll));\n    }\n  } else {\n    // @ts-expect-error\n    if (match.prototype instanceof BlockBlot && !deltaEndsWith(delta, '\\n')) {\n      delta.insert('\\n');\n    }\n    if (\n      'blotName' in match &&\n      'formats' in match &&\n      typeof match.formats === 'function'\n    ) {\n      return applyFormat(\n        delta,\n        match.blotName,\n        match.formats(node, scroll),\n        scroll,\n      );\n    }\n  }\n  return delta;\n}\n\nfunction matchBreak(node: Node, delta: Delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\n\nfunction matchCodeBlock(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const match = scroll.query('code-block');\n  const language =\n    match && 'formats' in match && typeof match.formats === 'function'\n      ? match.formats(node, scroll)\n      : true;\n  return applyFormat(delta, 'code-block', language, scroll);\n}\n\nfunction matchIgnore() {\n  return new Delta();\n}\n\nfunction matchIndent(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const match = scroll.query(node);\n  if (\n    match == null ||\n    // @ts-expect-error\n    match.blotName !== 'list' ||\n    !deltaEndsWith(delta, '\\n')\n  ) {\n    return delta;\n  }\n  let indent = -1;\n  let parent = node.parentNode;\n  while (parent != null) {\n    // @ts-expect-error\n    if (['OL', 'UL'].includes(parent.tagName)) {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.reduce((composed, op) => {\n    if (!op.insert) return composed;\n    if (op.attributes && typeof op.attributes.indent === 'number') {\n      return composed.push(op);\n    }\n    return composed.insert(op.insert, { indent, ...(op.attributes || {}) });\n  }, new Delta());\n}\n\nfunction matchList(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const element = node as Element;\n  let list = element.tagName === 'OL' ? 'ordered' : 'bullet';\n\n  const checkedAttr = element.getAttribute('data-checked');\n  if (checkedAttr) {\n    list = checkedAttr === 'true' ? 'checked' : 'unchecked';\n  }\n\n  return applyFormat(delta, 'list', list, scroll);\n}\n\nfunction matchNewline(node: Node, delta: Delta, scroll: ScrollBlot) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (\n      isLine(node, scroll) &&\n      (node.childNodes.length > 0 || node instanceof HTMLParagraphElement)\n    ) {\n      return delta.insert('\\n');\n    }\n    if (delta.length() > 0 && node.nextSibling) {\n      let nextSibling: Node | null = node.nextSibling;\n      while (nextSibling != null) {\n        if (isLine(nextSibling, scroll)) {\n          return delta.insert('\\n');\n        }\n        const match = scroll.query(nextSibling);\n        // @ts-expect-error\n        if (match && match.prototype instanceof BlockEmbed) {\n          return delta.insert('\\n');\n        }\n        nextSibling = nextSibling.firstChild;\n      }\n    }\n  }\n  return delta;\n}\n\nfunction matchStyles(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\n  const formats: Record<string, unknown> = {};\n  const style: Partial<CSSStyleDeclaration> = node.style || {};\n  if (style.fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.textDecoration === 'underline') {\n    formats.underline = true;\n  }\n  if (style.textDecoration === 'line-through') {\n    formats.strike = true;\n  }\n  if (\n    style.fontWeight?.startsWith('bold') ||\n    // @ts-expect-error Fix me later\n    parseInt(style.fontWeight, 10) >= 700\n  ) {\n    formats.bold = true;\n  }\n  delta = Object.entries(formats).reduce(\n    (newDelta, [name, value]) => applyFormat(newDelta, name, value, scroll),\n    delta,\n  );\n  // @ts-expect-error\n  if (parseFloat(style.textIndent || 0) > 0) {\n    // Could be 0.5in\n    return new Delta().insert('\\t').concat(delta);\n  }\n  return delta;\n}\n\nfunction matchTable(\n  node: HTMLTableRowElement,\n  delta: Delta,\n  scroll: ScrollBlot,\n) {\n  const table =\n    node.parentElement?.tagName === 'TABLE'\n      ? node.parentElement\n      : node.parentElement?.parentElement;\n  if (table != null) {\n    const rows = Array.from(table.querySelectorAll('tr'));\n    const row = rows.indexOf(node) + 1;\n    return applyFormat(delta, 'table', row, scroll);\n  }\n  return delta;\n}\n\nfunction matchText(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\n  // @ts-expect-error\n  let text = node.data as string;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentElement?.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (!isPre(node)) {\n    if (\n      text.trim().length === 0 &&\n      text.includes('\\n') &&\n      !isBetweenInlineElements(node, scroll)\n    ) {\n      return delta;\n    }\n    // convert all non-nbsp whitespace into regular space\n    text = text.replace(/[^\\S\\u00a0]/g, ' ');\n    // collapse consecutive spaces into one\n    text = text.replace(/ {2,}/g, ' ');\n    if (\n      (node.previousSibling == null &&\n        node.parentElement != null &&\n        isLine(node.parentElement, scroll)) ||\n      (node.previousSibling instanceof Element &&\n        isLine(node.previousSibling, scroll))\n    ) {\n      // block structure means we don't need leading space\n      text = text.replace(/^ /, '');\n    }\n    if (\n      (node.nextSibling == null &&\n        node.parentElement != null &&\n        isLine(node.parentElement, scroll)) ||\n      (node.nextSibling instanceof Element && isLine(node.nextSibling, scroll))\n    ) {\n      // block structure means we don't need trailing space\n      text = text.replace(/ $/, '');\n    }\n    // done removing whitespace and can normalize all to regular space\n    text = text.replaceAll('\\u00a0', ' ');\n  }\n  return delta.insert(text);\n}\n\nexport {\n  Clipboard as default,\n  matchAttributor,\n  matchBlot,\n  matchNewline,\n  matchText,\n  traverse,\n};\n","import { Scope } from 'parchment';\nimport type Delta from 'quill-delta';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type Scroll from '../blots/scroll.js';\nimport type { Range } from '../core/selection.js';\n\nexport interface HistoryOptions {\n  userOnly: boolean;\n  delay: number;\n  maxStack: number;\n}\n\nexport interface StackItem {\n  delta: Delta;\n  range: Range | null;\n}\n\ninterface Stack {\n  undo: StackItem[];\n  redo: StackItem[];\n}\n\nclass History extends Module<HistoryOptions> {\n  static DEFAULTS: HistoryOptions = {\n    delay: 1000,\n    maxStack: 100,\n    userOnly: false,\n  };\n\n  lastRecorded = 0;\n  ignoreChange = false;\n  stack: Stack = { undo: [], redo: [] };\n  currentRange: Range | null = null;\n\n  constructor(quill: Quill, options: Partial<HistoryOptions>) {\n    super(quill, options);\n    this.quill.on(\n      Quill.events.EDITOR_CHANGE,\n      (eventName, value, oldValue, source) => {\n        if (eventName === Quill.events.SELECTION_CHANGE) {\n          if (value && source !== Quill.sources.SILENT) {\n            this.currentRange = value;\n          }\n        } else if (eventName === Quill.events.TEXT_CHANGE) {\n          if (!this.ignoreChange) {\n            if (!this.options.userOnly || source === Quill.sources.USER) {\n              this.record(value, oldValue);\n            } else {\n              this.transform(value);\n            }\n          }\n\n          this.currentRange = transformRange(this.currentRange, value);\n        }\n      },\n    );\n\n    this.quill.keyboard.addBinding(\n      { key: 'z', shortKey: true },\n      this.undo.bind(this),\n    );\n    this.quill.keyboard.addBinding(\n      { key: ['z', 'Z'], shortKey: true, shiftKey: true },\n      this.redo.bind(this),\n    );\n    if (/Win/i.test(navigator.platform)) {\n      this.quill.keyboard.addBinding(\n        { key: 'y', shortKey: true },\n        this.redo.bind(this),\n      );\n    }\n\n    this.quill.root.addEventListener('beforeinput', (event) => {\n      if (event.inputType === 'historyUndo') {\n        this.undo();\n        event.preventDefault();\n      } else if (event.inputType === 'historyRedo') {\n        this.redo();\n        event.preventDefault();\n      }\n    });\n  }\n\n  change(source: 'undo' | 'redo', dest: 'redo' | 'undo') {\n    if (this.stack[source].length === 0) return;\n    const item = this.stack[source].pop();\n    if (!item) return;\n    const base = this.quill.getContents();\n    const inverseDelta = item.delta.invert(base);\n    this.stack[dest].push({\n      delta: inverseDelta,\n      range: transformRange(item.range, inverseDelta),\n    });\n    this.lastRecorded = 0;\n    this.ignoreChange = true;\n    this.quill.updateContents(item.delta, Quill.sources.USER);\n    this.ignoreChange = false;\n\n    this.restoreSelection(item);\n  }\n\n  clear() {\n    this.stack = { undo: [], redo: [] };\n  }\n\n  cutoff() {\n    this.lastRecorded = 0;\n  }\n\n  record(changeDelta: Delta, oldDelta: Delta) {\n    if (changeDelta.ops.length === 0) return;\n    this.stack.redo = [];\n    let undoDelta = changeDelta.invert(oldDelta);\n    let undoRange = this.currentRange;\n    const timestamp = Date.now();\n    if (\n      // @ts-expect-error Fix me later\n      this.lastRecorded + this.options.delay > timestamp &&\n      this.stack.undo.length > 0\n    ) {\n      const item = this.stack.undo.pop();\n      if (item) {\n        undoDelta = undoDelta.compose(item.delta);\n        undoRange = item.range;\n      }\n    } else {\n      this.lastRecorded = timestamp;\n    }\n    if (undoDelta.length() === 0) return;\n    this.stack.undo.push({ delta: undoDelta, range: undoRange });\n    // @ts-expect-error Fix me later\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n\n  redo() {\n    this.change('redo', 'undo');\n  }\n\n  transform(delta: Delta) {\n    transformStack(this.stack.undo, delta);\n    transformStack(this.stack.redo, delta);\n  }\n\n  undo() {\n    this.change('undo', 'redo');\n  }\n\n  protected restoreSelection(stackItem: StackItem) {\n    if (stackItem.range) {\n      this.quill.setSelection(stackItem.range, Quill.sources.USER);\n    } else {\n      const index = getLastChangeIndex(this.quill.scroll, stackItem.delta);\n      this.quill.setSelection(index, Quill.sources.USER);\n    }\n  }\n}\n\nfunction transformStack(stack: StackItem[], delta: Delta) {\n  let remoteDelta = delta;\n  for (let i = stack.length - 1; i >= 0; i -= 1) {\n    const oldItem = stack[i];\n    stack[i] = {\n      delta: remoteDelta.transform(oldItem.delta, true),\n      range: oldItem.range && transformRange(oldItem.range, remoteDelta),\n    };\n    remoteDelta = oldItem.delta.transform(remoteDelta);\n    if (stack[i].delta.length() === 0) {\n      stack.splice(i, 1);\n    }\n  }\n}\n\nfunction endsWithNewlineChange(scroll: Scroll, delta: Delta) {\n  const lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some((attr) => {\n      return scroll.query(attr, Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\n\nfunction getLastChangeIndex(scroll: Scroll, delta: Delta) {\n  const deleteLength = delta.reduce((length, op) => {\n    return length + (op.delete || 0);\n  }, 0);\n  let changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(scroll, delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\n\nfunction transformRange(range: Range | null, delta: Delta) {\n  if (!range) return range;\n  const start = delta.transformPosition(range.index);\n  const end = delta.transformPosition(range.index + range.length);\n  return { index: start, length: end - start };\n}\n\nexport { History as default, getLastChangeIndex };\n","import Delta from 'quill-delta';\nimport type Quill from '../core/quill.js';\nimport Emitter from '../core/emitter.js';\nimport Module from '../core/module.js';\nimport type { Range } from '../core/selection.js';\n\ninterface UploaderOptions {\n  mimetypes: string[];\n  handler: (this: { quill: Quill }, range: Range, files: File[]) => void;\n}\n\nclass Uploader extends Module<UploaderOptions> {\n  static DEFAULTS: UploaderOptions;\n\n  constructor(quill: Quill, options: Partial<UploaderOptions>) {\n    super(quill, options);\n    quill.root.addEventListener('drop', (e) => {\n      e.preventDefault();\n      let native: ReturnType<typeof document.createRange> | null = null;\n      if (document.caretRangeFromPoint) {\n        native = document.caretRangeFromPoint(e.clientX, e.clientY);\n        // @ts-expect-error\n      } else if (document.caretPositionFromPoint) {\n        // @ts-expect-error\n        const position = document.caretPositionFromPoint(e.clientX, e.clientY);\n        native = document.createRange();\n        native.setStart(position.offsetNode, position.offset);\n        native.setEnd(position.offsetNode, position.offset);\n      }\n\n      const normalized = native && quill.selection.normalizeNative(native);\n      if (normalized) {\n        const range = quill.selection.normalizedToRange(normalized);\n        if (e.dataTransfer?.files) {\n          this.upload(range, e.dataTransfer.files);\n        }\n      }\n    });\n  }\n\n  upload(range: Range, files: FileList | File[]) {\n    const uploads: File[] = [];\n    Array.from(files).forEach((file) => {\n      if (file && this.options.mimetypes?.includes(file.type)) {\n        uploads.push(file);\n      }\n    });\n    if (uploads.length > 0) {\n      // @ts-expect-error Fix me later\n      this.options.handler.call(this, range, uploads);\n    }\n  }\n}\n\nUploader.DEFAULTS = {\n  mimetypes: ['image/png', 'image/jpeg'],\n  handler(range: Range, files: File[]) {\n    if (!this.quill.scroll.query('image')) {\n      return;\n    }\n    const promises = files.map<Promise<string>>((file) => {\n      return new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result as string);\n        };\n        reader.readAsDataURL(file);\n      });\n    });\n    Promise.all(promises).then((images) => {\n      const update = images.reduce((delta: Delta, image) => {\n        return delta.insert({ image });\n      }, new Delta().retain(range.index).delete(range.length)) as Delta;\n      this.quill.updateContents(update, Emitter.sources.USER);\n      this.quill.setSelection(\n        range.index + images.length,\n        Emitter.sources.SILENT,\n      );\n    });\n  },\n};\n\nexport default Uploader;\n","import Delta from 'quill-delta';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type { Range } from '../core/selection.js';\nimport { deleteRange } from './keyboard.js';\n\nconst INSERT_TYPES = ['insertText', 'insertReplacementText'];\n\nclass Input extends Module {\n  constructor(quill: Quill, options: Record<string, never>) {\n    super(quill, options);\n\n    quill.root.addEventListener('beforeinput', (event) => {\n      this.handleBeforeInput(event);\n    });\n\n    // Gboard with English input on Android triggers `compositionstart` sometimes even\n    // users are not going to type anything.\n    if (!/Android/i.test(navigator.userAgent)) {\n      quill.on(Quill.events.COMPOSITION_BEFORE_START, () => {\n        this.handleCompositionStart();\n      });\n    }\n  }\n\n  private deleteRange(range: Range) {\n    deleteRange({ range, quill: this.quill });\n  }\n\n  private replaceText(range: Range, text = '') {\n    if (range.length === 0) return false;\n\n    if (text) {\n      // Follow the native behavior that inherits the formats of the first character\n      const formats = this.quill.getFormat(range.index, 1);\n      this.deleteRange(range);\n      this.quill.updateContents(\n        new Delta().retain(range.index).insert(text, formats),\n        Quill.sources.USER,\n      );\n    } else {\n      this.deleteRange(range);\n    }\n\n    this.quill.setSelection(range.index + text.length, 0, Quill.sources.SILENT);\n    return true;\n  }\n\n  private handleBeforeInput(event: InputEvent) {\n    if (\n      this.quill.composition.isComposing ||\n      event.defaultPrevented ||\n      !INSERT_TYPES.includes(event.inputType)\n    ) {\n      return;\n    }\n\n    const staticRange = event.getTargetRanges\n      ? event.getTargetRanges()[0]\n      : null;\n    if (!staticRange || staticRange.collapsed === true) {\n      return;\n    }\n\n    const text = getPlainTextFromInputEvent(event);\n    if (text == null) {\n      return;\n    }\n    const normalized = this.quill.selection.normalizeNative(staticRange);\n    const range = normalized\n      ? this.quill.selection.normalizedToRange(normalized)\n      : null;\n    if (range && this.replaceText(range, text)) {\n      event.preventDefault();\n    }\n  }\n\n  private handleCompositionStart() {\n    const range = this.quill.getSelection();\n    if (range) {\n      this.replaceText(range);\n    }\n  }\n}\n\nfunction getPlainTextFromInputEvent(event: InputEvent) {\n  // When `inputType` is \"insertText\":\n  // - `event.data` should be string (Safari uses `event.dataTransfer`).\n  // - `event.dataTransfer` should be null.\n  // When `inputType` is \"insertReplacementText\":\n  // - `event.data` should be null.\n  // - `event.dataTransfer` should contain \"text/plain\" data.\n\n  if (typeof event.data === 'string') {\n    return event.data;\n  }\n  if (event.dataTransfer?.types.includes('text/plain')) {\n    return event.dataTransfer.getData('text/plain');\n  }\n  return null;\n}\n\nexport default Input;\n","import { ParentBlot } from 'parchment';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\n\nconst isMac = /Mac/i.test(navigator.platform);\n\n// Export for testing\nexport const TTL_FOR_VALID_SELECTION_CHANGE = 100;\n\n// A loose check to determine if the shortcut can move the caret before a UI node:\n// <ANY_PARENT>[CARET]<div class=\"ql-ui\"></div>[CONTENT]</ANY_PARENT>\nconst canMoveCaretBeforeUINode = (event: KeyboardEvent) => {\n  if (\n    event.key === 'ArrowLeft' ||\n    event.key === 'ArrowRight' || // RTL scripts or moving from the end of the previous line\n    event.key === 'ArrowUp' ||\n    event.key === 'ArrowDown' ||\n    event.key === 'Home'\n  ) {\n    return true;\n  }\n\n  if (isMac && event.key === 'a' && event.ctrlKey === true) {\n    return true;\n  }\n\n  return false;\n};\n\nclass UINode extends Module {\n  isListening = false;\n  selectionChangeDeadline = 0;\n\n  constructor(quill: Quill, options: Record<string, never>) {\n    super(quill, options);\n\n    this.handleArrowKeys();\n    this.handleNavigationShortcuts();\n  }\n\n  private handleArrowKeys() {\n    this.quill.keyboard.addBinding({\n      key: ['ArrowLeft', 'ArrowRight'],\n      offset: 0,\n      shiftKey: null,\n      handler(range, { line, event }) {\n        if (!(line instanceof ParentBlot) || !line.uiNode) {\n          return true;\n        }\n\n        const isRTL = getComputedStyle(line.domNode)['direction'] === 'rtl';\n        if (\n          (isRTL && event.key !== 'ArrowRight') ||\n          (!isRTL && event.key !== 'ArrowLeft')\n        ) {\n          return true;\n        }\n\n        this.quill.setSelection(\n          range.index - 1,\n          range.length + (event.shiftKey ? 1 : 0),\n          Quill.sources.USER,\n        );\n        return false;\n      },\n    });\n  }\n\n  private handleNavigationShortcuts() {\n    this.quill.root.addEventListener('keydown', (event) => {\n      if (!event.defaultPrevented && canMoveCaretBeforeUINode(event)) {\n        this.ensureListeningToSelectionChange();\n      }\n    });\n  }\n\n  /**\n   * We only listen to the `selectionchange` event when\n   * there is an intention of moving the caret to the beginning using shortcuts.\n   * This is primarily implemented to prevent infinite loops, as we are changing\n   * the selection within the handler of a `selectionchange` event.\n   */\n  private ensureListeningToSelectionChange() {\n    this.selectionChangeDeadline = Date.now() + TTL_FOR_VALID_SELECTION_CHANGE;\n\n    if (this.isListening) return;\n    this.isListening = true;\n\n    const listener = () => {\n      this.isListening = false;\n\n      if (Date.now() <= this.selectionChangeDeadline) {\n        this.handleSelectionChange();\n      }\n    };\n\n    document.addEventListener('selectionchange', listener, {\n      once: true,\n    });\n  }\n\n  private handleSelectionChange() {\n    const selection = document.getSelection();\n    if (!selection) return;\n    const range = selection.getRangeAt(0);\n    if (range.collapsed !== true || range.startOffset !== 0) return;\n\n    const line = this.quill.scroll.find(range.startContainer);\n    if (!(line instanceof ParentBlot) || !line.uiNode) return;\n\n    const newRange = document.createRange();\n    newRange.setStartAfter(line.uiNode);\n    newRange.setEndAfter(line.uiNode);\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n}\n\nexport default UINode;\n","import Quill, { Parchment, Range } from './core/quill.js';\nimport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n} from './core/quill.js';\n\nimport Block, { BlockEmbed } from './blots/block.js';\nimport Break from './blots/break.js';\nimport Container from './blots/container.js';\nimport Cursor from './blots/cursor.js';\nimport Embed from './blots/embed.js';\nimport Inline from './blots/inline.js';\nimport Scroll from './blots/scroll.js';\nimport TextBlot from './blots/text.js';\n\nimport Clipboard from './modules/clipboard.js';\nimport History from './modules/history.js';\nimport Keyboard from './modules/keyboard.js';\nimport Uploader from './modules/uploader.js';\nimport Delta, { Op, OpIterator, AttributeMap } from 'quill-delta';\nimport Input from './modules/input.js';\nimport UINode from './modules/uiNode.js';\n\nexport { default as Module } from './core/module.js';\nexport { Delta, Op, OpIterator, AttributeMap, Parchment, Range };\nexport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n};\n\nQuill.register({\n  'blots/block': Block,\n  'blots/block/embed': BlockEmbed,\n  'blots/break': Break,\n  'blots/container': Container,\n  'blots/cursor': Cursor,\n  'blots/embed': Embed,\n  'blots/inline': Inline,\n  'blots/scroll': Scroll,\n  'blots/text': TextBlot,\n\n  'modules/clipboard': Clipboard,\n  'modules/history': History,\n  'modules/keyboard': Keyboard,\n  'modules/uploader': Uploader,\n  'modules/input': Input,\n  'modules/uiNode': UINode,\n});\n\nexport default Quill;\n","import { ClassAttributor, Scope } from 'parchment';\n\nclass IndentAttributor extends ClassAttributor {\n  add(node: HTMLElement, value: string | number) {\n    let normalizedValue = 0;\n    if (value === '+1' || value === '-1') {\n      const indent = this.value(node) || 0;\n      normalizedValue = value === '+1' ? indent + 1 : indent - 1;\n    } else if (typeof value === 'number') {\n      normalizedValue = value;\n    }\n    if (normalizedValue === 0) {\n      this.remove(node);\n      return true;\n    }\n    return super.add(node, normalizedValue.toString());\n  }\n\n  canAdd(node: HTMLElement, value: string) {\n    return super.canAdd(node, value) || super.canAdd(node, parseInt(value, 10));\n  }\n\n  value(node: HTMLElement) {\n    return parseInt(super.value(node), 10) || undefined; // Don't return NaN\n  }\n}\n\nconst IndentClass = new IndentAttributor('indent', 'ql-indent', {\n  scope: Scope.BLOCK,\n  // @ts-expect-error\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8],\n});\n\nexport default IndentClass;\n","import Block from '../blots/block.js';\n\nclass Blockquote extends Block {\n  static blotName = 'blockquote';\n  static tagName = 'blockquote';\n}\n\nexport default Blockquote;\n","import Block from '../blots/block.js';\n\nclass Header extends Block {\n  static blotName = 'header';\n  static tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n\n  static formats(domNode: Element) {\n    return this.tagName.indexOf(domNode.tagName) + 1;\n  }\n}\n\nexport default Header;\n","import Block from '../blots/block.js';\nimport Container from '../blots/container.js';\nimport type Scroll from '../blots/scroll.js';\nimport Quill from '../core/quill.js';\n\nclass ListContainer extends Container {}\nListContainer.blotName = 'list-container';\nListContainer.tagName = 'OL';\n\nclass ListItem extends Block {\n  static create(value: string) {\n    const node = super.create() as HTMLElement;\n    node.setAttribute('data-list', value);\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    return domNode.getAttribute('data-list') || undefined;\n  }\n\n  static register() {\n    Quill.register(ListContainer);\n  }\n\n  constructor(scroll: Scroll, domNode: HTMLElement) {\n    super(scroll, domNode);\n    const ui = domNode.ownerDocument.createElement('span');\n    const listEventHandler = (e: Event) => {\n      if (!scroll.isEnabled()) return;\n      const format = this.statics.formats(domNode, scroll);\n      if (format === 'checked') {\n        this.format('list', 'unchecked');\n        e.preventDefault();\n      } else if (format === 'unchecked') {\n        this.format('list', 'checked');\n        e.preventDefault();\n      }\n    };\n    ui.addEventListener('mousedown', listEventHandler);\n    ui.addEventListener('touchstart', listEventHandler);\n    this.attachUI(ui);\n  }\n\n  format(name: string, value: string) {\n    if (name === this.statics.blotName && value) {\n      this.domNode.setAttribute('data-list', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nListItem.blotName = 'list';\nListItem.tagName = 'LI';\n\nListContainer.allowedChildren = [ListItem];\nListItem.requiredContainer = ListContainer;\n\nexport { ListContainer, ListItem as default };\n","import Inline from '../blots/inline.js';\n\nclass Bold extends Inline {\n  static blotName = 'bold';\n  static tagName = ['STRONG', 'B'];\n\n  static create() {\n    return super.create();\n  }\n\n  static formats() {\n    return true;\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\n      this.replaceWith(this.statics.blotName);\n    }\n  }\n}\n\nexport default Bold;\n","import Bold from './bold.js';\n\nclass Italic extends Bold {\n  static blotName = 'italic';\n  static tagName = ['EM', 'I'];\n}\n\nexport default Italic;\n","import Inline from '../blots/inline.js';\n\nclass Link extends Inline {\n  static blotName = 'link';\n  static tagName = 'A';\n  static SANITIZED_URL = 'about:blank';\n  static PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel', 'sms'];\n\n  static create(value: string) {\n    const node = super.create(value) as HTMLElement;\n    node.setAttribute('href', this.sanitize(value));\n    node.setAttribute('rel', 'noopener noreferrer');\n    node.setAttribute('target', '_blank');\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    return domNode.getAttribute('href');\n  }\n\n  static sanitize(url: string) {\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n  }\n\n  format(name: string, value: unknown) {\n    if (name !== this.statics.blotName || !value) {\n      super.format(name, value);\n    } else {\n      // @ts-expect-error\n      this.domNode.setAttribute('href', this.constructor.sanitize(value));\n    }\n  }\n}\n\nfunction sanitize(url: string, protocols: string[]) {\n  const anchor = document.createElement('a');\n  anchor.href = url;\n  const protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\n\nexport { Link as default, sanitize };\n","import Inline from '../blots/inline.js';\n\nclass Script extends Inline {\n  static blotName = 'script';\n  static tagName = ['SUB', 'SUP'];\n\n  static create(value: 'super' | 'sub' | (string & {})) {\n    if (value === 'super') {\n      return document.createElement('sup');\n    }\n    if (value === 'sub') {\n      return document.createElement('sub');\n    }\n    return super.create(value);\n  }\n\n  static formats(domNode: HTMLElement) {\n    if (domNode.tagName === 'SUB') return 'sub';\n    if (domNode.tagName === 'SUP') return 'super';\n    return undefined;\n  }\n}\n\nexport default Script;\n","import Bold from './bold.js';\n\nclass Strike extends Bold {\n  static blotName = 'strike';\n  static tagName = ['S', 'STRIKE'];\n}\n\nexport default Strike;\n","import Inline from '../blots/inline.js';\n\nclass Underline extends Inline {\n  static blotName = 'underline';\n  static tagName = 'U';\n}\n\nexport default Underline;\n","import Embed from '../blots/embed.js';\n\nclass Formula extends Embed {\n  static blotName = 'formula';\n  static className = 'ql-formula';\n  static tagName = 'SPAN';\n\n  static create(value: string) {\n    // @ts-expect-error\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n    const node = super.create(value) as Element;\n    if (typeof value === 'string') {\n      // @ts-expect-error\n      window.katex.render(value, node, {\n        throwOnError: false,\n        errorColor: '#f00',\n      });\n      node.setAttribute('data-value', value);\n    }\n    return node;\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('data-value');\n  }\n\n  html() {\n    const { formula } = this.value();\n    return `<span>${formula}</span>`;\n  }\n}\n\nexport default Formula;\n","import { EmbedBlot } from 'parchment';\nimport { sanitize } from './link.js';\n\nconst ATTRIBUTES = ['alt', 'height', 'width'];\n\nclass Image extends EmbedBlot {\n  static blotName = 'image';\n  static tagName = 'IMG';\n\n  static create(value: string) {\n    const node = super.create(value) as Element;\n    if (typeof value === 'string') {\n      node.setAttribute('src', this.sanitize(value));\n    }\n    return node;\n  }\n\n  static formats(domNode: Element) {\n    return ATTRIBUTES.reduce(\n      (formats: Record<string, string | null>, attribute) => {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      },\n      {},\n    );\n  }\n\n  static match(url: string) {\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\n  }\n\n  static sanitize(url: string) {\n    return sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('src');\n  }\n\n  domNode: HTMLImageElement;\n\n  format(name: string, value: string) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n}\n\nexport default Image;\n","import { BlockEmbed } from '../blots/block.js';\nimport Link from './link.js';\n\nconst ATTRIBUTES = ['height', 'width'];\n\nclass Video extends BlockEmbed {\n  static blotName = 'video';\n  static className = 'ql-video';\n  static tagName = 'IFRAME';\n\n  static create(value: string) {\n    const node = super.create(value) as Element;\n    node.setAttribute('frameborder', '0');\n    node.setAttribute('allowfullscreen', 'true');\n    node.setAttribute('src', this.sanitize(value));\n    return node;\n  }\n\n  static formats(domNode: Element) {\n    return ATTRIBUTES.reduce(\n      (formats: Record<string, string | null>, attribute) => {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      },\n      {},\n    );\n  }\n\n  static sanitize(url: string) {\n    return Link.sanitize(url);\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('src');\n  }\n\n  domNode: HTMLVideoElement;\n\n  format(name: string, value: string) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  html() {\n    const { video } = this.value();\n    return `<a href=\"${video}\">${video}</a>`;\n  }\n}\n\nexport default Video;\n","import Delta from 'quill-delta';\nimport { ClassAttributor, Scope } from 'parchment';\nimport type { Blot, ScrollBlot } from 'parchment';\nimport Inline from '../blots/inline.js';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport { blockDelta } from '../blots/block.js';\nimport BreakBlot from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport CodeBlock, { CodeBlockContainer } from '../formats/code.js';\nimport { traverse } from './clipboard.js';\n\nconst TokenAttributor = new ClassAttributor('code-token', 'hljs', {\n  scope: Scope.INLINE,\n});\nclass CodeToken extends Inline {\n  static formats(node: Element, scroll: ScrollBlot) {\n    while (node != null && node !== scroll.domNode) {\n      if (node.classList && node.classList.contains(CodeBlock.className)) {\n        // @ts-expect-error\n        return super.formats(node, scroll);\n      }\n      // @ts-expect-error\n      node = node.parentNode;\n    }\n    return undefined;\n  }\n\n  constructor(scroll: ScrollBlot, domNode: Node, value: unknown) {\n    // @ts-expect-error\n    super(scroll, domNode, value);\n    TokenAttributor.add(this.domNode, value);\n  }\n\n  format(format: string, value: unknown) {\n    if (format !== CodeToken.blotName) {\n      super.format(format, value);\n    } else if (value) {\n      TokenAttributor.add(this.domNode, value);\n    } else {\n      TokenAttributor.remove(this.domNode);\n      this.domNode.classList.remove(this.statics.className);\n    }\n  }\n\n  optimize(...args: unknown[]) {\n    // @ts-expect-error\n    super.optimize(...args);\n    if (!TokenAttributor.value(this.domNode)) {\n      this.unwrap();\n    }\n  }\n}\nCodeToken.blotName = 'code-token';\nCodeToken.className = 'ql-token';\n\nclass SyntaxCodeBlock extends CodeBlock {\n  static create(value: unknown) {\n    const domNode = super.create(value);\n    if (typeof value === 'string') {\n      domNode.setAttribute('data-language', value);\n    }\n    return domNode;\n  }\n\n  static formats(domNode: Node) {\n    // @ts-expect-error\n    return domNode.getAttribute('data-language') || 'plain';\n  }\n\n  static register() {} // Syntax module will register\n\n  format(name: string, value: unknown) {\n    if (name === this.statics.blotName && value) {\n      // @ts-expect-error\n      this.domNode.setAttribute('data-language', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  replaceWith(name: string | Blot, value?: any) {\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\n    return super.replaceWith(name, value);\n  }\n}\n\nclass SyntaxCodeBlockContainer extends CodeBlockContainer {\n  forceNext?: boolean;\n  cachedText?: string | null;\n\n  attach() {\n    super.attach();\n    this.forceNext = false;\n    // @ts-expect-error\n    this.scroll.emitMount(this);\n  }\n\n  format(name: string, value: unknown) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n      this.children.forEach((child) => {\n        // @ts-expect-error\n        child.format(name, value);\n      });\n    }\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n    }\n    super.formatAt(index, length, name, value);\n  }\n\n  highlight(\n    highlight: (text: string, language: string) => Delta,\n    forced = false,\n  ) {\n    if (this.children.head == null) return;\n    const nodes = Array.from(this.domNode.childNodes).filter(\n      (node) => node !== this.uiNode,\n    );\n    const text = `${nodes.map((node) => node.textContent).join('\\n')}\\n`;\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n    if (forced || this.forceNext || this.cachedText !== text) {\n      if (text.trim().length > 0 || this.cachedText == null) {\n        const oldDelta = this.children.reduce((delta, child) => {\n          // @ts-expect-error\n          return delta.concat(blockDelta(child, false));\n        }, new Delta());\n        const delta = highlight(text, language);\n        oldDelta.diff(delta).reduce((index, { retain, attributes }) => {\n          // Should be all retains\n          if (!retain) return index;\n          if (attributes) {\n            Object.keys(attributes).forEach((format) => {\n              if (\n                [SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)\n              ) {\n                // @ts-expect-error\n                this.formatAt(index, retain, format, attributes[format]);\n              }\n            });\n          }\n          // @ts-expect-error\n          return index + retain;\n        }, 0);\n      }\n      this.cachedText = text;\n      this.forceNext = false;\n    }\n  }\n\n  html(index: number, length: number) {\n    const [codeBlock] = this.children.find(index);\n    const language = codeBlock\n      ? SyntaxCodeBlock.formats(codeBlock.domNode)\n      : 'plain';\n\n    return `<pre data-language=\"${language}\">\\n${escapeText(\n      this.code(index, length),\n    )}\\n</pre>`;\n  }\n\n  optimize(context: Record<string, any>) {\n    super.optimize(context);\n    if (\n      this.parent != null &&\n      this.children.head != null &&\n      this.uiNode != null\n    ) {\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n      // @ts-expect-error\n      if (language !== this.uiNode.value) {\n        // @ts-expect-error\n        this.uiNode.value = language;\n      }\n    }\n  }\n}\n\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\nSyntaxCodeBlock.allowedChildren = [CodeToken, CursorBlot, TextBlot, BreakBlot];\n\ninterface SyntaxOptions {\n  interval: number;\n  languages: { key: string; label: string }[];\n  hljs: any;\n}\n\nconst highlight = (lib: any, language: string, text: string) => {\n  if (typeof lib.versionString === 'string') {\n    const majorVersion = lib.versionString.split('.')[0];\n    if (parseInt(majorVersion, 10) >= 11) {\n      return lib.highlight(text, { language }).value;\n    }\n  }\n  return lib.highlight(language, text).value;\n};\n\nclass Syntax extends Module<SyntaxOptions> {\n  static DEFAULTS: SyntaxOptions & { hljs: any };\n\n  static register() {\n    Quill.register(CodeToken, true);\n    Quill.register(SyntaxCodeBlock, true);\n    Quill.register(SyntaxCodeBlockContainer, true);\n  }\n\n  languages: Record<string, true>;\n\n  constructor(quill: Quill, options: Partial<SyntaxOptions>) {\n    super(quill, options);\n    if (this.options.hljs == null) {\n      throw new Error(\n        'Syntax module requires highlight.js. Please include the library on the page before Quill.',\n      );\n    }\n    // @ts-expect-error Fix me later\n    this.languages = this.options.languages.reduce(\n      (memo: Record<string, unknown>, { key }) => {\n        memo[key] = true;\n        return memo;\n      },\n      {},\n    );\n    this.highlightBlot = this.highlightBlot.bind(this);\n    this.initListener();\n    this.initTimer();\n  }\n\n  initListener() {\n    this.quill.on(Quill.events.SCROLL_BLOT_MOUNT, (blot: Blot) => {\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\n      const select = this.quill.root.ownerDocument.createElement('select');\n      // @ts-expect-error Fix me later\n      this.options.languages.forEach(({ key, label }) => {\n        const option = select.ownerDocument.createElement('option');\n        option.textContent = label;\n        option.setAttribute('value', key);\n        select.appendChild(option);\n      });\n      select.addEventListener('change', () => {\n        blot.format(SyntaxCodeBlock.blotName, select.value);\n        this.quill.root.focus(); // Prevent scrolling\n        this.highlight(blot, true);\n      });\n      if (blot.uiNode == null) {\n        blot.attachUI(select);\n        if (blot.children.head) {\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\n        }\n      }\n    });\n  }\n\n  initTimer() {\n    let timer: ReturnType<typeof setTimeout> | null = null;\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(() => {\n        this.highlight();\n        timer = null;\n      }, this.options.interval);\n    });\n  }\n\n  highlight(blot: SyntaxCodeBlockContainer | null = null, force = false) {\n    if (this.quill.selection.composing) return;\n    this.quill.update(Quill.sources.USER);\n    const range = this.quill.getSelection();\n    const blots =\n      blot == null\n        ? this.quill.scroll.descendants(SyntaxCodeBlockContainer)\n        : [blot];\n    blots.forEach((container) => {\n      container.highlight(this.highlightBlot, force);\n    });\n    this.quill.update(Quill.sources.SILENT);\n    if (range != null) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    }\n  }\n\n  highlightBlot(text: string, language = 'plain') {\n    language = this.languages[language] ? language : 'plain';\n    if (language === 'plain') {\n      return escapeText(text)\n        .split('\\n')\n        .reduce((delta, line, i) => {\n          if (i !== 0) {\n            delta.insert('\\n', { [CodeBlock.blotName]: language });\n          }\n          return delta.insert(line);\n        }, new Delta());\n    }\n    const container = this.quill.root.ownerDocument.createElement('div');\n    container.classList.add(CodeBlock.className);\n    container.innerHTML = highlight(this.options.hljs, language, text);\n    return traverse(\n      this.quill.scroll,\n      container,\n      [\n        (node, delta) => {\n          // @ts-expect-error\n          const value = TokenAttributor.value(node);\n          if (value) {\n            return delta.compose(\n              new Delta().retain(delta.length(), {\n                [CodeToken.blotName]: value,\n              }),\n            );\n          }\n          return delta;\n        },\n      ],\n      [\n        (node, delta) => {\n          // @ts-expect-error\n          return node.data.split('\\n').reduce((memo, nodeText, i) => {\n            if (i !== 0) memo.insert('\\n', { [CodeBlock.blotName]: language });\n            return memo.insert(nodeText);\n          }, delta);\n        },\n      ],\n      new WeakMap(),\n    );\n  }\n}\nSyntax.DEFAULTS = {\n  hljs: (() => {\n    return window.hljs;\n  })(),\n  interval: 1000,\n  languages: [\n    { key: 'plain', label: 'Plain' },\n    { key: 'bash', label: 'Bash' },\n    { key: 'cpp', label: 'C++' },\n    { key: 'cs', label: 'C#' },\n    { key: 'css', label: 'CSS' },\n    { key: 'diff', label: 'Diff' },\n    { key: 'xml', label: 'HTML/XML' },\n    { key: 'java', label: 'Java' },\n    { key: 'javascript', label: 'JavaScript' },\n    { key: 'markdown', label: 'Markdown' },\n    { key: 'php', label: 'PHP' },\n    { key: 'python', label: 'Python' },\n    { key: 'ruby', label: 'Ruby' },\n    { key: 'sql', label: 'SQL' },\n  ],\n};\n\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default };\n","import type { LinkedList } from 'parchment';\nimport Block from '../blots/block.js';\nimport Container from '../blots/container.js';\n\nclass TableCell extends Block {\n  static blotName = 'table';\n  static tagName = 'TD';\n\n  static create(value: string) {\n    const node = super.create() as HTMLElement;\n    if (value) {\n      node.setAttribute('data-row', value);\n    } else {\n      node.setAttribute('data-row', tableId());\n    }\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    if (domNode.hasAttribute('data-row')) {\n      return domNode.getAttribute('data-row');\n    }\n    return undefined;\n  }\n\n  next: this | null;\n\n  cellOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n\n  format(name: string, value: string) {\n    if (name === TableCell.blotName && value) {\n      this.domNode.setAttribute('data-row', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  row(): TableRow {\n    return this.parent as TableRow;\n  }\n\n  rowOffset() {\n    if (this.row()) {\n      return this.row().rowOffset();\n    }\n    return -1;\n  }\n\n  table() {\n    return this.row() && this.row().table();\n  }\n}\n\nclass TableRow extends Container {\n  static blotName = 'table-row';\n  static tagName = 'TR';\n\n  children: LinkedList<TableCell>;\n  next: this | null;\n\n  checkMerge() {\n    // @ts-expect-error\n    if (super.checkMerge() && this.next.children.head != null) {\n      // @ts-expect-error\n      const thisHead = this.children.head.formats();\n      // @ts-expect-error\n      const thisTail = this.children.tail.formats();\n      // @ts-expect-error\n      const nextHead = this.next.children.head.formats();\n      // @ts-expect-error\n      const nextTail = this.next.children.tail.formats();\n      return (\n        thisHead.table === thisTail.table &&\n        thisHead.table === nextHead.table &&\n        thisHead.table === nextTail.table\n      );\n    }\n    return false;\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    this.children.forEach((child) => {\n      if (child.next == null) return;\n      const childFormats = child.formats();\n      const nextFormats = child.next.formats();\n      if (childFormats.table !== nextFormats.table) {\n        const next = this.splitAfter(child);\n        if (next) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          next.optimize();\n        }\n        // We might be able to merge with prev now\n        if (this.prev) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          this.prev.optimize();\n        }\n      }\n    });\n  }\n\n  rowOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n\n  table() {\n    return this.parent && this.parent.parent;\n  }\n}\n\nclass TableBody extends Container {\n  static blotName = 'table-body';\n  static tagName = 'TBODY';\n\n  children: LinkedList<TableRow>;\n}\n\nclass TableContainer extends Container {\n  static blotName = 'table-container';\n  static tagName = 'TABLE';\n\n  children: LinkedList<TableBody>;\n\n  balanceCells() {\n    const rows = this.descendants(TableRow);\n    const maxColumns = rows.reduce((max, row) => {\n      return Math.max(row.children.length, max);\n    }, 0);\n    rows.forEach((row) => {\n      new Array(maxColumns - row.children.length).fill(0).forEach(() => {\n        let value;\n        if (row.children.head != null) {\n          value = TableCell.formats(row.children.head.domNode);\n        }\n        const blot = this.scroll.create(TableCell.blotName, value);\n        row.appendChild(blot);\n        // @ts-expect-error TODO: parameters of optimize() should be a optional\n        blot.optimize(); // Add break blot\n      });\n    });\n  }\n\n  cells(column: number) {\n    return this.rows().map((row) => row.children.at(column));\n  }\n\n  deleteColumn(index: number) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody) as TableBody[];\n    if (body == null || body.children.head == null) return;\n    body.children.forEach((row) => {\n      const cell = row.children.at(index);\n      if (cell != null) {\n        cell.remove();\n      }\n    });\n  }\n\n  insertColumn(index: number) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody) as TableBody[];\n    if (body == null || body.children.head == null) return;\n    body.children.forEach((row) => {\n      const ref = row.children.at(index);\n      // @ts-expect-error\n      const value = TableCell.formats(row.children.head.domNode);\n      const cell = this.scroll.create(TableCell.blotName, value);\n      row.insertBefore(cell, ref);\n    });\n  }\n\n  insertRow(index: number) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody) as TableBody[];\n    if (body == null || body.children.head == null) return;\n    const id = tableId();\n    const row = this.scroll.create(TableRow.blotName) as TableRow;\n    body.children.head.children.forEach(() => {\n      const cell = this.scroll.create(TableCell.blotName, id);\n      row.appendChild(cell);\n    });\n    const ref = body.children.at(index);\n    body.insertBefore(row, ref);\n  }\n\n  rows() {\n    const body = this.children.head;\n    if (body == null) return [];\n    return body.children.map((row) => row);\n  }\n}\n\nTableContainer.allowedChildren = [TableBody];\nTableBody.requiredContainer = TableContainer;\n\nTableBody.allowedChildren = [TableRow];\nTableRow.requiredContainer = TableBody;\n\nTableRow.allowedChildren = [TableCell];\nTableCell.requiredContainer = TableRow;\n\nfunction tableId() {\n  const id = Math.random().toString(36).slice(2, 6);\n  return `row-${id}`;\n}\n\nexport { TableCell, TableRow, TableBody, TableContainer, tableId };\n","import Delta from 'quill-delta';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport {\n  TableCell,\n  TableRow,\n  TableBody,\n  TableContainer,\n  tableId,\n} from '../formats/table.js';\n\nclass Table extends Module {\n  static register() {\n    Quill.register(TableCell);\n    Quill.register(TableRow);\n    Quill.register(TableBody);\n    Quill.register(TableContainer);\n  }\n\n  constructor(...args: ConstructorParameters<typeof Module>) {\n    super(...args);\n    this.listenBalanceCells();\n  }\n\n  balanceTables() {\n    this.quill.scroll.descendants(TableContainer).forEach((table) => {\n      table.balanceCells();\n    });\n  }\n\n  deleteColumn() {\n    const [table, , cell] = this.getTable();\n    if (cell == null) return;\n    // @ts-expect-error\n    table.deleteColumn(cell.cellOffset());\n    this.quill.update(Quill.sources.USER);\n  }\n\n  deleteRow() {\n    const [, row] = this.getTable();\n    if (row == null) return;\n    row.remove();\n    this.quill.update(Quill.sources.USER);\n  }\n\n  deleteTable() {\n    const [table] = this.getTable();\n    if (table == null) return;\n    // @ts-expect-error\n    const offset = table.offset();\n    // @ts-expect-error\n    table.remove();\n    this.quill.update(Quill.sources.USER);\n    this.quill.setSelection(offset, Quill.sources.SILENT);\n  }\n\n  getTable(\n    range = this.quill.getSelection(),\n  ): [null, null, null, -1] | [Table, TableRow, TableCell, number] {\n    if (range == null) return [null, null, null, -1];\n    const [cell, offset] = this.quill.getLine(range.index);\n    if (cell == null || cell.statics.blotName !== TableCell.blotName) {\n      return [null, null, null, -1];\n    }\n    const row = cell.parent;\n    const table = row.parent.parent;\n    // @ts-expect-error\n    return [table, row, cell, offset];\n  }\n\n  insertColumn(offset: number) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const column = cell.cellOffset();\n    table.insertColumn(column + offset);\n    this.quill.update(Quill.sources.USER);\n    let shift = row.rowOffset();\n    if (offset === 0) {\n      shift += 1;\n    }\n    this.quill.setSelection(\n      range.index + shift,\n      range.length,\n      Quill.sources.SILENT,\n    );\n  }\n\n  insertColumnLeft() {\n    this.insertColumn(0);\n  }\n\n  insertColumnRight() {\n    this.insertColumn(1);\n  }\n\n  insertRow(offset: number) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const index = row.rowOffset();\n    table.insertRow(index + offset);\n    this.quill.update(Quill.sources.USER);\n    if (offset > 0) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    } else {\n      this.quill.setSelection(\n        range.index + row.children.length,\n        range.length,\n        Quill.sources.SILENT,\n      );\n    }\n  }\n\n  insertRowAbove() {\n    this.insertRow(0);\n  }\n\n  insertRowBelow() {\n    this.insertRow(1);\n  }\n\n  insertTable(rows: number, columns: number) {\n    const range = this.quill.getSelection();\n    if (range == null) return;\n    const delta = new Array(rows).fill(0).reduce((memo) => {\n      const text = new Array(columns).fill('\\n').join('');\n      return memo.insert(text, { table: tableId() });\n    }, new Delta().retain(range.index));\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index, Quill.sources.SILENT);\n    this.balanceTables();\n  }\n\n  listenBalanceCells() {\n    this.quill.on(\n      Quill.events.SCROLL_OPTIMIZE,\n      (mutations: MutationRecord[]) => {\n        mutations.some((mutation) => {\n          if (\n            ['TD', 'TR', 'TBODY', 'TABLE'].includes(\n              (mutation.target as HTMLElement).tagName,\n            )\n          ) {\n            this.quill.once(Quill.events.TEXT_CHANGE, (delta, old, source) => {\n              if (source !== Quill.sources.USER) return;\n              this.balanceTables();\n            });\n            return true;\n          }\n          return false;\n        });\n      },\n    );\n  }\n}\n\nexport default Table;\n","import Delta from 'quill-delta';\nimport { EmbedBlot, Scope } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport type { Range } from '../core/selection.js';\n\nconst debug = logger('quill:toolbar');\n\ntype Handler = (this: Toolbar, value: any) => void;\n\nexport type ToolbarConfig = Array<\n  string[] | Array<string | Record<string, unknown>>\n>;\nexport interface ToolbarProps {\n  container?: HTMLElement | ToolbarConfig | null;\n  handlers?: Record<string, Handler>;\n  option?: number;\n  module?: boolean;\n  theme?: boolean;\n}\n\nclass Toolbar extends Module<ToolbarProps> {\n  static DEFAULTS: ToolbarProps;\n\n  container?: HTMLElement | null;\n  controls: [string, HTMLElement][];\n  handlers: Record<string, Handler>;\n\n  constructor(quill: Quill, options: Partial<ToolbarProps>) {\n    super(quill, options);\n    if (Array.isArray(this.options.container)) {\n      const container = document.createElement('div');\n      container.setAttribute('role', 'toolbar');\n      addControls(container, this.options.container);\n      quill.container?.parentNode?.insertBefore(container, quill.container);\n      this.container = container;\n    } else if (typeof this.options.container === 'string') {\n      this.container = document.querySelector(this.options.container);\n    } else {\n      this.container = this.options.container;\n    }\n    if (!(this.container instanceof HTMLElement)) {\n      debug.error('Container required for toolbar', this.options);\n      return;\n    }\n    this.container.classList.add('ql-toolbar');\n    this.controls = [];\n    this.handlers = {};\n    if (this.options.handlers) {\n      Object.keys(this.options.handlers).forEach((format) => {\n        const handler = this.options.handlers?.[format];\n        if (handler) {\n          this.addHandler(format, handler);\n        }\n      });\n    }\n    Array.from(this.container.querySelectorAll('button, select')).forEach(\n      (input) => {\n        // @ts-expect-error\n        this.attach(input);\n      },\n    );\n    this.quill.on(Quill.events.EDITOR_CHANGE, () => {\n      const [range] = this.quill.selection.getRange(); // quill.getSelection triggers update\n      this.update(range);\n    });\n  }\n\n  addHandler(format: string, handler: Handler) {\n    this.handlers[format] = handler;\n  }\n\n  attach(input: HTMLElement) {\n    let format = Array.from(input.classList).find((className) => {\n      return className.indexOf('ql-') === 0;\n    });\n    if (!format) return;\n    format = format.slice('ql-'.length);\n    if (input.tagName === 'BUTTON') {\n      input.setAttribute('type', 'button');\n    }\n    if (\n      this.handlers[format] == null &&\n      this.quill.scroll.query(format) == null\n    ) {\n      debug.warn('ignoring attaching to nonexistent format', format, input);\n      return;\n    }\n    const eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n    input.addEventListener(eventName, (e) => {\n      let value;\n      if (input.tagName === 'SELECT') {\n        // @ts-expect-error\n        if (input.selectedIndex < 0) return;\n        // @ts-expect-error\n        const selected = input.options[input.selectedIndex];\n        if (selected.hasAttribute('selected')) {\n          value = false;\n        } else {\n          value = selected.value || false;\n        }\n      } else {\n        if (input.classList.contains('ql-active')) {\n          value = false;\n        } else {\n          // @ts-expect-error\n          value = input.value || !input.hasAttribute('value');\n        }\n        e.preventDefault();\n      }\n      this.quill.focus();\n      const [range] = this.quill.selection.getRange();\n      if (this.handlers[format] != null) {\n        this.handlers[format].call(this, value);\n      } else if (\n        // @ts-expect-error\n        this.quill.scroll.query(format).prototype instanceof EmbedBlot\n      ) {\n        value = prompt(`Enter ${format}`); // eslint-disable-line no-alert\n        if (!value) return;\n        this.quill.updateContents(\n          new Delta()\n            // @ts-expect-error Fix me later\n            .retain(range.index)\n            // @ts-expect-error Fix me later\n            .delete(range.length)\n            .insert({ [format]: value }),\n          Quill.sources.USER,\n        );\n      } else {\n        this.quill.format(format, value, Quill.sources.USER);\n      }\n      this.update(range);\n    });\n    this.controls.push([format, input]);\n  }\n\n  update(range: Range | null) {\n    const formats = range == null ? {} : this.quill.getFormat(range);\n    this.controls.forEach((pair) => {\n      const [format, input] = pair;\n      if (input.tagName === 'SELECT') {\n        let option: HTMLOptionElement | null = null;\n        if (range == null) {\n          option = null;\n        } else if (formats[format] == null) {\n          option = input.querySelector('option[selected]');\n        } else if (!Array.isArray(formats[format])) {\n          let value = formats[format];\n          if (typeof value === 'string') {\n            value = value.replace(/\"/g, '\\\\\"');\n          }\n          option = input.querySelector(`option[value=\"${value}\"]`);\n        }\n        if (option == null) {\n          // @ts-expect-error TODO fix me later\n          input.value = ''; // TODO make configurable?\n          // @ts-expect-error TODO fix me later\n          input.selectedIndex = -1;\n        } else {\n          option.selected = true;\n        }\n      } else if (range == null) {\n        input.classList.remove('ql-active');\n        input.setAttribute('aria-pressed', 'false');\n      } else if (input.hasAttribute('value')) {\n        // both being null should match (default values)\n        // '1' should match with 1 (headers)\n        const value = formats[format] as boolean | number | string | object;\n        const isActive =\n          value === input.getAttribute('value') ||\n          (value != null && value.toString() === input.getAttribute('value')) ||\n          (value == null && !input.getAttribute('value'));\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      } else {\n        const isActive = formats[format] != null;\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      }\n    });\n  }\n}\nToolbar.DEFAULTS = {};\n\nfunction addButton(container: HTMLElement, format: string, value?: string) {\n  const input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add(`ql-${format}`);\n  input.setAttribute('aria-pressed', 'false');\n  if (value != null) {\n    input.value = value;\n    input.setAttribute('aria-label', `${format}: ${value}`);\n  } else {\n    input.setAttribute('aria-label', format);\n  }\n  container.appendChild(input);\n}\n\nfunction addControls(\n  container: HTMLElement,\n  groups:\n    | (string | Record<string, unknown>)[][]\n    | (string | Record<string, unknown>)[],\n) {\n  if (!Array.isArray(groups[0])) {\n    // @ts-expect-error\n    groups = [groups];\n  }\n  groups.forEach((controls: any) => {\n    const group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach((control: any) => {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        const format = Object.keys(control)[0];\n        const value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\n\nfunction addSelect(\n  container: HTMLElement,\n  format: string,\n  values: Array<string | boolean>,\n) {\n  const input = document.createElement('select');\n  input.classList.add(`ql-${format}`);\n  values.forEach((value) => {\n    const option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', String(value));\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\n\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean() {\n      const range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length === 0) {\n        const formats = this.quill.getFormat();\n        Object.keys(formats).forEach((name) => {\n          // Clean functionality in existing apps only clean inline formats\n          if (this.quill.scroll.query(name, Scope.INLINE) != null) {\n            this.quill.format(name, false, Quill.sources.USER);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range.index, range.length, Quill.sources.USER);\n      }\n    },\n    direction(value) {\n      const { align } = this.quill.getFormat();\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', Quill.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, Quill.sources.USER);\n      }\n      this.quill.format('direction', value, Quill.sources.USER);\n    },\n    indent(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      // @ts-expect-error\n      const indent = parseInt(formats.indent || 0, 10);\n      if (value === '+1' || value === '-1') {\n        let modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\n      }\n    },\n    link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:'); // eslint-disable-line no-alert\n      }\n      this.quill.format('link', value, Quill.sources.USER);\n    },\n    list(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats.list === 'checked' || formats.list === 'unchecked') {\n          this.quill.format('list', false, Quill.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, Quill.sources.USER);\n      }\n    },\n  },\n};\n\nexport { Toolbar as default, addControls };\n","import alignLeftIcon from '../assets/icons/align-left.svg';\nimport alignCenterIcon from '../assets/icons/align-center.svg';\nimport alignRightIcon from '../assets/icons/align-right.svg';\nimport alignJustifyIcon from '../assets/icons/align-justify.svg';\nimport backgroundIcon from '../assets/icons/background.svg';\nimport blockquoteIcon from '../assets/icons/blockquote.svg';\nimport boldIcon from '../assets/icons/bold.svg';\nimport cleanIcon from '../assets/icons/clean.svg';\nimport codeIcon from '../assets/icons/code.svg';\nimport colorIcon from '../assets/icons/color.svg';\nimport directionLeftToRightIcon from '../assets/icons/direction-ltr.svg';\nimport directionRightToLeftIcon from '../assets/icons/direction-rtl.svg';\nimport formulaIcon from '../assets/icons/formula.svg';\nimport headerIcon from '../assets/icons/header.svg';\nimport header2Icon from '../assets/icons/header-2.svg';\nimport header3Icon from '../assets/icons/header-3.svg';\nimport header4Icon from '../assets/icons/header-4.svg';\nimport header5Icon from '../assets/icons/header-5.svg';\nimport header6Icon from '../assets/icons/header-6.svg';\nimport italicIcon from '../assets/icons/italic.svg';\nimport imageIcon from '../assets/icons/image.svg';\nimport indentIcon from '../assets/icons/indent.svg';\nimport outdentIcon from '../assets/icons/outdent.svg';\nimport linkIcon from '../assets/icons/link.svg';\nimport listBulletIcon from '../assets/icons/list-bullet.svg';\nimport listCheckIcon from '../assets/icons/list-check.svg';\nimport listOrderedIcon from '../assets/icons/list-ordered.svg';\nimport subscriptIcon from '../assets/icons/subscript.svg';\nimport superscriptIcon from '../assets/icons/superscript.svg';\nimport strikeIcon from '../assets/icons/strike.svg';\nimport tableIcon from '../assets/icons/table.svg';\nimport underlineIcon from '../assets/icons/underline.svg';\nimport videoIcon from '../assets/icons/video.svg';\n\nexport default {\n  align: {\n    '': alignLeftIcon,\n    center: alignCenterIcon,\n    right: alignRightIcon,\n    justify: alignJustifyIcon,\n  },\n  background: backgroundIcon,\n  blockquote: blockquoteIcon,\n  bold: boldIcon,\n  clean: cleanIcon,\n  code: codeIcon,\n  'code-block': codeIcon,\n  color: colorIcon,\n  direction: {\n    '': directionLeftToRightIcon,\n    rtl: directionRightToLeftIcon,\n  },\n  formula: formulaIcon,\n  header: {\n    '1': headerIcon,\n    '2': header2Icon,\n    '3': header3Icon,\n    '4': header4Icon,\n    '5': header5Icon,\n    '6': header6Icon,\n  },\n  italic: italicIcon,\n  image: imageIcon,\n  indent: {\n    '+1': indentIcon,\n    '-1': outdentIcon,\n  },\n  link: linkIcon,\n  list: {\n    bullet: listBulletIcon,\n    check: listCheckIcon,\n    ordered: listOrderedIcon,\n  },\n  script: {\n    sub: subscriptIcon,\n    super: superscriptIcon,\n  },\n  strike: strikeIcon,\n  table: tableIcon,\n  underline: underlineIcon,\n  video: videoIcon,\n};\n","import DropdownIcon from '../assets/icons/dropdown.svg';\n\nlet optionsCounter = 0;\n\nfunction toggleAriaAttribute(element: HTMLElement, attribute: string) {\n  element.setAttribute(\n    attribute,\n    `${!(element.getAttribute(attribute) === 'true')}`,\n  );\n}\n\nclass Picker {\n  select: HTMLSelectElement;\n  container: HTMLElement;\n  label: HTMLElement;\n\n  constructor(select: HTMLSelectElement) {\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    // @ts-expect-error Fix me later\n    this.select.parentNode.insertBefore(this.container, this.select);\n\n    this.label.addEventListener('mousedown', () => {\n      this.togglePicker();\n    });\n    this.label.addEventListener('keydown', (event) => {\n      switch (event.key) {\n        case 'Enter':\n          this.togglePicker();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n\n  togglePicker() {\n    this.container.classList.toggle('ql-expanded');\n    // Toggle aria-expanded and aria-hidden to make the picker accessible\n    toggleAriaAttribute(this.label, 'aria-expanded');\n    // @ts-expect-error\n    toggleAriaAttribute(this.options, 'aria-hidden');\n  }\n\n  buildItem(option: HTMLOptionElement) {\n    const item = document.createElement('span');\n    // @ts-expect-error\n    item.tabIndex = '0';\n    item.setAttribute('role', 'button');\n    item.classList.add('ql-picker-item');\n    const value = option.getAttribute('value');\n    if (value) {\n      item.setAttribute('data-value', value);\n    }\n    if (option.textContent) {\n      item.setAttribute('data-label', option.textContent);\n    }\n    item.addEventListener('click', () => {\n      this.selectItem(item, true);\n    });\n    item.addEventListener('keydown', (event) => {\n      switch (event.key) {\n        case 'Enter':\n          this.selectItem(item, true);\n          event.preventDefault();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n\n    return item;\n  }\n\n  buildLabel() {\n    const label = document.createElement('span');\n    label.classList.add('ql-picker-label');\n    label.innerHTML = DropdownIcon;\n    // @ts-expect-error\n    label.tabIndex = '0';\n    label.setAttribute('role', 'button');\n    label.setAttribute('aria-expanded', 'false');\n    this.container.appendChild(label);\n    return label;\n  }\n\n  buildOptions() {\n    const options = document.createElement('span');\n    options.classList.add('ql-picker-options');\n\n    // Don't want screen readers to read this until options are visible\n    options.setAttribute('aria-hidden', 'true');\n    // @ts-expect-error\n    options.tabIndex = '-1';\n\n    // Need a unique id for aria-controls\n    options.id = `ql-picker-options-${optionsCounter}`;\n    optionsCounter += 1;\n    this.label.setAttribute('aria-controls', options.id);\n\n    // @ts-expect-error\n    this.options = options;\n\n    Array.from(this.select.options).forEach((option) => {\n      const item = this.buildItem(option);\n      options.appendChild(item);\n      if (option.selected === true) {\n        this.selectItem(item);\n      }\n    });\n    this.container.appendChild(options);\n  }\n\n  buildPicker() {\n    Array.from(this.select.attributes).forEach((item) => {\n      this.container.setAttribute(item.name, item.value);\n    });\n    this.container.classList.add('ql-picker');\n    this.label = this.buildLabel();\n    this.buildOptions();\n  }\n\n  escape() {\n    // Close menu and return focus to trigger label\n    this.close();\n    // Need setTimeout for accessibility to ensure that the browser executes\n    // focus on the next process thread and after any DOM content changes\n    setTimeout(() => this.label.focus(), 1);\n  }\n\n  close() {\n    this.container.classList.remove('ql-expanded');\n    this.label.setAttribute('aria-expanded', 'false');\n    // @ts-expect-error\n    this.options.setAttribute('aria-hidden', 'true');\n  }\n\n  selectItem(item: HTMLElement | null, trigger = false) {\n    const selected = this.container.querySelector('.ql-selected');\n    if (item === selected) return;\n    if (selected != null) {\n      selected.classList.remove('ql-selected');\n    }\n    if (item == null) return;\n    item.classList.add('ql-selected');\n    // @ts-expect-error Fix me later\n    this.select.selectedIndex = Array.from(item.parentNode.children).indexOf(\n      item,\n    );\n    if (item.hasAttribute('data-value')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\n    } else {\n      this.label.removeAttribute('data-value');\n    }\n    if (item.hasAttribute('data-label')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\n    } else {\n      this.label.removeAttribute('data-label');\n    }\n    if (trigger) {\n      this.select.dispatchEvent(new Event('change'));\n      this.close();\n    }\n  }\n\n  update() {\n    let option;\n    if (this.select.selectedIndex > -1) {\n      const item =\n        // @ts-expect-error Fix me later\n        this.container.querySelector('.ql-picker-options').children[\n          this.select.selectedIndex\n        ];\n      option = this.select.options[this.select.selectedIndex];\n      // @ts-expect-error\n      this.selectItem(item);\n    } else {\n      this.selectItem(null);\n    }\n    const isActive =\n      option != null &&\n      option !== this.select.querySelector('option[selected]');\n    this.label.classList.toggle('ql-active', isActive);\n  }\n}\n\nexport default Picker;\n","import Picker from './picker.js';\n\nclass ColorPicker extends Picker {\n  constructor(select: HTMLSelectElement, label: string) {\n    super(select);\n    this.label.innerHTML = label;\n    this.container.classList.add('ql-color-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item'))\n      .slice(0, 7)\n      .forEach((item) => {\n        item.classList.add('ql-primary');\n      });\n  }\n\n  buildItem(option: HTMLOptionElement) {\n    const item = super.buildItem(option);\n    item.style.backgroundColor = option.getAttribute('value') || '';\n    return item;\n  }\n\n  selectItem(item: HTMLElement | null, trigger?: boolean) {\n    super.selectItem(item, trigger);\n    const colorLabel = this.label.querySelector<HTMLElement>('.ql-color-label');\n    const value = item ? item.getAttribute('data-value') || '' : '';\n    if (colorLabel) {\n      if (colorLabel.tagName === 'line') {\n        colorLabel.style.stroke = value;\n      } else {\n        colorLabel.style.fill = value;\n      }\n    }\n  }\n}\n\nexport default ColorPicker;\n","import Picker from './picker.js';\n\nclass IconPicker extends Picker {\n  defaultItem: HTMLElement | null;\n\n  constructor(select: HTMLSelectElement, icons: Record<string, string>) {\n    super(select);\n    this.container.classList.add('ql-icon-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).forEach(\n      (item) => {\n        item.innerHTML = icons[item.getAttribute('data-value') || ''];\n      },\n    );\n    this.defaultItem = this.container.querySelector('.ql-selected');\n    this.selectItem(this.defaultItem);\n  }\n\n  selectItem(target: HTMLElement | null, trigger?: boolean) {\n    super.selectItem(target, trigger);\n    const item = target || this.defaultItem;\n    if (item != null) {\n      if (this.label.innerHTML === item.innerHTML) return;\n      this.label.innerHTML = item.innerHTML;\n    }\n  }\n}\n\nexport default IconPicker;\n","import type Quill from '../core.js';\nimport type { Bounds } from '../core/selection.js';\n\nconst isScrollable = (el: Element) => {\n  const { overflowY } = getComputedStyle(el, null);\n  return overflowY !== 'visible' && overflowY !== 'clip';\n};\n\nclass Tooltip {\n  quill: Quill;\n  boundsContainer: HTMLElement;\n  root: HTMLDivElement;\n\n  constructor(quill: Quill, boundsContainer?: HTMLElement) {\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer('ql-tooltip');\n    // @ts-expect-error\n    this.root.innerHTML = this.constructor.TEMPLATE;\n    if (isScrollable(this.quill.root)) {\n      this.quill.root.addEventListener('scroll', () => {\n        this.root.style.marginTop = `${-1 * this.quill.root.scrollTop}px`;\n      });\n    }\n    this.hide();\n  }\n\n  hide() {\n    this.root.classList.add('ql-hidden');\n  }\n\n  position(reference: Bounds) {\n    const left =\n      reference.left + reference.width / 2 - this.root.offsetWidth / 2;\n    // root.scrollTop should be 0 if scrollContainer !== root\n    const top = reference.bottom + this.quill.root.scrollTop;\n    this.root.style.left = `${left}px`;\n    this.root.style.top = `${top}px`;\n    this.root.classList.remove('ql-flip');\n    const containerBounds = this.boundsContainer.getBoundingClientRect();\n    const rootBounds = this.root.getBoundingClientRect();\n    let shift = 0;\n    if (rootBounds.right > containerBounds.right) {\n      shift = containerBounds.right - rootBounds.right;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.left < containerBounds.left) {\n      shift = containerBounds.left - rootBounds.left;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.bottom > containerBounds.bottom) {\n      const height = rootBounds.bottom - rootBounds.top;\n      const verticalShift = reference.bottom - reference.top + height;\n      this.root.style.top = `${top - verticalShift}px`;\n      this.root.classList.add('ql-flip');\n    }\n    return shift;\n  }\n\n  show() {\n    this.root.classList.remove('ql-editing');\n    this.root.classList.remove('ql-hidden');\n  }\n}\n\nexport default Tooltip;\n","import { merge } from 'lodash-es';\nimport type Quill from '../core/quill.js';\nimport Emitter from '../core/emitter.js';\nimport Theme from '../core/theme.js';\nimport type { ThemeOptions } from '../core/theme.js';\nimport ColorPicker from '../ui/color-picker.js';\nimport IconPicker from '../ui/icon-picker.js';\nimport Picker from '../ui/picker.js';\nimport Tooltip from '../ui/tooltip.js';\nimport type { Range } from '../core/selection.js';\nimport type Clipboard from '../modules/clipboard.js';\nimport type History from '../modules/history.js';\nimport type Keyboard from '../modules/keyboard.js';\nimport type Uploader from '../modules/uploader.js';\nimport type Selection from '../core/selection.js';\n\nconst ALIGNS = [false, 'center', 'right', 'justify'];\n\nconst COLORS = [\n  '#000000',\n  '#e60000',\n  '#ff9900',\n  '#ffff00',\n  '#008a00',\n  '#0066cc',\n  '#9933ff',\n  '#ffffff',\n  '#facccc',\n  '#ffebcc',\n  '#ffffcc',\n  '#cce8cc',\n  '#cce0f5',\n  '#ebd6ff',\n  '#bbbbbb',\n  '#f06666',\n  '#ffc266',\n  '#ffff66',\n  '#66b966',\n  '#66a3e0',\n  '#c285ff',\n  '#888888',\n  '#a10000',\n  '#b26b00',\n  '#b2b200',\n  '#006100',\n  '#0047b2',\n  '#6b24b2',\n  '#444444',\n  '#5c0000',\n  '#663d00',\n  '#666600',\n  '#003700',\n  '#002966',\n  '#3d1466',\n];\n\nconst FONTS = [false, 'serif', 'monospace'];\n\nconst HEADERS = ['1', '2', '3', false];\n\nconst SIZES = ['small', false, 'large', 'huge'];\n\nclass BaseTheme extends Theme {\n  pickers: Picker[];\n  tooltip?: Tooltip;\n\n  constructor(quill: Quill, options: ThemeOptions) {\n    super(quill, options);\n    const listener = (e: MouseEvent) => {\n      if (!document.body.contains(quill.root)) {\n        document.body.removeEventListener('click', listener);\n        return;\n      }\n      if (\n        this.tooltip != null &&\n        // @ts-expect-error\n        !this.tooltip.root.contains(e.target) &&\n        // @ts-expect-error\n        document.activeElement !== this.tooltip.textbox &&\n        !this.quill.hasFocus()\n      ) {\n        this.tooltip.hide();\n      }\n      if (this.pickers != null) {\n        this.pickers.forEach((picker) => {\n          // @ts-expect-error\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n    quill.emitter.listenDOM('click', document.body, listener);\n  }\n\n  addModule(name: 'clipboard'): Clipboard;\n  addModule(name: 'keyboard'): Keyboard;\n  addModule(name: 'uploader'): Uploader;\n  addModule(name: 'history'): History;\n  addModule(name: 'selection'): Selection;\n  addModule(name: string): unknown;\n  addModule(name: string) {\n    const module = super.addModule(name);\n    if (name === 'toolbar') {\n      // @ts-expect-error\n      this.extendToolbar(module);\n    }\n    return module;\n  }\n\n  buildButtons(\n    buttons: NodeListOf<HTMLElement>,\n    icons: Record<string, Record<string, string> | string>,\n  ) {\n    Array.from(buttons).forEach((button) => {\n      const className = button.getAttribute('class') || '';\n      className.split(/\\s+/).forEach((name) => {\n        if (!name.startsWith('ql-')) return;\n        name = name.slice('ql-'.length);\n        if (icons[name] == null) return;\n        if (name === 'direction') {\n          // @ts-expect-error\n          button.innerHTML = icons[name][''] + icons[name].rtl;\n        } else if (typeof icons[name] === 'string') {\n          // @ts-expect-error\n          button.innerHTML = icons[name];\n        } else {\n          // @ts-expect-error\n          const value = button.value || '';\n          // @ts-expect-error\n          if (value != null && icons[name][value]) {\n            // @ts-expect-error\n            button.innerHTML = icons[name][value];\n          }\n        }\n      });\n    });\n  }\n\n  buildPickers(\n    selects: NodeListOf<HTMLSelectElement>,\n    icons: Record<string, string | Record<string, string>>,\n  ) {\n    this.pickers = Array.from(selects).map((select) => {\n      if (select.classList.contains('ql-align')) {\n        if (select.querySelector('option') == null) {\n          fillSelect(select, ALIGNS);\n        }\n        if (typeof icons.align === 'object') {\n          return new IconPicker(select, icons.align);\n        }\n      }\n      if (\n        select.classList.contains('ql-background') ||\n        select.classList.contains('ql-color')\n      ) {\n        const format = select.classList.contains('ql-background')\n          ? 'background'\n          : 'color';\n        if (select.querySelector('option') == null) {\n          fillSelect(\n            select,\n            COLORS,\n            format === 'background' ? '#ffffff' : '#000000',\n          );\n        }\n        return new ColorPicker(select, icons[format] as string);\n      }\n      if (select.querySelector('option') == null) {\n        if (select.classList.contains('ql-font')) {\n          fillSelect(select, FONTS);\n        } else if (select.classList.contains('ql-header')) {\n          fillSelect(select, HEADERS);\n        } else if (select.classList.contains('ql-size')) {\n          fillSelect(select, SIZES);\n        }\n      }\n      return new Picker(select);\n    });\n    const update = () => {\n      this.pickers.forEach((picker) => {\n        picker.update();\n      });\n    };\n    this.quill.on(Emitter.events.EDITOR_CHANGE, update);\n  }\n}\nBaseTheme.DEFAULTS = merge({}, Theme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n        image() {\n          let fileInput = this.container.querySelector(\n            'input.ql-image[type=file]',\n          );\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute(\n              'accept',\n              this.quill.uploader.options.mimetypes.join(', '),\n            );\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', () => {\n              const range = this.quill.getSelection(true);\n              this.quill.uploader.upload(range, fileInput.files);\n              fileInput.value = '';\n            });\n            this.container.appendChild(fileInput);\n          }\n          fileInput.click();\n        },\n        video() {\n          this.quill.theme.tooltip.edit('video');\n        },\n      },\n    },\n  },\n});\n\nclass BaseTooltip extends Tooltip {\n  textbox: HTMLInputElement | null;\n  linkRange?: Range;\n\n  constructor(quill: Quill, boundsContainer?: HTMLElement) {\n    super(quill, boundsContainer);\n    this.textbox = this.root.querySelector('input[type=\"text\"]');\n    this.listen();\n  }\n\n  listen() {\n    // @ts-expect-error Fix me later\n    this.textbox.addEventListener('keydown', (event) => {\n      if (event.key === 'Enter') {\n        this.save();\n        event.preventDefault();\n      } else if (event.key === 'Escape') {\n        this.cancel();\n        event.preventDefault();\n      }\n    });\n  }\n\n  cancel() {\n    this.hide();\n    this.restoreFocus();\n  }\n\n  edit(mode = 'link', preview: string | null = null) {\n    this.root.classList.remove('ql-hidden');\n    this.root.classList.add('ql-editing');\n    if (this.textbox == null) return;\n\n    if (preview != null) {\n      this.textbox.value = preview;\n    } else if (mode !== this.root.getAttribute('data-mode')) {\n      this.textbox.value = '';\n    }\n    const bounds = this.quill.getBounds(this.quill.selection.savedRange);\n    if (bounds != null) {\n      this.position(bounds);\n    }\n    this.textbox.select();\n    this.textbox.setAttribute(\n      'placeholder',\n      this.textbox.getAttribute(`data-${mode}`) || '',\n    );\n    this.root.setAttribute('data-mode', mode);\n  }\n\n  restoreFocus() {\n    this.quill.focus({ preventScroll: true });\n  }\n\n  save() {\n    // @ts-expect-error Fix me later\n    let { value } = this.textbox;\n    switch (this.root.getAttribute('data-mode')) {\n      case 'link': {\n        const { scrollTop } = this.quill.root;\n        if (this.linkRange) {\n          this.quill.formatText(\n            this.linkRange,\n            'link',\n            value,\n            Emitter.sources.USER,\n          );\n          delete this.linkRange;\n        } else {\n          this.restoreFocus();\n          this.quill.format('link', value, Emitter.sources.USER);\n        }\n        this.quill.root.scrollTop = scrollTop;\n        break;\n      }\n      case 'video': {\n        value = extractVideoUrl(value);\n      } // eslint-disable-next-line no-fallthrough\n      case 'formula': {\n        if (!value) break;\n        const range = this.quill.getSelection(true);\n        if (range != null) {\n          const index = range.index + range.length;\n          this.quill.insertEmbed(\n            index,\n            // @ts-expect-error Fix me later\n            this.root.getAttribute('data-mode'),\n            value,\n            Emitter.sources.USER,\n          );\n          if (this.root.getAttribute('data-mode') === 'formula') {\n            this.quill.insertText(index + 1, ' ', Emitter.sources.USER);\n          }\n          this.quill.setSelection(index + 2, Emitter.sources.USER);\n        }\n        break;\n      }\n      default:\n    }\n    // @ts-expect-error Fix me later\n    this.textbox.value = '';\n    this.hide();\n  }\n}\n\nfunction extractVideoUrl(url: string) {\n  let match =\n    url.match(\n      /^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/,\n    ) ||\n    url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n  if (match) {\n    return `${match[1] || 'https'}://www.youtube.com/embed/${\n      match[2]\n    }?showinfo=0`;\n  }\n  // eslint-disable-next-line no-cond-assign\n  if ((match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/))) {\n    return `${match[1] || 'https'}://player.vimeo.com/video/${match[2]}/`;\n  }\n  return url;\n}\n\nfunction fillSelect(\n  select: HTMLSelectElement,\n  values: Array<string | boolean>,\n  defaultValue: unknown = false,\n) {\n  values.forEach((value) => {\n    const option = document.createElement('option');\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', String(value));\n    }\n    select.appendChild(option);\n  });\n}\n\nexport { BaseTooltip, BaseTheme as default };\n","import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport { Range } from '../core/selection.js';\nimport type { Bounds } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nimport type { ThemeOptions } from '../core/theme.js';\nimport type Toolbar from '../modules/toolbar.js';\nimport type { ToolbarConfig } from '../modules/toolbar.js';\n\nconst TOOLBAR_CONFIG: ToolbarConfig = [\n  ['bold', 'italic', 'link'],\n  [{ header: 1 }, { header: 2 }, 'blockquote'],\n];\n\nclass BubbleTooltip extends BaseTooltip {\n  static TEMPLATE = [\n    '<span class=\"ql-tooltip-arrow\"></span>',\n    '<div class=\"ql-tooltip-editor\">',\n    '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n    '<a class=\"ql-close\"></a>',\n    '</div>',\n  ].join('');\n\n  constructor(quill: Quill, bounds?: HTMLElement) {\n    super(quill, bounds);\n    this.quill.on(\n      Emitter.events.EDITOR_CHANGE,\n      (type, range, oldRange, source) => {\n        if (type !== Emitter.events.SELECTION_CHANGE) return;\n        if (\n          range != null &&\n          range.length > 0 &&\n          source === Emitter.sources.USER\n        ) {\n          this.show();\n          // Lock our width so we will expand beyond our offsetParent boundaries\n          this.root.style.left = '0px';\n          this.root.style.width = '';\n          this.root.style.width = `${this.root.offsetWidth}px`;\n          const lines = this.quill.getLines(range.index, range.length);\n          if (lines.length === 1) {\n            const bounds = this.quill.getBounds(range);\n            if (bounds != null) {\n              this.position(bounds);\n            }\n          } else {\n            const lastLine = lines[lines.length - 1];\n            const index = this.quill.getIndex(lastLine);\n            const length = Math.min(\n              lastLine.length() - 1,\n              range.index + range.length - index,\n            );\n            const indexBounds = this.quill.getBounds(new Range(index, length));\n            if (indexBounds != null) {\n              this.position(indexBounds);\n            }\n          }\n        } else if (\n          document.activeElement !== this.textbox &&\n          this.quill.hasFocus()\n        ) {\n          this.hide();\n        }\n      },\n    );\n  }\n\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root.querySelector('.ql-close').addEventListener('click', () => {\n      this.root.classList.remove('ql-editing');\n    });\n    this.quill.on(Emitter.events.SCROLL_OPTIMIZE, () => {\n      // Let selection be restored by toolbar handlers before repositioning\n      setTimeout(() => {\n        if (this.root.classList.contains('ql-hidden')) return;\n        const range = this.quill.getSelection();\n        if (range != null) {\n          const bounds = this.quill.getBounds(range);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n        }\n      }, 1);\n    });\n  }\n\n  cancel() {\n    this.show();\n  }\n\n  position(reference: Bounds) {\n    const shift = super.position(reference);\n    const arrow = this.root.querySelector('.ql-tooltip-arrow');\n    // @ts-expect-error\n    arrow.style.marginLeft = '';\n    if (shift !== 0) {\n      // @ts-expect-error\n      arrow.style.marginLeft = `${-1 * shift - arrow.offsetWidth / 2}px`;\n    }\n    return shift;\n  }\n}\n\nclass BubbleTheme extends BaseTheme {\n  tooltip: BubbleTooltip;\n\n  constructor(quill: Quill, options: ThemeOptions) {\n    if (\n      options.modules.toolbar != null &&\n      options.modules.toolbar.container == null\n    ) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-bubble');\n  }\n\n  extendToolbar(toolbar: Toolbar) {\n    // @ts-expect-error\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n    if (toolbar.container != null) {\n      this.tooltip.root.appendChild<HTMLElement>(toolbar.container);\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n    }\n  }\n}\nBubbleTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value: string) {\n          if (!value) {\n            this.quill.format('link', false, Quill.sources.USER);\n          } else {\n            // @ts-expect-error\n            this.quill.theme.tooltip.edit();\n          }\n        },\n      },\n    },\n  },\n} satisfies ThemeOptions);\n\nexport { BubbleTooltip, BubbleTheme as default };\n","import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport LinkBlot from '../formats/link.js';\nimport { Range } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nimport type { Context } from '../modules/keyboard.js';\nimport type Toolbar from '../modules/toolbar.js';\nimport type { ToolbarConfig } from '../modules/toolbar.js';\nimport type { ThemeOptions } from '../core/theme.js';\n\nconst TOOLBAR_CONFIG: ToolbarConfig = [\n  [{ header: ['1', '2', '3', false] }],\n  ['bold', 'italic', 'underline', 'link'],\n  [{ list: 'ordered' }, { list: 'bullet' }],\n  ['clean'],\n];\n\nclass SnowTooltip extends BaseTooltip {\n  static TEMPLATE = [\n    '<a class=\"ql-preview\" rel=\"noopener noreferrer\" target=\"_blank\" href=\"about:blank\"></a>',\n    '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n    '<a class=\"ql-action\"></a>',\n    '<a class=\"ql-remove\"></a>',\n  ].join('');\n\n  preview = this.root.querySelector('a.ql-preview');\n\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root\n      .querySelector('a.ql-action')\n      .addEventListener('click', (event) => {\n        if (this.root.classList.contains('ql-editing')) {\n          this.save();\n        } else {\n          // @ts-expect-error Fix me later\n          this.edit('link', this.preview.textContent);\n        }\n        event.preventDefault();\n      });\n    // @ts-expect-error Fix me later\n    this.root\n      .querySelector('a.ql-remove')\n      .addEventListener('click', (event) => {\n        if (this.linkRange != null) {\n          const range = this.linkRange;\n          this.restoreFocus();\n          this.quill.formatText(range, 'link', false, Emitter.sources.USER);\n          delete this.linkRange;\n        }\n        event.preventDefault();\n        this.hide();\n      });\n    this.quill.on(\n      Emitter.events.SELECTION_CHANGE,\n      (range, oldRange, source) => {\n        if (range == null) return;\n        if (range.length === 0 && source === Emitter.sources.USER) {\n          const [link, offset] = this.quill.scroll.descendant(\n            LinkBlot,\n            range.index,\n          );\n          if (link != null) {\n            this.linkRange = new Range(range.index - offset, link.length());\n            const preview = LinkBlot.formats(link.domNode);\n            // @ts-expect-error Fix me later\n            this.preview.textContent = preview;\n            // @ts-expect-error Fix me later\n            this.preview.setAttribute('href', preview);\n            this.show();\n            const bounds = this.quill.getBounds(this.linkRange);\n            if (bounds != null) {\n              this.position(bounds);\n            }\n            return;\n          }\n        } else {\n          delete this.linkRange;\n        }\n        this.hide();\n      },\n    );\n  }\n\n  show() {\n    super.show();\n    this.root.removeAttribute('data-mode');\n  }\n}\n\nclass SnowTheme extends BaseTheme {\n  constructor(quill: Quill, options: ThemeOptions) {\n    if (\n      options.modules.toolbar != null &&\n      options.modules.toolbar.container == null\n    ) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-snow');\n  }\n\n  extendToolbar(toolbar: Toolbar) {\n    if (toolbar.container != null) {\n      toolbar.container.classList.add('ql-snow');\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n      // @ts-expect-error\n      this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n      if (toolbar.container.querySelector('.ql-link')) {\n        this.quill.keyboard.addBinding(\n          { key: 'k', shortKey: true },\n          (_range: Range, context: Context) => {\n            toolbar.handlers.link.call(toolbar, !context.format.link);\n          },\n        );\n      }\n    }\n  }\n}\nSnowTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value: string) {\n          if (value) {\n            const range = this.quill.getSelection();\n            if (range == null || range.length === 0) return;\n            let preview = this.quill.getText(range);\n            if (\n              /^\\S+@\\S+\\.\\S+$/.test(preview) &&\n              preview.indexOf('mailto:') !== 0\n            ) {\n              preview = `mailto:${preview}`;\n            }\n            // @ts-expect-error\n            const { tooltip } = this.quill.theme;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false, Quill.sources.USER);\n          }\n        },\n      },\n    },\n  },\n} satisfies ThemeOptions);\n\nexport default SnowTheme;\n","import Quill from './core.js';\nimport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n} from './core.js';\n\nimport { AlignClass, AlignStyle } from './formats/align.js';\nimport {\n  DirectionAttribute,\n  DirectionClass,\n  DirectionStyle,\n} from './formats/direction.js';\nimport Indent from './formats/indent.js';\n\nimport Blockquote from './formats/blockquote.js';\nimport Header from './formats/header.js';\nimport List from './formats/list.js';\n\nimport { BackgroundClass, BackgroundStyle } from './formats/background.js';\nimport { ColorClass, ColorStyle } from './formats/color.js';\nimport { FontClass, FontStyle } from './formats/font.js';\nimport { SizeClass, SizeStyle } from './formats/size.js';\n\nimport Bold from './formats/bold.js';\nimport Italic from './formats/italic.js';\nimport Link from './formats/link.js';\nimport Script from './formats/script.js';\nimport Strike from './formats/strike.js';\nimport Underline from './formats/underline.js';\n\nimport Formula from './formats/formula.js';\nimport Image from './formats/image.js';\nimport Video from './formats/video.js';\n\nimport CodeBlock, { Code as InlineCode } from './formats/code.js';\n\nimport Syntax from './modules/syntax.js';\nimport Table from './modules/table.js';\nimport Toolbar from './modules/toolbar.js';\n\nimport Icons from './ui/icons.js';\nimport Picker from './ui/picker.js';\nimport ColorPicker from './ui/color-picker.js';\nimport IconPicker from './ui/icon-picker.js';\nimport Tooltip from './ui/tooltip.js';\n\nimport BubbleTheme from './themes/bubble.js';\nimport SnowTheme from './themes/snow.js';\n\nQuill.register(\n  {\n    'attributors/attribute/direction': DirectionAttribute,\n\n    'attributors/class/align': AlignClass,\n    'attributors/class/background': BackgroundClass,\n    'attributors/class/color': ColorClass,\n    'attributors/class/direction': DirectionClass,\n    'attributors/class/font': FontClass,\n    'attributors/class/size': SizeClass,\n\n    'attributors/style/align': AlignStyle,\n    'attributors/style/background': BackgroundStyle,\n    'attributors/style/color': ColorStyle,\n    'attributors/style/direction': DirectionStyle,\n    'attributors/style/font': FontStyle,\n    'attributors/style/size': SizeStyle,\n  },\n  true,\n);\n\nQuill.register(\n  {\n    'formats/align': AlignClass,\n    'formats/direction': DirectionClass,\n    'formats/indent': Indent,\n\n    'formats/background': BackgroundStyle,\n    'formats/color': ColorStyle,\n    'formats/font': FontClass,\n    'formats/size': SizeClass,\n\n    'formats/blockquote': Blockquote,\n    'formats/code-block': CodeBlock,\n    'formats/header': Header,\n    'formats/list': List,\n\n    'formats/bold': Bold,\n    'formats/code': InlineCode,\n    'formats/italic': Italic,\n    'formats/link': Link,\n    'formats/script': Script,\n    'formats/strike': Strike,\n    'formats/underline': Underline,\n\n    'formats/formula': Formula,\n    'formats/image': Image,\n    'formats/video': Video,\n\n    'modules/syntax': Syntax,\n    'modules/table': Table,\n    'modules/toolbar': Toolbar,\n\n    'themes/bubble': BubbleTheme,\n    'themes/snow': SnowTheme,\n\n    'ui/icons': Icons,\n    'ui/picker': Picker,\n    'ui/icon-picker': IconPicker,\n    'ui/color-picker': ColorPicker,\n    'ui/tooltip': Tooltip,\n  },\n  true,\n);\n\nexport {\n  AttributeMap,\n  Delta,\n  Module,\n  Op,\n  OpIterator,\n  Parchment,\n  Range,\n} from './core.js';\nexport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n};\n\nexport default Quill;\n","// TODO: Remove this module from `core-js@4` since it's replaced to module below\nrequire('../modules/es.weak-map.constructor');\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.link` method\n// https://tc39.es/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n","/*\nReact-Quill\nhttps://github.com/zenoamaro/react-quill\n*/\n\nimport React, { createRef } from 'react';\nimport { isEqual } from 'lodash-es';\n\nimport Quill, { type EmitterSource, type Range as RangeStatic, QuillOptions as QuillOptionsStatic } from 'quill';\nimport type DeltaStatic from 'quill-delta';\n\nexport { Quill }\nexport type { DeltaStatic, EmitterSource, RangeStatic, QuillOptionsStatic }\n\n// Merged namespace hack to export types along with default object\n// See: https://github.com/Microsoft/TypeScript/issues/2719\nnamespace ReactQuill {\n  export type Value = string | DeltaStatic;\n  export type Range = RangeStatic | null;\n\n  export interface QuillOptions extends QuillOptionsStatic {\n    tabIndex?: number,\n  }\n\n  export interface ReactQuillProps {\n    bounds?: string | HTMLElement,\n    children?: React.ReactElement<any>,\n    className?: string,\n    defaultValue?: Value,\n    formats?: string[],\n    id?: string,\n    modules?: QuillOptions['modules'],\n    onChange?(\n      value: string,\n      delta: DeltaStatic,\n      source: EmitterSource,\n      editor: UnprivilegedEditor,\n    ): void,\n    onChangeSelection?(\n      selection: Range,\n      source: EmitterSource,\n      editor: UnprivilegedEditor,\n    ): void,\n    onFocus?(\n      selection: Range,\n      source: EmitterSource,\n      editor: UnprivilegedEditor,\n    ): void,\n    onBlur?(\n      previousSelection: Range,\n      source: EmitterSource,\n      editor: UnprivilegedEditor,\n    ): void,\n    onKeyDown?: React.EventHandler<any>,\n    onKeyPress?: React.EventHandler<any>,\n    onKeyUp?: React.EventHandler<any>,\n    placeholder?: string,\n    preserveWhitespace?: boolean,\n    readOnly?: boolean,\n    style?: React.CSSProperties,\n    tabIndex?: number,\n    theme?: string,\n    value?: Value,\n  }\n\n  export interface UnprivilegedEditor {\n    getLength: Quill['getLength'];\n    getText: Quill['getText'];\n    getHTML: () => string;\n    getSemanticHTML: Quill['getSemanticHTML'];\n    getBounds: Quill['getBounds'];\n    getSelection: Quill['getSelection'];\n    getContents: Quill['getContents'];\n  }\n}\n\n// Re-import everything from namespace into scope for comfort\nimport Value = ReactQuill.Value;\nimport Range = ReactQuill.Range;\nimport QuillOptions = ReactQuill.QuillOptions;\nimport ReactQuillProps = ReactQuill.ReactQuillProps;\nimport UnprivilegedEditor = ReactQuill.UnprivilegedEditor;\n\ninterface ReactQuillState {\n  generation: number,\n}\n\nclass ReactQuill extends React.Component<ReactQuillProps, ReactQuillState> {\n  editingAreaRef = createRef<any>();\n\n  static displayName = 'React Quill'\n\n  /*\n  Export Quill to be able to call `register`\n  */\n  static Quill = Quill;\n\n  /*\n  Changing one of these props should cause a full re-render and a\n  re-instantiation of the Quill editor.\n  */\n  dirtyProps: (keyof ReactQuillProps)[] = [\n    'modules',\n    'formats',\n    'bounds',\n    'theme',\n    'children',\n  ]\n\n  /*\n  Changing one of these props should cause a regular update. These are mostly\n  props that act on the container, rather than the quillized editing area.\n  */\n  cleanProps: (keyof ReactQuillProps)[] = [\n    'id',\n    'className',\n    'style',\n    'placeholder',\n    'tabIndex',\n    'onChange',\n    'onChangeSelection',\n    'onFocus',\n    'onBlur',\n    'onKeyPress',\n    'onKeyDown',\n    'onKeyUp',\n  ]\n\n  static defaultProps = {\n    theme: 'snow',\n    modules: {},\n    readOnly: false,\n  }\n\n  state: ReactQuillState = {\n    generation: 0,\n  }\n\n  /*\n  The Quill Editor instance.\n  */\n  editor?: Quill\n\n  /*\n  Tracks the internal value of the Quill editor\n  */\n  value: Value\n\n  /*\n  Tracks the internal selection of the Quill editor\n  */\n  selection: Range = null\n\n  /*\n  Used to compare whether deltas from `onChange` are being used as `value`.\n  */\n  lastDeltaChangeSet?: DeltaStatic\n\n  /*\n  Stores the contents of the editor to be restored after regeneration.\n  */\n  regenerationSnapshot?: {\n    delta: DeltaStatic,\n    selection: Range,\n  }\n\n  /*\n  A weaker, unprivileged proxy for the editor that does not allow accidentally\n  modifying editor state.\n  */\n  unprivilegedEditor?: UnprivilegedEditor\n\n  constructor(props: ReactQuillProps) {\n    super(props);\n    const value = this.isControlled()? props.value : props.defaultValue;\n    this.value = value ?? '';\n  }\n\n  validateProps(props: ReactQuillProps): void {\n    if (React.Children.count(props.children) > 1) throw new Error(\n      'The Quill editing area can only be composed of a single React element.'\n    );\n\n    if (React.Children.count(props.children)) {\n      const child = React.Children.only(props.children);\n      if (child?.type === 'textarea') throw new Error(\n        'Quill does not support editing on a <textarea>. Use a <div> instead.'\n      );\n    }\n\n    if (\n      this.lastDeltaChangeSet &&\n      props.value === this.lastDeltaChangeSet\n    ) throw new Error(\n      'You are passing the `delta` object from the `onChange` event back ' +\n      'as `value`. You most probably want `editor.getContents()` instead. ' +\n      'See: https://github.com/zenoamaro/react-quill#using-deltas'\n    );\n  }\n\n  shouldComponentUpdate(nextProps: ReactQuillProps, nextState: ReactQuillState) {\n    this.validateProps(nextProps);\n\n    // If the editor hasn't been instantiated yet, or the component has been\n    // regenerated, we already know we should update.\n    if (!this.editor || this.state.generation !== nextState.generation) {\n      return true;\n    }\n\n    // Handle value changes in-place\n    if ('value' in nextProps) {\n      const prevContents = this.getEditorContents();\n      const nextContents = nextProps.value ?? '';\n\n      // NOTE: Seeing that Quill is missing a way to prevent edits, we have to\n      //       settle for a hybrid between controlled and uncontrolled mode. We\n      //       can't prevent the change, but we'll still override content\n      //       whenever `value` differs from current state.\n      // NOTE: Comparing an HTML string and a Quill Delta will always trigger a\n      //       change, regardless of whether they represent the same document.\n      if (!this.isEqualValue(nextContents, prevContents)) {\n        this.setEditorContents(this.editor, nextContents);\n      }\n    }\n\n    // Handle read-only changes in-place\n    if (nextProps.readOnly !== this.props.readOnly) {\n      this.setEditorReadOnly(this.editor, nextProps.readOnly!);\n    }\n\n    // Clean and Dirty props require a render\n    return [...this.cleanProps, ...this.dirtyProps].some((prop) => {\n      return !isEqual(nextProps[prop], this.props[prop]);\n    });\n  }\n\n  shouldComponentRegenerate(nextProps: ReactQuillProps): boolean {\n    // Whenever a `dirtyProp` changes, the editor needs reinstantiation.\n    return this.dirtyProps.some((prop) => {\n      return !isEqual(nextProps[prop], this.props[prop]);\n    });\n  }\n\n  componentDidMount() {\n    this.instantiateEditor();\n    this.setEditorContents(this.editor!, this.getEditorContents());\n  }\n\n  componentWillUnmount() {\n    this.destroyEditor();\n  }\n\n  componentDidUpdate(prevProps: ReactQuillProps, prevState: ReactQuillState) {\n    // If we're changing one of the `dirtyProps`, the entire Quill Editor needs\n    // to be re-instantiated. Regenerating the editor will cause the whole tree,\n    // including the container, to be cleaned up and re-rendered from scratch.\n    // Store the contents so they can be restored later.\n    if (this.editor && this.shouldComponentRegenerate(prevProps)) {\n      const delta = this.editor.getContents();\n      const selection = this.editor.getSelection();\n      this.regenerationSnapshot = {delta, selection};\n      this.setState({generation: this.state.generation + 1});\n      this.destroyEditor();\n    }\n\n    // The component has been regenerated, so it must be re-instantiated, and\n    // its content must be restored to the previous values from the snapshot.\n    if (this.state.generation !== prevState.generation) {\n      const {delta, selection} = this.regenerationSnapshot!;\n      delete this.regenerationSnapshot;\n      this.instantiateEditor();\n      const editor = this.editor!;\n      editor.setContents(delta);\n      postpone(() => this.setEditorSelection(editor, selection));\n    }\n  }\n\n  instantiateEditor(): void {\n    if (this.editor) {\n      this.hookEditor(this.editor);\n    } else {\n      this.editor = this.createEditor(\n        this.getEditingArea(),\n        this.getEditorConfig()\n      );\n    }\n  }\n\n  destroyEditor(): void {\n    if (!this.editor) return;\n    this.unhookEditor(this.editor);\n    // There is a buggy interaction between Quill and React 18+ strict mode, where\n    // strict mode re-renders this component twice in the span of time that Quill\n    // is mounting. This causes the toolbar to be rendered twice.\n    // We check for and remove the toolbar if it exists, but only if we're not using\n    // a custom external toolbar (which we don't want to remove).\n    const toolbar = this.props.modules?.toolbar;\n    const usingExternalToolbar =\n      (typeof toolbar === \"object\" &&\n        toolbar &&\n        \"container\" in toolbar &&\n        typeof toolbar.container === \"string\") ||\n      typeof toolbar === \"string\";\n    if (!usingExternalToolbar) {\n      const leftOverToolbar = document.querySelector(\".ql-toolbar\");\n      if (leftOverToolbar) {\n        leftOverToolbar.remove();\n      }\n    }\n    delete this.editor;\n  }\n\n  /*\n  We consider the component to be controlled if `value` is being sent in props.\n  */\n  isControlled(): boolean {\n    return 'value' in this.props;\n  }\n\n  getEditorConfig(): QuillOptions {\n    return {\n      bounds: this.props.bounds,\n      formats: this.props.formats,\n      modules: this.props.modules,\n      placeholder: this.props.placeholder,\n      readOnly: this.props.readOnly,\n      tabIndex: this.props.tabIndex,\n      theme: this.props.theme,\n    };\n  }\n\n  getEditor(): Quill {\n    if (!this.editor) throw new Error('Accessing non-instantiated editor');\n    return this.editor;\n  }\n\n  /**\n  Creates an editor on the given element. The editor will be passed the\n  configuration, have its events bound,\n  */\n  createEditor(element: HTMLElement, config: QuillOptions) {\n    const editor = new Quill(element, config);\n    if (config.tabIndex != null) {\n      this.setEditorTabIndex(editor, config.tabIndex);\n    }\n    this.hookEditor(editor);\n    return editor;\n  }\n\n  hookEditor(editor: Quill) {\n    // Expose the editor on change events via a weaker, unprivileged proxy\n    // object that does not allow accidentally modifying editor state.\n    this.unprivilegedEditor = this.makeUnprivilegedEditor(editor);\n    // Using `editor-change` allows picking up silent updates, like selection\n    // changes on typing.\n    editor.on('editor-change', this.onEditorChange);\n  }\n\n  unhookEditor(editor: Quill) {\n    editor.off('editor-change', this.onEditorChange);\n  }\n\n  getEditorContents(): Value {\n    return this.value;\n  }\n\n  getEditorSelection(): Range {\n    return this.selection;\n  }\n\n  /*\n  True if the value is a Delta instance or a Delta look-alike.\n  */\n  isDelta(value: any): boolean {\n    return value && value.ops;\n  }\n\n  /*\n  Special comparison function that knows how to compare Deltas.\n  */\n  isEqualValue(value: any, nextValue: any): boolean {\n    if (this.isDelta(value) && this.isDelta(nextValue)) {\n      return isEqual(value.ops, nextValue.ops);\n    } else {\n      return isEqual(value, nextValue);\n    }\n  }\n\n  /*\n  Replace the contents of the editor, but keep the previous selection hanging\n  around so that the cursor won't move.\n  */\n  setEditorContents(editor: Quill, value: Value) {\n    this.value = value;\n    const sel = this.getEditorSelection();\n    if (typeof value === 'string') {\n      editor.setContents(editor.clipboard.convert({html: value}));\n    } else {\n      editor.setContents(value);\n    }\n    postpone(() => this.setEditorSelection(editor, sel));\n  }\n\n  setEditorSelection(editor: Quill, range: Range) {\n    this.selection = range;\n    if (range) {\n      // Validate bounds before applying.\n      const length = editor.getLength();\n      range.index = Math.max(0, Math.min(range.index, length-1));\n      range.length = Math.max(0, Math.min(range.length, (length-1) - range.index));\n      editor.setSelection(range);\n    }\n  }\n\n  setEditorTabIndex(editor: Quill, tabIndex: number) {\n    if (editor?.scroll?.domNode) {\n      (editor.scroll.domNode as HTMLElement).tabIndex = tabIndex;\n    }\n  }\n\n  setEditorReadOnly(editor: Quill, value: boolean) {\n    if (value) {\n      editor.disable();\n    } else {\n      editor.enable();\n    }\n  }\n\n  /*\n  Returns a weaker, unprivileged proxy object that only exposes read-only\n  accessors found on the editor instance, without any state-modifying methods.\n  */\n  makeUnprivilegedEditor(editor: Quill) {\n    const e = editor;\n    return {\n      getHTML:         () => e.root.innerHTML,\n      getSemanticHTML: e.getSemanticHTML.bind(e),\n      getLength:       e.getLength.bind(e),\n      getText:         e.getText.bind(e),\n      getContents:     e.getContents.bind(e),\n      getSelection:    e.getSelection.bind(e),\n      getBounds:       e.getBounds.bind(e),\n    };\n  }\n\n  getEditingArea(): HTMLElement {\n    const element = this.editingAreaRef.current;\n    if (!element) {\n      throw new Error('Cannot find element for editing area');\n    }\n    if (element.nodeType === 3) {\n      throw new Error('Editing area cannot be a text node');\n    }\n    return element as HTMLElement;\n  }\n\n  /*\n  Renders an editor area, unless it has been provided one to clone.\n  */\n  renderEditingArea(): JSX.Element {\n    const {children, preserveWhitespace} = this.props;\n    const {generation} = this.state;\n\n    const properties = {\n      key: generation,\n      ref: this.editingAreaRef,\n    };\n\n    if (React.Children.count(children)) {\n      return React.cloneElement(\n        React.Children.only(children)!,\n        properties\n      );\n    }\n\n    return preserveWhitespace ?\n      <pre {...properties}/> :\n      <div {...properties}/>;\n  }\n\n  render() {\n    return (\n      <div\n        id={this.props.id}\n        style={this.props.style}\n        key={this.state.generation}\n        className={`quill ${this.props.className ?? ''}`}\n        onKeyPress={this.props.onKeyPress}\n        onKeyDown={this.props.onKeyDown}\n        onKeyUp={this.props.onKeyUp}\n      >\n        {this.renderEditingArea()}\n      </div>\n    );\n  }\n\n  onEditorChange = (\n    eventName: 'text-change' | 'selection-change',\n    rangeOrDelta: Range | DeltaStatic,\n    oldRangeOrDelta: Range | DeltaStatic,\n    source: EmitterSource,\n  ) => {\n    if (eventName === 'text-change') {\n      this.onEditorChangeText?.(\n        this.editor!.root.innerHTML,\n        rangeOrDelta as DeltaStatic,\n        source,\n        this.unprivilegedEditor!\n      );\n    } else if (eventName === 'selection-change') {\n      this.onEditorChangeSelection?.(\n        rangeOrDelta as RangeStatic,\n        source,\n        this.unprivilegedEditor!\n      );\n    }\n  };\n\n  onEditorChangeText(\n    value: string,\n    delta: DeltaStatic,\n    source: EmitterSource,\n    editor: UnprivilegedEditor,\n  ): void {\n    if (!this.editor) return;\n\n    // We keep storing the same type of value as what the user gives us,\n    // so that value comparisons will be more stable and predictable.\n    const nextContents = this.isDelta(this.value)\n      ? editor.getContents()\n      : editor.getHTML();\n\n    if (nextContents !== this.getEditorContents()) {\n      // Taint this `delta` object, so we can recognize whether the user\n      // is trying to send it back as `value`, preventing a likely loop.\n      this.lastDeltaChangeSet = delta;\n\n      this.value = nextContents;\n      this.props.onChange?.(value, delta, source, editor);\n    }\n  }\n\n  onEditorChangeSelection(\n    nextSelection: RangeStatic,\n    source: EmitterSource,\n    editor: UnprivilegedEditor,\n  ): void {\n    if (!this.editor) return;\n    const currentSelection = this.getEditorSelection();\n    const hasGainedFocus = !currentSelection && nextSelection;\n    const hasLostFocus = currentSelection && !nextSelection;\n\n    if (isEqual(nextSelection, currentSelection)) return;\n\n    this.selection = nextSelection;\n    this.props.onChangeSelection?.(nextSelection, source, editor);\n\n    if (hasGainedFocus) {\n      this.props.onFocus?.(nextSelection, source, editor);\n    } else if (hasLostFocus) {\n      this.props.onBlur?.(currentSelection, source, editor);\n    }\n  }\n\n  focus(): void {\n    if (!this.editor) return;\n    this.editor.focus();\n  }\n\n  blur(): void {\n    if (!this.editor) return;\n    this.selection = null;\n    this.editor.blur();\n  }\n}\n\n/*\nSmall helper to execute a function in the next micro-tick.\n*/\nfunction postpone(fn: (value: void) => void) {\n  Promise.resolve().then(fn);\n}\n\nexport default ReactQuill;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Op;\n(function (Op) {\n    function length(op) {\n        if (typeof op.delete === 'number') {\n            return op.delete;\n        }\n        else if (typeof op.retain === 'number') {\n            return op.retain;\n        }\n        else if (typeof op.retain === 'object' && op.retain !== null) {\n            return 1;\n        }\n        else {\n            return typeof op.insert === 'string' ? op.insert.length : 1;\n        }\n    }\n    Op.length = length;\n})(Op || (Op = {}));\nexports.default = Op;\n//# sourceMappingURL=Op.js.map","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","var escapeHtmlChar = require('./_escapeHtmlChar'),\n    toString = require('./toString');\n\n/** Used to match HTML entities and HTML characters. */\nvar reUnescapedHtml = /[&<>\"']/g,\n    reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n/**\n * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * corresponding HTML entities.\n *\n * **Note:** No other characters are escaped. To escape additional\n * characters use a third-party library like [_he_](https://mths.be/he).\n *\n * Though the \">\" character is escaped for symmetry, characters like\n * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n * unless they're part of a tag or unquoted attribute value. See\n * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n * (under \"semi-related fun fact\") for more details.\n *\n * When working with HTML you should always\n * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n * XSS vectors.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escape('fred, barney, & pebbles');\n * // => 'fred, barney, &amp; pebbles'\n */\nfunction escape(string) {\n  string = toString(string);\n  return (string && reHasUnescapedHtml.test(string))\n    ? string.replace(reUnescapedHtml, escapeHtmlChar)\n    : string;\n}\n\nmodule.exports = escape;\n","var basePropertyOf = require('./_basePropertyOf');\n\n/** Used to map characters to HTML entities. */\nvar htmlEscapes = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\n\n/**\n * Used by `_.escape` to convert characters to HTML entities.\n *\n * @private\n * @param {string} chr The matched character to escape.\n * @returns {string} Returns the escaped character.\n */\nvar escapeHtmlChar = basePropertyOf(htmlEscapes);\n\nmodule.exports = escapeHtmlChar;\n","/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = basePropertyOf;\n","/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int|Object} [cursor_pos] Edit position in text1 or object with more info\n * @param {boolean} [cleanup] Apply semantic cleanup before returning.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos, cleanup, _fix_unicode) {\n  // Check for equality\n  if (text1 === text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  if (cursor_pos != null) {\n    var editdiff = find_cursor_edit_diff(text1, text2, cursor_pos);\n    if (editdiff) {\n      return editdiff;\n    }\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs, _fix_unicode);\n  if (cleanup) {\n    diff_cleanupSemantic(diffs);\n  }\n  return diffs;\n}\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)],\n    ];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [\n      [DIFF_DELETE, text1],\n      [DIFF_INSERT, text2],\n    ];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n}\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = delta % 2 !== 0;\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 === -d || (k1 !== d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (\n        x1 < text1_length &&\n        y1 < text2_length &&\n        text1.charAt(x1) === text2.charAt(y1)\n      ) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 === -d || (k2 !== d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (\n        x2 < text1_length &&\n        y2 < text2_length &&\n        text1.charAt(text1_length - x2 - 1) ===\n          text2.charAt(text2_length - y2 - 1)\n      ) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] !== -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [\n    [DIFF_DELETE, text1],\n    [DIFF_INSERT, text2],\n  ];\n}\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n}\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) !== text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(pointerstart, pointermid) ==\n      text2.substring(pointerstart, pointermid)\n    ) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_start(text1.charCodeAt(pointermid - 1))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\nfunction diff_commonOverlap_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (\n      found == 0 ||\n      text1.substring(text_length - length) == text2.substring(0, length)\n    ) {\n      best = length;\n      length++;\n    }\n  }\n}\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.slice(-1) !== text2.slice(-1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n      text2.substring(text2.length - pointermid, text2.length - pointerend)\n    ) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_end(text1.charCodeAt(text1.length - pointermid))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = \"\";\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) !== -1) {\n      var prefixLength = diff_commonPrefix(\n        longtext.substring(i),\n        shorttext.substring(j)\n      );\n      var suffixLength = diff_commonSuffix(\n        longtext.substring(0, i),\n        shorttext.substring(0, j)\n      );\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common =\n          shorttext.substring(j - suffixLength, j) +\n          shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [\n        best_longtext_a,\n        best_longtext_b,\n        best_shorttext_a,\n        best_shorttext_b,\n        best_common,\n      ];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 4)\n  );\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 2)\n  );\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n}\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemantic(diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastequality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastequality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (\n        lastequality &&\n        lastequality.length <=\n          Math.max(length_insertions1, length_deletions1) &&\n        lastequality.length <= Math.max(length_insertions2, length_deletions2)\n      ) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, [\n          DIFF_DELETE,\n          lastequality,\n        ]);\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastequality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n  diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (\n      diffs[pointer - 1][0] == DIFF_DELETE &&\n      diffs[pointer][0] == DIFF_INSERT\n    ) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (\n          overlap_length1 >= deletion.length / 2 ||\n          overlap_length1 >= insertion.length / 2\n        ) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            insertion.substring(0, overlap_length1),\n          ]);\n          diffs[pointer - 1][1] = deletion.substring(\n            0,\n            deletion.length - overlap_length1\n          );\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (\n          overlap_length2 >= deletion.length / 2 ||\n          overlap_length2 >= insertion.length / 2\n        ) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            deletion.substring(0, overlap_length2),\n          ]);\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(\n            0,\n            insertion.length - overlap_length2\n          );\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n}\n\nvar nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\nvar whitespaceRegex_ = /\\s/;\nvar linebreakRegex_ = /[\\r\\n]/;\nvar blanklineEndRegex_ = /\\n\\r?\\n$/;\nvar blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemanticLossless(diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] == DIFF_EQUAL &&\n      diffs[pointer + 1][0] == DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore =\n        diff_cleanupSemanticScore_(equality1, edit) +\n        diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score =\n          diff_cleanupSemanticScore_(equality1, edit) +\n          diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n}\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n * @param {boolean} fix_unicode Whether to normalize to a unicode-correct diff\n */\nfunction diff_cleanupMerge(diffs, fix_unicode) {\n  diffs.push([DIFF_EQUAL, \"\"]); // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = \"\";\n  var text_insert = \"\";\n  var commonlength;\n  while (pointer < diffs.length) {\n    if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n      diffs.splice(pointer, 1);\n      continue;\n    }\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        var previous_equality = pointer - count_insert - count_delete - 1;\n        if (fix_unicode) {\n          // prevent splitting of unicode surrogate pairs.  when fix_unicode is true,\n          // we assume that the old and new text in the diff are complete and correct\n          // unicode-encoded JS strings, but the tuple boundaries may fall between\n          // surrogate pairs.  we fix this by shaving off stray surrogates from the end\n          // of the previous equality and the beginning of this equality.  this may create\n          // empty equalities or a common prefix or suffix.  for example, if AB and AC are\n          // emojis, `[[0, 'A'], [-1, 'BA'], [0, 'C']]` would turn into deleting 'ABAC' and\n          // inserting 'AC', and then the common suffix 'AC' will be eliminated.  in this\n          // particular case, both equalities go away, we absorb any previous inequalities,\n          // and we keep scanning for the next equality before rewriting the tuples.\n          if (\n            previous_equality >= 0 &&\n            ends_with_pair_start(diffs[previous_equality][1])\n          ) {\n            var stray = diffs[previous_equality][1].slice(-1);\n            diffs[previous_equality][1] = diffs[previous_equality][1].slice(\n              0,\n              -1\n            );\n            text_delete = stray + text_delete;\n            text_insert = stray + text_insert;\n            if (!diffs[previous_equality][1]) {\n              // emptied out previous equality, so delete it and include previous delete/insert\n              diffs.splice(previous_equality, 1);\n              pointer--;\n              var k = previous_equality - 1;\n              if (diffs[k] && diffs[k][0] === DIFF_INSERT) {\n                count_insert++;\n                text_insert = diffs[k][1] + text_insert;\n                k--;\n              }\n              if (diffs[k] && diffs[k][0] === DIFF_DELETE) {\n                count_delete++;\n                text_delete = diffs[k][1] + text_delete;\n                k--;\n              }\n              previous_equality = k;\n            }\n          }\n          if (starts_with_pair_end(diffs[pointer][1])) {\n            var stray = diffs[pointer][1].charAt(0);\n            diffs[pointer][1] = diffs[pointer][1].slice(1);\n            text_delete += stray;\n            text_insert += stray;\n          }\n        }\n        if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n          // for empty equality not at end, wait for next equality\n          diffs.splice(pointer, 1);\n          break;\n        }\n        if (text_delete.length > 0 || text_insert.length > 0) {\n          // note that diff_commonPrefix and diff_commonSuffix are unicode-aware\n          if (text_delete.length > 0 && text_insert.length > 0) {\n            // Factor out any common prefixes.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (previous_equality >= 0) {\n                diffs[previous_equality][1] += text_insert.substring(\n                  0,\n                  commonlength\n                );\n              } else {\n                diffs.splice(0, 0, [\n                  DIFF_EQUAL,\n                  text_insert.substring(0, commonlength),\n                ]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixes.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] =\n                text_insert.substring(text_insert.length - commonlength) +\n                diffs[pointer][1];\n              text_insert = text_insert.substring(\n                0,\n                text_insert.length - commonlength\n              );\n              text_delete = text_delete.substring(\n                0,\n                text_delete.length - commonlength\n              );\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          var n = count_insert + count_delete;\n          if (text_delete.length === 0 && text_insert.length === 0) {\n            diffs.splice(pointer - n, n);\n            pointer = pointer - n;\n          } else if (text_delete.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 1;\n          } else if (text_insert.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete]);\n            pointer = pointer - n + 1;\n          } else {\n            diffs.splice(\n              pointer - n,\n              n,\n              [DIFF_DELETE, text_delete],\n              [DIFF_INSERT, text_insert]\n            );\n            pointer = pointer - n + 2;\n          }\n        }\n        if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = \"\";\n        text_insert = \"\";\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === \"\") {\n    diffs.pop(); // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      if (\n        diffs[pointer][1].substring(\n          diffs[pointer][1].length - diffs[pointer - 1][1].length\n        ) === diffs[pointer - 1][1]\n      ) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] =\n          diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(\n            0,\n            diffs[pointer][1].length - diffs[pointer - 1][1].length\n          );\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (\n        diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n        diffs[pointer + 1][1]\n      ) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n          diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs, fix_unicode);\n  }\n}\n\nfunction is_surrogate_pair_start(charCode) {\n  return charCode >= 0xd800 && charCode <= 0xdbff;\n}\n\nfunction is_surrogate_pair_end(charCode) {\n  return charCode >= 0xdc00 && charCode <= 0xdfff;\n}\n\nfunction starts_with_pair_end(str) {\n  return is_surrogate_pair_end(str.charCodeAt(0));\n}\n\nfunction ends_with_pair_start(str) {\n  return is_surrogate_pair_start(str.charCodeAt(str.length - 1));\n}\n\nfunction remove_empty_tuples(tuples) {\n  var ret = [];\n  for (var i = 0; i < tuples.length; i++) {\n    if (tuples[i][1].length > 0) {\n      ret.push(tuples[i]);\n    }\n  }\n  return ret;\n}\n\nfunction make_edit_splice(before, oldMiddle, newMiddle, after) {\n  if (ends_with_pair_start(before) || starts_with_pair_end(after)) {\n    return null;\n  }\n  return remove_empty_tuples([\n    [DIFF_EQUAL, before],\n    [DIFF_DELETE, oldMiddle],\n    [DIFF_INSERT, newMiddle],\n    [DIFF_EQUAL, after],\n  ]);\n}\n\nfunction find_cursor_edit_diff(oldText, newText, cursor_pos) {\n  // note: this runs after equality check has ruled out exact equality\n  var oldRange =\n    typeof cursor_pos === \"number\"\n      ? { index: cursor_pos, length: 0 }\n      : cursor_pos.oldRange;\n  var newRange = typeof cursor_pos === \"number\" ? null : cursor_pos.newRange;\n  // take into account the old and new selection to generate the best diff\n  // possible for a text edit.  for example, a text change from \"xxx\" to \"xx\"\n  // could be a delete or forwards-delete of any one of the x's, or the\n  // result of selecting two of the x's and typing \"x\".\n  var oldLength = oldText.length;\n  var newLength = newText.length;\n  if (oldRange.length === 0 && (newRange === null || newRange.length === 0)) {\n    // see if we have an insert or delete before or after cursor\n    var oldCursor = oldRange.index;\n    var oldBefore = oldText.slice(0, oldCursor);\n    var oldAfter = oldText.slice(oldCursor);\n    var maybeNewCursor = newRange ? newRange.index : null;\n    editBefore: {\n      // is this an insert or delete right before oldCursor?\n      var newCursor = oldCursor + newLength - oldLength;\n      if (maybeNewCursor !== null && maybeNewCursor !== newCursor) {\n        break editBefore;\n      }\n      if (newCursor < 0 || newCursor > newLength) {\n        break editBefore;\n      }\n      var newBefore = newText.slice(0, newCursor);\n      var newAfter = newText.slice(newCursor);\n      if (newAfter !== oldAfter) {\n        break editBefore;\n      }\n      var prefixLength = Math.min(oldCursor, newCursor);\n      var oldPrefix = oldBefore.slice(0, prefixLength);\n      var newPrefix = newBefore.slice(0, prefixLength);\n      if (oldPrefix !== newPrefix) {\n        break editBefore;\n      }\n      var oldMiddle = oldBefore.slice(prefixLength);\n      var newMiddle = newBefore.slice(prefixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldAfter);\n    }\n    editAfter: {\n      // is this an insert or delete right after oldCursor?\n      if (maybeNewCursor !== null && maybeNewCursor !== oldCursor) {\n        break editAfter;\n      }\n      var cursor = oldCursor;\n      var newBefore = newText.slice(0, cursor);\n      var newAfter = newText.slice(cursor);\n      if (newBefore !== oldBefore) {\n        break editAfter;\n      }\n      var suffixLength = Math.min(oldLength - cursor, newLength - cursor);\n      var oldSuffix = oldAfter.slice(oldAfter.length - suffixLength);\n      var newSuffix = newAfter.slice(newAfter.length - suffixLength);\n      if (oldSuffix !== newSuffix) {\n        break editAfter;\n      }\n      var oldMiddle = oldAfter.slice(0, oldAfter.length - suffixLength);\n      var newMiddle = newAfter.slice(0, newAfter.length - suffixLength);\n      return make_edit_splice(oldBefore, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n  if (oldRange.length > 0 && newRange && newRange.length === 0) {\n    replaceRange: {\n      // see if diff could be a splice of the old selection range\n      var oldPrefix = oldText.slice(0, oldRange.index);\n      var oldSuffix = oldText.slice(oldRange.index + oldRange.length);\n      var prefixLength = oldPrefix.length;\n      var suffixLength = oldSuffix.length;\n      if (newLength < prefixLength + suffixLength) {\n        break replaceRange;\n      }\n      var newPrefix = newText.slice(0, prefixLength);\n      var newSuffix = newText.slice(newLength - suffixLength);\n      if (oldPrefix !== newPrefix || oldSuffix !== newSuffix) {\n        break replaceRange;\n      }\n      var oldMiddle = oldText.slice(prefixLength, oldLength - suffixLength);\n      var newMiddle = newText.slice(prefixLength, newLength - suffixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n\n  return null;\n}\n\nfunction diff(text1, text2, cursor_pos, cleanup) {\n  // only pass fix_unicode=true at the top level, not when diff_main is\n  // recursively invoked\n  return diff_main(text1, text2, cursor_pos, cleanup, true);\n}\n\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cloneDeep = require(\"lodash.clonedeep\");\nconst isEqual = require(\"lodash.isequal\");\nvar AttributeMap;\n(function (AttributeMap) {\n    function compose(a = {}, b = {}, keepNull = false) {\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        let attributes = cloneDeep(b);\n        if (!keepNull) {\n            attributes = Object.keys(attributes).reduce((copy, key) => {\n                if (attributes[key] != null) {\n                    copy[key] = attributes[key];\n                }\n                return copy;\n            }, {});\n        }\n        for (const key in a) {\n            if (a[key] !== undefined && b[key] === undefined) {\n                attributes[key] = a[key];\n            }\n        }\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.compose = compose;\n    function diff(a = {}, b = {}) {\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        const attributes = Object.keys(a)\n            .concat(Object.keys(b))\n            .reduce((attrs, key) => {\n            if (!isEqual(a[key], b[key])) {\n                attrs[key] = b[key] === undefined ? null : b[key];\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.diff = diff;\n    function invert(attr = {}, base = {}) {\n        attr = attr || {};\n        const baseInverted = Object.keys(base).reduce((memo, key) => {\n            if (base[key] !== attr[key] && attr[key] !== undefined) {\n                memo[key] = base[key];\n            }\n            return memo;\n        }, {});\n        return Object.keys(attr).reduce((memo, key) => {\n            if (attr[key] !== base[key] && base[key] === undefined) {\n                memo[key] = null;\n            }\n            return memo;\n        }, baseInverted);\n    }\n    AttributeMap.invert = invert;\n    function transform(a, b, priority = false) {\n        if (typeof a !== 'object') {\n            return b;\n        }\n        if (typeof b !== 'object') {\n            return undefined;\n        }\n        if (!priority) {\n            return b; // b simply overwrites us without priority\n        }\n        const attributes = Object.keys(b).reduce((attrs, key) => {\n            if (a[key] === undefined) {\n                attrs[key] = b[key]; // null is a valid value\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.transform = transform;\n})(AttributeMap || (AttributeMap = {}));\nexports.default = AttributeMap;\n//# sourceMappingURL=AttributeMap.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Op_1 = require(\"./Op\");\nclass Iterator {\n    constructor(ops) {\n        this.ops = ops;\n        this.index = 0;\n        this.offset = 0;\n    }\n    hasNext() {\n        return this.peekLength() < Infinity;\n    }\n    next(length) {\n        if (!length) {\n            length = Infinity;\n        }\n        const nextOp = this.ops[this.index];\n        if (nextOp) {\n            const offset = this.offset;\n            const opLength = Op_1.default.length(nextOp);\n            if (length >= opLength - offset) {\n                length = opLength - offset;\n                this.index += 1;\n                this.offset = 0;\n            }\n            else {\n                this.offset += length;\n            }\n            if (typeof nextOp.delete === 'number') {\n                return { delete: length };\n            }\n            else {\n                const retOp = {};\n                if (nextOp.attributes) {\n                    retOp.attributes = nextOp.attributes;\n                }\n                if (typeof nextOp.retain === 'number') {\n                    retOp.retain = length;\n                }\n                else if (typeof nextOp.retain === 'object' &&\n                    nextOp.retain !== null) {\n                    // offset should === 0, length should === 1\n                    retOp.retain = nextOp.retain;\n                }\n                else if (typeof nextOp.insert === 'string') {\n                    retOp.insert = nextOp.insert.substr(offset, length);\n                }\n                else {\n                    // offset should === 0, length should === 1\n                    retOp.insert = nextOp.insert;\n                }\n                return retOp;\n            }\n        }\n        else {\n            return { retain: Infinity };\n        }\n    }\n    peek() {\n        return this.ops[this.index];\n    }\n    peekLength() {\n        if (this.ops[this.index]) {\n            // Should never return 0 if our index is being managed correctly\n            return Op_1.default.length(this.ops[this.index]) - this.offset;\n        }\n        else {\n            return Infinity;\n        }\n    }\n    peekType() {\n        const op = this.ops[this.index];\n        if (op) {\n            if (typeof op.delete === 'number') {\n                return 'delete';\n            }\n            else if (typeof op.retain === 'number' ||\n                (typeof op.retain === 'object' && op.retain !== null)) {\n                return 'retain';\n            }\n            else {\n                return 'insert';\n            }\n        }\n        return 'retain';\n    }\n    rest() {\n        if (!this.hasNext()) {\n            return [];\n        }\n        else if (this.offset === 0) {\n            return this.ops.slice(this.index);\n        }\n        else {\n            const offset = this.offset;\n            const index = this.index;\n            const next = this.next();\n            const rest = this.ops.slice(this.index);\n            this.offset = offset;\n            this.index = index;\n            return [next].concat(rest);\n        }\n    }\n}\nexports.default = Iterator;\n//# sourceMappingURL=OpIterator.js.map","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltIns = require('../internals/define-built-ins');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar collection = require('../internals/collection');\nvar collectionWeak = require('../internals/collection-weak');\nvar isObject = require('../internals/is-object');\nvar isExtensible = require('../internals/object-is-extensible');\nvar enforceInternalState = require('../internals/internal-state').enforce;\nvar NATIVE_WEAK_MAP = require('../internals/native-weak-map');\n\nvar IS_IE11 = !global.ActiveXObject && 'ActiveXObject' in global;\nvar InternalWeakMap;\n\nvar wrapper = function (init) {\n  return function WeakMap() {\n    return init(this, arguments.length ? arguments[0] : undefined);\n  };\n};\n\n// `WeakMap` constructor\n// https://tc39.es/ecma262/#sec-weakmap-constructor\nvar $WeakMap = collection('WeakMap', wrapper, collectionWeak);\n\n// IE11 WeakMap frozen keys fix\n// We can't use feature detection because it crash some old IE builds\n// https://github.com/zloirock/core-js/issues/485\nif (NATIVE_WEAK_MAP && IS_IE11) {\n  InternalWeakMap = collectionWeak.getConstructor(wrapper, 'WeakMap', true);\n  InternalMetadataModule.enable();\n  var WeakMapPrototype = $WeakMap.prototype;\n  var nativeDelete = uncurryThis(WeakMapPrototype['delete']);\n  var nativeHas = uncurryThis(WeakMapPrototype.has);\n  var nativeGet = uncurryThis(WeakMapPrototype.get);\n  var nativeSet = uncurryThis(WeakMapPrototype.set);\n  defineBuiltIns(WeakMapPrototype, {\n    'delete': function (key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeDelete(this, key) || state.frozen['delete'](key);\n      } return nativeDelete(this, key);\n    },\n    has: function has(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas(this, key) || state.frozen.has(key);\n      } return nativeHas(this, key);\n    },\n    get: function get(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas(this, key) ? nativeGet(this, key) : state.frozen.get(key);\n      } return nativeGet(this, key);\n    },\n    set: function set(key, value) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        nativeHas(this, key) ? nativeSet(this, key, value) : state.frozen.set(key, value);\n      } else nativeSet(this, key, value);\n      return this;\n    }\n  });\n}\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltIns = require('../internals/define-built-ins');\nvar getWeakData = require('../internals/internal-metadata').getWeakData;\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar ArrayIterationModule = require('../internals/array-iteration');\nvar hasOwn = require('../internals/has-own-property');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\nvar find = ArrayIterationModule.find;\nvar findIndex = ArrayIterationModule.findIndex;\nvar splice = uncurryThis([].splice);\nvar id = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function (store) {\n  return store.frozen || (store.frozen = new UncaughtFrozenStore());\n};\n\nvar UncaughtFrozenStore = function () {\n  this.entries = [];\n};\n\nvar findUncaughtFrozen = function (store, key) {\n  return find(store.entries, function (it) {\n    return it[0] === key;\n  });\n};\n\nUncaughtFrozenStore.prototype = {\n  get: function (key) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) return entry[1];\n  },\n  has: function (key) {\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function (key, value) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) entry[1] = value;\n    else this.entries.push([key, value]);\n  },\n  'delete': function (key) {\n    var index = findIndex(this.entries, function (it) {\n      return it[0] === key;\n    });\n    if (~index) splice(this.entries, index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var Constructor = wrapper(function (that, iterable) {\n      anInstance(that, Prototype);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        id: id++,\n        frozen: undefined\n      });\n      if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var Prototype = Constructor.prototype;\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var data = getWeakData(anObject(key), true);\n      if (data === true) uncaughtFrozenStore(state).set(key, value);\n      else data[state.id] = value;\n      return that;\n    };\n\n    defineBuiltIns(Prototype, {\n      // `{ WeakMap, WeakSet }.prototype.delete(key)` methods\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.delete\n      // https://tc39.es/ecma262/#sec-weakset.prototype.delete\n      'delete': function (key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state)['delete'](key);\n        return data && hasOwn(data, state.id) && delete data[state.id];\n      },\n      // `{ WeakMap, WeakSet }.prototype.has(key)` methods\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.has\n      // https://tc39.es/ecma262/#sec-weakset.prototype.has\n      has: function has(key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state).has(key);\n        return data && hasOwn(data, state.id);\n      }\n    });\n\n    defineBuiltIns(Prototype, IS_MAP ? {\n      // `WeakMap.prototype.get(key)` method\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.get\n      get: function get(key) {\n        var state = getInternalState(this);\n        if (isObject(key)) {\n          var data = getWeakData(key);\n          if (data === true) return uncaughtFrozenStore(state).get(key);\n          return data ? data[state.id] : undefined;\n        }\n      },\n      // `WeakMap.prototype.set(key, value)` method\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.set\n      set: function set(key, value) {\n        return define(this, key, value);\n      }\n    } : {\n      // `WeakSet.prototype.add(value)` method\n      // https://tc39.es/ecma262/#sec-weakset.prototype.add\n      add: function add(value) {\n        return define(this, value, true);\n      }\n    });\n\n    return Constructor;\n  }\n};\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar microtask = require('../internals/microtask');\nvar aCallable = require('../internals/a-callable');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar process = global.process;\n\n// `queueMicrotask` method\n// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-queuemicrotask\n$({ global: true, enumerable: true, noTargetGet: true }, {\n  queueMicrotask: function queueMicrotask(fn) {\n    validateArgumentsLength(arguments.length, 1);\n    aCallable(fn);\n    var domain = IS_NODE && process.domain;\n    microtask(domain ? domain.bind(fn) : fn);\n  }\n});\n","/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.DOMPurify = factory());\n})(this, (function () { 'use strict';\n\n  const {\n    entries,\n    setPrototypeOf,\n    isFrozen,\n    getPrototypeOf,\n    getOwnPropertyDescriptor\n  } = Object;\n  let {\n    freeze,\n    seal,\n    create\n  } = Object; // eslint-disable-line import/no-mutable-exports\n  let {\n    apply,\n    construct\n  } = typeof Reflect !== 'undefined' && Reflect;\n  if (!freeze) {\n    freeze = function freeze(x) {\n      return x;\n    };\n  }\n  if (!seal) {\n    seal = function seal(x) {\n      return x;\n    };\n  }\n  if (!apply) {\n    apply = function apply(fun, thisValue, args) {\n      return fun.apply(thisValue, args);\n    };\n  }\n  if (!construct) {\n    construct = function construct(Func, args) {\n      return new Func(...args);\n    };\n  }\n  const arrayForEach = unapply(Array.prototype.forEach);\n  const arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\n  const arrayPop = unapply(Array.prototype.pop);\n  const arrayPush = unapply(Array.prototype.push);\n  const arraySplice = unapply(Array.prototype.splice);\n  const stringToLowerCase = unapply(String.prototype.toLowerCase);\n  const stringToString = unapply(String.prototype.toString);\n  const stringMatch = unapply(String.prototype.match);\n  const stringReplace = unapply(String.prototype.replace);\n  const stringIndexOf = unapply(String.prototype.indexOf);\n  const stringTrim = unapply(String.prototype.trim);\n  const objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\n  const regExpTest = unapply(RegExp.prototype.test);\n  const typeErrorCreate = unconstruct(TypeError);\n  /**\n   * Creates a new function that calls the given function with a specified thisArg and arguments.\n   *\n   * @param func - The function to be wrapped and called.\n   * @returns A new function that calls the given function with a specified thisArg and arguments.\n   */\n  function unapply(func) {\n    return function (thisArg) {\n      if (thisArg instanceof RegExp) {\n        thisArg.lastIndex = 0;\n      }\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      return apply(func, thisArg, args);\n    };\n  }\n  /**\n   * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n   *\n   * @param func - The constructor function to be wrapped and called.\n   * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n   */\n  function unconstruct(func) {\n    return function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return construct(func, args);\n    };\n  }\n  /**\n   * Add properties to a lookup table\n   *\n   * @param set - The set to which elements will be added.\n   * @param array - The array containing elements to be added to the set.\n   * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n   * @returns The modified set with added elements.\n   */\n  function addToSet(set, array) {\n    let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n    if (setPrototypeOf) {\n      // Make 'in' and truthy checks like Boolean(set.constructor)\n      // independent of any properties defined on Object.prototype.\n      // Prevent prototype setters from intercepting set as a this value.\n      setPrototypeOf(set, null);\n    }\n    let l = array.length;\n    while (l--) {\n      let element = array[l];\n      if (typeof element === 'string') {\n        const lcElement = transformCaseFunc(element);\n        if (lcElement !== element) {\n          // Config presets (e.g. tags.js, attrs.js) are immutable.\n          if (!isFrozen(array)) {\n            array[l] = lcElement;\n          }\n          element = lcElement;\n        }\n      }\n      set[element] = true;\n    }\n    return set;\n  }\n  /**\n   * Clean up an array to harden against CSPP\n   *\n   * @param array - The array to be cleaned.\n   * @returns The cleaned version of the array\n   */\n  function cleanArray(array) {\n    for (let index = 0; index < array.length; index++) {\n      const isPropertyExist = objectHasOwnProperty(array, index);\n      if (!isPropertyExist) {\n        array[index] = null;\n      }\n    }\n    return array;\n  }\n  /**\n   * Shallow clone an object\n   *\n   * @param object - The object to be cloned.\n   * @returns A new object that copies the original.\n   */\n  function clone(object) {\n    const newObject = create(null);\n    for (const [property, value] of entries(object)) {\n      const isPropertyExist = objectHasOwnProperty(object, property);\n      if (isPropertyExist) {\n        if (Array.isArray(value)) {\n          newObject[property] = cleanArray(value);\n        } else if (value && typeof value === 'object' && value.constructor === Object) {\n          newObject[property] = clone(value);\n        } else {\n          newObject[property] = value;\n        }\n      }\n    }\n    return newObject;\n  }\n  /**\n   * This method automatically checks if the prop is function or getter and behaves accordingly.\n   *\n   * @param object - The object to look up the getter function in its prototype chain.\n   * @param prop - The property name for which to find the getter function.\n   * @returns The getter function found in the prototype chain or a fallback function.\n   */\n  function lookupGetter(object, prop) {\n    while (object !== null) {\n      const desc = getOwnPropertyDescriptor(object, prop);\n      if (desc) {\n        if (desc.get) {\n          return unapply(desc.get);\n        }\n        if (typeof desc.value === 'function') {\n          return unapply(desc.value);\n        }\n      }\n      object = getPrototypeOf(object);\n    }\n    function fallbackValue() {\n      return null;\n    }\n    return fallbackValue;\n  }\n\n  const html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n  const svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\n  const svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n  // List of SVG elements that are disallowed by default.\n  // We still need to know them so that we can do namespace\n  // checks properly in case one wants to add them to\n  // allow-list.\n  const svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\n  const mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n  // Similarly to SVG, we want to know all MathML elements,\n  // even those that we disallow by default.\n  const mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\n  const text = freeze(['#text']);\n\n  const html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\n  const svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\n  const mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\n  const xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n  // eslint-disable-next-line unicorn/better-regex\n  const MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\n  const ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\n  const TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm); // eslint-disable-line unicorn/better-regex\n  const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/); // eslint-disable-line no-useless-escape\n  const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\n  const IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n  );\n  const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n  const ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n  );\n  const DOCTYPE_NAME = seal(/^html$/i);\n  const CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\n  var EXPRESSIONS = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    ARIA_ATTR: ARIA_ATTR,\n    ATTR_WHITESPACE: ATTR_WHITESPACE,\n    CUSTOM_ELEMENT: CUSTOM_ELEMENT,\n    DATA_ATTR: DATA_ATTR,\n    DOCTYPE_NAME: DOCTYPE_NAME,\n    ERB_EXPR: ERB_EXPR,\n    IS_ALLOWED_URI: IS_ALLOWED_URI,\n    IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n    MUSTACHE_EXPR: MUSTACHE_EXPR,\n    TMPLIT_EXPR: TMPLIT_EXPR\n  });\n\n  /* eslint-disable @typescript-eslint/indent */\n  // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\n  const NODE_TYPE = {\n    element: 1,\n    attribute: 2,\n    text: 3,\n    cdataSection: 4,\n    entityReference: 5,\n    // Deprecated\n    entityNode: 6,\n    // Deprecated\n    progressingInstruction: 7,\n    comment: 8,\n    document: 9,\n    documentType: 10,\n    documentFragment: 11,\n    notation: 12 // Deprecated\n  };\n  const getGlobal = function getGlobal() {\n    return typeof window === 'undefined' ? null : window;\n  };\n  /**\n   * Creates a no-op policy for internal use only.\n   * Don't export this function outside this module!\n   * @param trustedTypes The policy factory.\n   * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n   * @return The policy created (or null, if Trusted Types\n   * are not supported or creating the policy failed).\n   */\n  const _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n    if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n      return null;\n    }\n    // Allow the callers to control the unique policy name\n    // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n    // Policy creation with duplicate names throws in Trusted Types.\n    let suffix = null;\n    const ATTR_NAME = 'data-tt-policy-suffix';\n    if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n      suffix = purifyHostElement.getAttribute(ATTR_NAME);\n    }\n    const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n    try {\n      return trustedTypes.createPolicy(policyName, {\n        createHTML(html) {\n          return html;\n        },\n        createScriptURL(scriptUrl) {\n          return scriptUrl;\n        }\n      });\n    } catch (_) {\n      // Policy creation failed (most likely another DOMPurify script has\n      // already run). Skip creating the policy, as this will only cause errors\n      // if TT are enforced.\n      console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n      return null;\n    }\n  };\n  const _createHooksMap = function _createHooksMap() {\n    return {\n      afterSanitizeAttributes: [],\n      afterSanitizeElements: [],\n      afterSanitizeShadowDOM: [],\n      beforeSanitizeAttributes: [],\n      beforeSanitizeElements: [],\n      beforeSanitizeShadowDOM: [],\n      uponSanitizeAttribute: [],\n      uponSanitizeElement: [],\n      uponSanitizeShadowNode: []\n    };\n  };\n  function createDOMPurify() {\n    let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n    const DOMPurify = root => createDOMPurify(root);\n    DOMPurify.version = '3.2.6';\n    DOMPurify.removed = [];\n    if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document || !window.Element) {\n      // Not running in a browser, provide a factory function\n      // so that you can pass your own Window\n      DOMPurify.isSupported = false;\n      return DOMPurify;\n    }\n    let {\n      document\n    } = window;\n    const originalDocument = document;\n    const currentScript = originalDocument.currentScript;\n    const {\n      DocumentFragment,\n      HTMLTemplateElement,\n      Node,\n      Element,\n      NodeFilter,\n      NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n      HTMLFormElement,\n      DOMParser,\n      trustedTypes\n    } = window;\n    const ElementPrototype = Element.prototype;\n    const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n    const remove = lookupGetter(ElementPrototype, 'remove');\n    const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n    const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n    const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n    // As per issue #47, the web-components registry is inherited by a\n    // new document created via createHTMLDocument. As per the spec\n    // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n    // a new empty registry is used when creating a template contents owner\n    // document, so we use that as our parent document to ensure nothing\n    // is inherited.\n    if (typeof HTMLTemplateElement === 'function') {\n      const template = document.createElement('template');\n      if (template.content && template.content.ownerDocument) {\n        document = template.content.ownerDocument;\n      }\n    }\n    let trustedTypesPolicy;\n    let emptyHTML = '';\n    const {\n      implementation,\n      createNodeIterator,\n      createDocumentFragment,\n      getElementsByTagName\n    } = document;\n    const {\n      importNode\n    } = originalDocument;\n    let hooks = _createHooksMap();\n    /**\n     * Expose whether this browser supports running the full DOMPurify.\n     */\n    DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n    const {\n      MUSTACHE_EXPR,\n      ERB_EXPR,\n      TMPLIT_EXPR,\n      DATA_ATTR,\n      ARIA_ATTR,\n      IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE,\n      CUSTOM_ELEMENT\n    } = EXPRESSIONS;\n    let {\n      IS_ALLOWED_URI: IS_ALLOWED_URI$1\n    } = EXPRESSIONS;\n    /**\n     * We consider the elements and attributes below to be safe. Ideally\n     * don't add any new ones but feel free to remove unwanted ones.\n     */\n    /* allowed element names */\n    let ALLOWED_TAGS = null;\n    const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n    /* Allowed attribute names */\n    let ALLOWED_ATTR = null;\n    const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n    /*\n     * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n     * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n     * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n     * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n     */\n    let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n      tagNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null\n      },\n      attributeNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null\n      },\n      allowCustomizedBuiltInElements: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: false\n      }\n    }));\n    /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n    let FORBID_TAGS = null;\n    /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n    let FORBID_ATTR = null;\n    /* Decide if ARIA attributes are okay */\n    let ALLOW_ARIA_ATTR = true;\n    /* Decide if custom data attributes are okay */\n    let ALLOW_DATA_ATTR = true;\n    /* Decide if unknown protocols are okay */\n    let ALLOW_UNKNOWN_PROTOCOLS = false;\n    /* Decide if self-closing tags in attributes are allowed.\n     * Usually removed due to a mXSS issue in jQuery 3.0 */\n    let ALLOW_SELF_CLOSE_IN_ATTR = true;\n    /* Output should be safe for common template engines.\n     * This means, DOMPurify removes data attributes, mustaches and ERB\n     */\n    let SAFE_FOR_TEMPLATES = false;\n    /* Output should be safe even for XML used within HTML and alike.\n     * This means, DOMPurify removes comments when containing risky content.\n     */\n    let SAFE_FOR_XML = true;\n    /* Decide if document with <html>... should be returned */\n    let WHOLE_DOCUMENT = false;\n    /* Track whether config is already set on this instance of DOMPurify. */\n    let SET_CONFIG = false;\n    /* Decide if all elements (e.g. style, script) must be children of\n     * document.body. By default, browsers might move them to document.head */\n    let FORCE_BODY = false;\n    /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n     * string (or a TrustedHTML object if Trusted Types are supported).\n     * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n     */\n    let RETURN_DOM = false;\n    /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n     * string  (or a TrustedHTML object if Trusted Types are supported) */\n    let RETURN_DOM_FRAGMENT = false;\n    /* Try to return a Trusted Type object instead of a string, return a string in\n     * case Trusted Types are not supported  */\n    let RETURN_TRUSTED_TYPE = false;\n    /* Output should be free from DOM clobbering attacks?\n     * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n     */\n    let SANITIZE_DOM = true;\n    /* Achieve full DOM Clobbering protection by isolating the namespace of named\n     * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n     *\n     * HTML/DOM spec rules that enable DOM Clobbering:\n     *   - Named Access on Window (7.3.3)\n     *   - DOM Tree Accessors (3.1.5)\n     *   - Form Element Parent-Child Relations (4.10.3)\n     *   - Iframe srcdoc / Nested WindowProxies (4.8.5)\n     *   - HTMLCollection (4.2.10.2)\n     *\n     * Namespace isolation is implemented by prefixing `id` and `name` attributes\n     * with a constant string, i.e., `user-content-`\n     */\n    let SANITIZE_NAMED_PROPS = false;\n    const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n    /* Keep element content when removing element? */\n    let KEEP_CONTENT = true;\n    /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n     * of importing it into a new Document and returning a sanitized copy */\n    let IN_PLACE = false;\n    /* Allow usage of profiles like html, svg and mathMl */\n    let USE_PROFILES = {};\n    /* Tags to ignore content of when KEEP_CONTENT is true */\n    let FORBID_CONTENTS = null;\n    const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n    /* Tags that are safe for data: URIs */\n    let DATA_URI_TAGS = null;\n    const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n    /* Attributes safe for values like \"javascript:\" */\n    let URI_SAFE_ATTRIBUTES = null;\n    const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n    const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n    const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n    const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n    /* Document namespace */\n    let NAMESPACE = HTML_NAMESPACE;\n    let IS_EMPTY_INPUT = false;\n    /* Allowed XHTML+XML namespaces */\n    let ALLOWED_NAMESPACES = null;\n    const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n    let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n    let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n    // Certain elements are allowed in both SVG and HTML\n    // namespace. We need to specify them explicitly\n    // so that they don't get erroneously deleted from\n    // HTML namespace.\n    const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n    /* Parsing of strict XHTML documents */\n    let PARSER_MEDIA_TYPE = null;\n    const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n    const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n    let transformCaseFunc = null;\n    /* Keep a reference to config to pass to hooks */\n    let CONFIG = null;\n    /* Ideally, do not touch anything below this line */\n    /* ______________________________________________ */\n    const formElement = document.createElement('form');\n    const isRegexOrFunction = function isRegexOrFunction(testValue) {\n      return testValue instanceof RegExp || testValue instanceof Function;\n    };\n    /**\n     * _parseConfig\n     *\n     * @param cfg optional config literal\n     */\n    // eslint-disable-next-line complexity\n    const _parseConfig = function _parseConfig() {\n      let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (CONFIG && CONFIG === cfg) {\n        return;\n      }\n      /* Shield configuration object from tampering */\n      if (!cfg || typeof cfg !== 'object') {\n        cfg = {};\n      }\n      /* Shield configuration object from prototype pollution */\n      cfg = clone(cfg);\n      PARSER_MEDIA_TYPE =\n      // eslint-disable-next-line unicorn/prefer-includes\n      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n      // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n      transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n      /* Set configuration parameters */\n      ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n      ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n      ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n      URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n      DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n      FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n      FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : clone({});\n      FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : clone({});\n      USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n      ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n      ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n      ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n      ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n      SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n      SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n      WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n      RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n      RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n      RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n      FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n      SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n      SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n      KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n      IN_PLACE = cfg.IN_PLACE || false; // Default false\n      IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n      NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n      MATHML_TEXT_INTEGRATION_POINTS = cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n      HTML_INTEGRATION_POINTS = cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n      CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n        CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n      }\n      if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n        CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n      }\n      if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n        CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n      }\n      if (SAFE_FOR_TEMPLATES) {\n        ALLOW_DATA_ATTR = false;\n      }\n      if (RETURN_DOM_FRAGMENT) {\n        RETURN_DOM = true;\n      }\n      /* Parse profile info */\n      if (USE_PROFILES) {\n        ALLOWED_TAGS = addToSet({}, text);\n        ALLOWED_ATTR = [];\n        if (USE_PROFILES.html === true) {\n          addToSet(ALLOWED_TAGS, html$1);\n          addToSet(ALLOWED_ATTR, html);\n        }\n        if (USE_PROFILES.svg === true) {\n          addToSet(ALLOWED_TAGS, svg$1);\n          addToSet(ALLOWED_ATTR, svg);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n        if (USE_PROFILES.svgFilters === true) {\n          addToSet(ALLOWED_TAGS, svgFilters);\n          addToSet(ALLOWED_ATTR, svg);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n        if (USE_PROFILES.mathMl === true) {\n          addToSet(ALLOWED_TAGS, mathMl$1);\n          addToSet(ALLOWED_ATTR, mathMl);\n          addToSet(ALLOWED_ATTR, xml);\n        }\n      }\n      /* Merge configuration parameters */\n      if (cfg.ADD_TAGS) {\n        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n          ALLOWED_TAGS = clone(ALLOWED_TAGS);\n        }\n        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n      }\n      if (cfg.ADD_ATTR) {\n        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n          ALLOWED_ATTR = clone(ALLOWED_ATTR);\n        }\n        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n      }\n      if (cfg.ADD_URI_SAFE_ATTR) {\n        addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n      }\n      if (cfg.FORBID_CONTENTS) {\n        if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n          FORBID_CONTENTS = clone(FORBID_CONTENTS);\n        }\n        addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n      }\n      /* Add #text in case KEEP_CONTENT is set to true */\n      if (KEEP_CONTENT) {\n        ALLOWED_TAGS['#text'] = true;\n      }\n      /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n      if (WHOLE_DOCUMENT) {\n        addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n      }\n      /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n      if (ALLOWED_TAGS.table) {\n        addToSet(ALLOWED_TAGS, ['tbody']);\n        delete FORBID_TAGS.tbody;\n      }\n      if (cfg.TRUSTED_TYPES_POLICY) {\n        if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n          throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n        }\n        if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n          throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n        }\n        // Overwrite existing TrustedTypes policy.\n        trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n        // Sign local variables required by `sanitize`.\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      } else {\n        // Uninitialized policy, attempt to initialize the internal dompurify policy.\n        if (trustedTypesPolicy === undefined) {\n          trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n        }\n        // If creating the internal policy succeeded sign internal variables.\n        if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n          emptyHTML = trustedTypesPolicy.createHTML('');\n        }\n      }\n      // Prevent further manipulation of configuration.\n      // Not available in IE8, Safari 5, etc.\n      if (freeze) {\n        freeze(cfg);\n      }\n      CONFIG = cfg;\n    };\n    /* Keep track of all possible SVG and MathML tags\n     * so that we can perform the namespace checks\n     * correctly. */\n    const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n    const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n    /**\n     * @param element a DOM element whose namespace is being checked\n     * @returns Return false if the element has a\n     *  namespace that a spec-compliant parser would never\n     *  return. Return true otherwise.\n     */\n    const _checkValidNamespace = function _checkValidNamespace(element) {\n      let parent = getParentNode(element);\n      // In JSDOM, if we're inside shadow DOM, then parentNode\n      // can be null. We just simulate parent in this case.\n      if (!parent || !parent.tagName) {\n        parent = {\n          namespaceURI: NAMESPACE,\n          tagName: 'template'\n        };\n      }\n      const tagName = stringToLowerCase(element.tagName);\n      const parentTagName = stringToLowerCase(parent.tagName);\n      if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n        return false;\n      }\n      if (element.namespaceURI === SVG_NAMESPACE) {\n        // The only way to switch from HTML namespace to SVG\n        // is via <svg>. If it happens via any other tag, then\n        // it should be killed.\n        if (parent.namespaceURI === HTML_NAMESPACE) {\n          return tagName === 'svg';\n        }\n        // The only way to switch from MathML to SVG is via`\n        // svg if parent is either <annotation-xml> or MathML\n        // text integration points.\n        if (parent.namespaceURI === MATHML_NAMESPACE) {\n          return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n        }\n        // We only allow elements that are defined in SVG\n        // spec. All others are disallowed in SVG namespace.\n        return Boolean(ALL_SVG_TAGS[tagName]);\n      }\n      if (element.namespaceURI === MATHML_NAMESPACE) {\n        // The only way to switch from HTML namespace to MathML\n        // is via <math>. If it happens via any other tag, then\n        // it should be killed.\n        if (parent.namespaceURI === HTML_NAMESPACE) {\n          return tagName === 'math';\n        }\n        // The only way to switch from SVG to MathML is via\n        // <math> and HTML integration points\n        if (parent.namespaceURI === SVG_NAMESPACE) {\n          return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n        }\n        // We only allow elements that are defined in MathML\n        // spec. All others are disallowed in MathML namespace.\n        return Boolean(ALL_MATHML_TAGS[tagName]);\n      }\n      if (element.namespaceURI === HTML_NAMESPACE) {\n        // The only way to switch from SVG to HTML is via\n        // HTML integration points, and from MathML to HTML\n        // is via MathML text integration points\n        if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n          return false;\n        }\n        if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n          return false;\n        }\n        // We disallow tags that are specific for MathML\n        // or SVG and should never appear in HTML namespace\n        return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n      }\n      // For XHTML and XML documents that support custom namespaces\n      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n        return true;\n      }\n      // The code should never reach this place (this means\n      // that the element somehow got namespace that is not\n      // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n      // Return false just in case.\n      return false;\n    };\n    /**\n     * _forceRemove\n     *\n     * @param node a DOM node\n     */\n    const _forceRemove = function _forceRemove(node) {\n      arrayPush(DOMPurify.removed, {\n        element: node\n      });\n      try {\n        // eslint-disable-next-line unicorn/prefer-dom-node-remove\n        getParentNode(node).removeChild(node);\n      } catch (_) {\n        remove(node);\n      }\n    };\n    /**\n     * _removeAttribute\n     *\n     * @param name an Attribute name\n     * @param element a DOM node\n     */\n    const _removeAttribute = function _removeAttribute(name, element) {\n      try {\n        arrayPush(DOMPurify.removed, {\n          attribute: element.getAttributeNode(name),\n          from: element\n        });\n      } catch (_) {\n        arrayPush(DOMPurify.removed, {\n          attribute: null,\n          from: element\n        });\n      }\n      element.removeAttribute(name);\n      // We void attribute values for unremovable \"is\" attributes\n      if (name === 'is') {\n        if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n          try {\n            _forceRemove(element);\n          } catch (_) {}\n        } else {\n          try {\n            element.setAttribute(name, '');\n          } catch (_) {}\n        }\n      }\n    };\n    /**\n     * _initDocument\n     *\n     * @param dirty - a string of dirty markup\n     * @return a DOM, filled with the dirty markup\n     */\n    const _initDocument = function _initDocument(dirty) {\n      /* Create a HTML document */\n      let doc = null;\n      let leadingWhitespace = null;\n      if (FORCE_BODY) {\n        dirty = '<remove></remove>' + dirty;\n      } else {\n        /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n        const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n        leadingWhitespace = matches && matches[0];\n      }\n      if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n        // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n        dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n      }\n      const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      /*\n       * Use the DOMParser API by default, fallback later if needs be\n       * DOMParser not work for svg when has multiple root element.\n       */\n      if (NAMESPACE === HTML_NAMESPACE) {\n        try {\n          doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n        } catch (_) {}\n      }\n      /* Use createHTMLDocument in case DOMParser is not available */\n      if (!doc || !doc.documentElement) {\n        doc = implementation.createDocument(NAMESPACE, 'template', null);\n        try {\n          doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n        } catch (_) {\n          // Syntax error if dirtyPayload is invalid xml\n        }\n      }\n      const body = doc.body || doc.documentElement;\n      if (dirty && leadingWhitespace) {\n        body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n      }\n      /* Work on whole document or just its body */\n      if (NAMESPACE === HTML_NAMESPACE) {\n        return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n      }\n      return WHOLE_DOCUMENT ? doc.documentElement : body;\n    };\n    /**\n     * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n     *\n     * @param root The root element or node to start traversing on.\n     * @return The created NodeIterator\n     */\n    const _createNodeIterator = function _createNodeIterator(root) {\n      return createNodeIterator.call(root.ownerDocument || root, root,\n      // eslint-disable-next-line no-bitwise\n      NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n    };\n    /**\n     * _isClobbered\n     *\n     * @param element element to check for clobbering attacks\n     * @return true if clobbered, false if safe\n     */\n    const _isClobbered = function _isClobbered(element) {\n      return element instanceof HTMLFormElement && (typeof element.nodeName !== 'string' || typeof element.textContent !== 'string' || typeof element.removeChild !== 'function' || !(element.attributes instanceof NamedNodeMap) || typeof element.removeAttribute !== 'function' || typeof element.setAttribute !== 'function' || typeof element.namespaceURI !== 'string' || typeof element.insertBefore !== 'function' || typeof element.hasChildNodes !== 'function');\n    };\n    /**\n     * Checks whether the given object is a DOM node.\n     *\n     * @param value object to check whether it's a DOM node\n     * @return true is object is a DOM node\n     */\n    const _isNode = function _isNode(value) {\n      return typeof Node === 'function' && value instanceof Node;\n    };\n    function _executeHooks(hooks, currentNode, data) {\n      arrayForEach(hooks, hook => {\n        hook.call(DOMPurify, currentNode, data, CONFIG);\n      });\n    }\n    /**\n     * _sanitizeElements\n     *\n     * @protect nodeName\n     * @protect textContent\n     * @protect removeChild\n     * @param currentNode to check for permission to exist\n     * @return true if node was killed, false if left alive\n     */\n    const _sanitizeElements = function _sanitizeElements(currentNode) {\n      let content = null;\n      /* Execute a hook if present */\n      _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n      /* Check if element is clobbered or can clobber */\n      if (_isClobbered(currentNode)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n      /* Now let's check the element's type and name */\n      const tagName = transformCaseFunc(currentNode.nodeName);\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeElement, currentNode, {\n        tagName,\n        allowedTags: ALLOWED_TAGS\n      });\n      /* Detect mXSS attempts abusing namespace confusion */\n      if (SAFE_FOR_XML && currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w!]/g, currentNode.innerHTML) && regExpTest(/<[/\\w!]/g, currentNode.textContent)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n      /* Remove any occurrence of processing instructions */\n      if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n        _forceRemove(currentNode);\n        return true;\n      }\n      /* Remove any kind of possibly harmful comments */\n      if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n      /* Remove element if anything forbids its presence */\n      if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n        /* Check if we have a custom element to handle */\n        if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n            return false;\n          }\n          if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n            return false;\n          }\n        }\n        /* Keep content except for bad-listed elements */\n        if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n          const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n          const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n          if (childNodes && parentNode) {\n            const childCount = childNodes.length;\n            for (let i = childCount - 1; i >= 0; --i) {\n              const childClone = cloneNode(childNodes[i], true);\n              childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n              parentNode.insertBefore(childClone, getNextSibling(currentNode));\n            }\n          }\n        }\n        _forceRemove(currentNode);\n        return true;\n      }\n      /* Check whether element has a valid namespace */\n      if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n      /* Make sure that older browsers don't get fallback-tag mXSS */\n      if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n        _forceRemove(currentNode);\n        return true;\n      }\n      /* Sanitize element content to be template-safe */\n      if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n        /* Get the element's text content */\n        content = currentNode.textContent;\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          content = stringReplace(content, expr, ' ');\n        });\n        if (currentNode.textContent !== content) {\n          arrayPush(DOMPurify.removed, {\n            element: currentNode.cloneNode()\n          });\n          currentNode.textContent = content;\n        }\n      }\n      /* Execute a hook if present */\n      _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n      return false;\n    };\n    /**\n     * _isValidAttribute\n     *\n     * @param lcTag Lowercase tag name of containing element.\n     * @param lcName Lowercase attribute name.\n     * @param value Attribute value.\n     * @return Returns true if `value` is valid, otherwise false.\n     */\n    // eslint-disable-next-line complexity\n    const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n      /* Make sure attribute cannot clobber */\n      if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n        return false;\n      }\n      /* Allow valid data-* attributes: At least one character after \"-\"\n          (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n          XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n          We don't need to check the value; it's always URI safe. */\n      if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n        if (\n        // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n        _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n        // Alternative, second condition checks if it's an `is`-attribute, AND\n        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n          return false;\n        }\n        /* Check value is safe. First, is attr inert? If so, is safe */\n      } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n        return false;\n      } else ;\n      return true;\n    };\n    /**\n     * _isBasicCustomElement\n     * checks if at least one dash is included in tagName, and it's not the first char\n     * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n     *\n     * @param tagName name of the tag of the node to sanitize\n     * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n     */\n    const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n      return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n    };\n    /**\n     * _sanitizeAttributes\n     *\n     * @protect attributes\n     * @protect nodeName\n     * @protect removeAttribute\n     * @protect setAttribute\n     *\n     * @param currentNode to sanitize\n     */\n    const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n      const {\n        attributes\n      } = currentNode;\n      /* Check if we have attributes; if not we might have a text node */\n      if (!attributes || _isClobbered(currentNode)) {\n        return;\n      }\n      const hookEvent = {\n        attrName: '',\n        attrValue: '',\n        keepAttr: true,\n        allowedAttributes: ALLOWED_ATTR,\n        forceKeepAttr: undefined\n      };\n      let l = attributes.length;\n      /* Go backwards over all attributes; safely remove bad ones */\n      while (l--) {\n        const attr = attributes[l];\n        const {\n          name,\n          namespaceURI,\n          value: attrValue\n        } = attr;\n        const lcName = transformCaseFunc(name);\n        const initValue = attrValue;\n        let value = name === 'value' ? initValue : stringTrim(initValue);\n        /* Execute a hook if present */\n        hookEvent.attrName = lcName;\n        hookEvent.attrValue = value;\n        hookEvent.keepAttr = true;\n        hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n        _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n        value = hookEvent.attrValue;\n        /* Full DOM Clobbering protection via namespace isolation,\n         * Prefix id and name attributes with `user-content-`\n         */\n        if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n          // Remove the attribute with this value\n          _removeAttribute(name, currentNode);\n          // Prefix the value and later re-create the attribute with the sanitized value\n          value = SANITIZE_NAMED_PROPS_PREFIX + value;\n        }\n        /* Work around a security issue with comments inside attributes */\n        if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n          _removeAttribute(name, currentNode);\n          continue;\n        }\n        /* Did the hooks approve of the attribute? */\n        if (hookEvent.forceKeepAttr) {\n          continue;\n        }\n        /* Did the hooks approve of the attribute? */\n        if (!hookEvent.keepAttr) {\n          _removeAttribute(name, currentNode);\n          continue;\n        }\n        /* Work around a security issue in jQuery 3.0 */\n        if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n          _removeAttribute(name, currentNode);\n          continue;\n        }\n        /* Sanitize attribute content to be template-safe */\n        if (SAFE_FOR_TEMPLATES) {\n          arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n            value = stringReplace(value, expr, ' ');\n          });\n        }\n        /* Is `value` valid for this attribute? */\n        const lcTag = transformCaseFunc(currentNode.nodeName);\n        if (!_isValidAttribute(lcTag, lcName, value)) {\n          _removeAttribute(name, currentNode);\n          continue;\n        }\n        /* Handle attributes that require Trusted Types */\n        if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n          if (namespaceURI) ; else {\n            switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n              case 'TrustedHTML':\n                {\n                  value = trustedTypesPolicy.createHTML(value);\n                  break;\n                }\n              case 'TrustedScriptURL':\n                {\n                  value = trustedTypesPolicy.createScriptURL(value);\n                  break;\n                }\n            }\n          }\n        }\n        /* Handle invalid data-* attribute set by try-catching it */\n        if (value !== initValue) {\n          try {\n            if (namespaceURI) {\n              currentNode.setAttributeNS(namespaceURI, name, value);\n            } else {\n              /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n              currentNode.setAttribute(name, value);\n            }\n            if (_isClobbered(currentNode)) {\n              _forceRemove(currentNode);\n            } else {\n              arrayPop(DOMPurify.removed);\n            }\n          } catch (_) {\n            _removeAttribute(name, currentNode);\n          }\n        }\n      }\n      /* Execute a hook if present */\n      _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n    };\n    /**\n     * _sanitizeShadowDOM\n     *\n     * @param fragment to iterate over recursively\n     */\n    const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n      let shadowNode = null;\n      const shadowIterator = _createNodeIterator(fragment);\n      /* Execute a hook if present */\n      _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n      while (shadowNode = shadowIterator.nextNode()) {\n        /* Execute a hook if present */\n        _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n        /* Sanitize tags and elements */\n        _sanitizeElements(shadowNode);\n        /* Check attributes next */\n        _sanitizeAttributes(shadowNode);\n        /* Deep shadow DOM detected */\n        if (shadowNode.content instanceof DocumentFragment) {\n          _sanitizeShadowDOM(shadowNode.content);\n        }\n      }\n      /* Execute a hook if present */\n      _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n    };\n    // eslint-disable-next-line complexity\n    DOMPurify.sanitize = function (dirty) {\n      let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      let body = null;\n      let importedNode = null;\n      let currentNode = null;\n      let returnNode = null;\n      /* Make sure we have a string to sanitize.\n        DO NOT return early, as this will return the wrong type if\n        the user has requested a DOM object rather than a string */\n      IS_EMPTY_INPUT = !dirty;\n      if (IS_EMPTY_INPUT) {\n        dirty = '<!-->';\n      }\n      /* Stringify, in case dirty is an object */\n      if (typeof dirty !== 'string' && !_isNode(dirty)) {\n        if (typeof dirty.toString === 'function') {\n          dirty = dirty.toString();\n          if (typeof dirty !== 'string') {\n            throw typeErrorCreate('dirty is not a string, aborting');\n          }\n        } else {\n          throw typeErrorCreate('toString is not a function');\n        }\n      }\n      /* Return dirty HTML if DOMPurify cannot run */\n      if (!DOMPurify.isSupported) {\n        return dirty;\n      }\n      /* Assign config vars */\n      if (!SET_CONFIG) {\n        _parseConfig(cfg);\n      }\n      /* Clean up removed elements */\n      DOMPurify.removed = [];\n      /* Check if dirty is correctly typed for IN_PLACE */\n      if (typeof dirty === 'string') {\n        IN_PLACE = false;\n      }\n      if (IN_PLACE) {\n        /* Do some early pre-sanitization to avoid unsafe root nodes */\n        if (dirty.nodeName) {\n          const tagName = transformCaseFunc(dirty.nodeName);\n          if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n            throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n          }\n        }\n      } else if (dirty instanceof Node) {\n        /* If dirty is a DOM element, append to an empty document to avoid\n           elements being stripped by the parser */\n        body = _initDocument('<!---->');\n        importedNode = body.ownerDocument.importNode(dirty, true);\n        if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n          /* Node is already a body, use as is */\n          body = importedNode;\n        } else if (importedNode.nodeName === 'HTML') {\n          body = importedNode;\n        } else {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          body.appendChild(importedNode);\n        }\n      } else {\n        /* Exit directly if we have nothing to do */\n        if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1) {\n          return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        }\n        /* Initialize the document to work on */\n        body = _initDocument(dirty);\n        /* Check we have a DOM node from the data */\n        if (!body) {\n          return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n        }\n      }\n      /* Remove first element node (ours) if FORCE_BODY is set */\n      if (body && FORCE_BODY) {\n        _forceRemove(body.firstChild);\n      }\n      /* Get node iterator */\n      const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n      /* Now start iterating over the created document */\n      while (currentNode = nodeIterator.nextNode()) {\n        /* Sanitize tags and elements */\n        _sanitizeElements(currentNode);\n        /* Check attributes next */\n        _sanitizeAttributes(currentNode);\n        /* Shadow DOM detected, sanitize it */\n        if (currentNode.content instanceof DocumentFragment) {\n          _sanitizeShadowDOM(currentNode.content);\n        }\n      }\n      /* If we sanitized `dirty` in-place, return it. */\n      if (IN_PLACE) {\n        return dirty;\n      }\n      /* Return sanitized string or DOM */\n      if (RETURN_DOM) {\n        if (RETURN_DOM_FRAGMENT) {\n          returnNode = createDocumentFragment.call(body.ownerDocument);\n          while (body.firstChild) {\n            // eslint-disable-next-line unicorn/prefer-dom-node-append\n            returnNode.appendChild(body.firstChild);\n          }\n        } else {\n          returnNode = body;\n        }\n        if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n          /*\n            AdoptNode() is not used because internal state is not reset\n            (e.g. the past names map of a HTMLFormElement), this is safe\n            in theory but we would rather not risk another attack vector.\n            The state that is cloned by importNode() is explicitly defined\n            by the specs.\n          */\n          returnNode = importNode.call(originalDocument, returnNode, true);\n        }\n        return returnNode;\n      }\n      let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n      /* Serialize doctype if allowed */\n      if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n        serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n      }\n      /* Sanitize final string template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          serializedHTML = stringReplace(serializedHTML, expr, ' ');\n        });\n      }\n      return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n    };\n    DOMPurify.setConfig = function () {\n      let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      _parseConfig(cfg);\n      SET_CONFIG = true;\n    };\n    DOMPurify.clearConfig = function () {\n      CONFIG = null;\n      SET_CONFIG = false;\n    };\n    DOMPurify.isValidAttribute = function (tag, attr, value) {\n      /* Initialize shared config vars if necessary. */\n      if (!CONFIG) {\n        _parseConfig({});\n      }\n      const lcTag = transformCaseFunc(tag);\n      const lcName = transformCaseFunc(attr);\n      return _isValidAttribute(lcTag, lcName, value);\n    };\n    DOMPurify.addHook = function (entryPoint, hookFunction) {\n      if (typeof hookFunction !== 'function') {\n        return;\n      }\n      arrayPush(hooks[entryPoint], hookFunction);\n    };\n    DOMPurify.removeHook = function (entryPoint, hookFunction) {\n      if (hookFunction !== undefined) {\n        const index = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n        return index === -1 ? undefined : arraySplice(hooks[entryPoint], index, 1)[0];\n      }\n      return arrayPop(hooks[entryPoint]);\n    };\n    DOMPurify.removeHooks = function (entryPoint) {\n      hooks[entryPoint] = [];\n    };\n    DOMPurify.removeAllHooks = function () {\n      hooks = _createHooksMap();\n    };\n    return DOMPurify;\n  }\n  var purify = createDOMPurify();\n\n  return purify;\n\n}));\n//# sourceMappingURL=purify.js.map\n","/**\n * Assigns (shallow copies) the properties of `src` onto `dest`, if the\n * corresponding property on `dest` === `undefined`.\n *\n * @param {Object} dest The destination object.\n * @param {Object} src The source object.\n * @return {Object} The destination object (`dest`)\n */\nexport function defaults(dest, src) {\n    for (var prop in src) {\n        if (src.hasOwnProperty(prop) && dest[prop] === undefined) {\n            dest[prop] = src[prop];\n        }\n    }\n    return dest;\n}\n/**\n * Truncates the `str` at `len - ellipsisChars.length`, and adds the `ellipsisChars` to the\n * end of the string (by default, two periods: '..'). If the `str` length does not exceed\n * `len`, the string will be returned unchanged.\n *\n * @param {String} str The string to truncate and add an ellipsis to.\n * @param {Number} truncateLen The length to truncate the string at.\n * @param {String} [ellipsisChars=...] The ellipsis character(s) to add to the end of `str`\n *   when truncated. Defaults to '...'\n */\nexport function ellipsis(str, truncateLen, ellipsisChars) {\n    var ellipsisLength;\n    if (str.length > truncateLen) {\n        if (ellipsisChars == null) {\n            ellipsisChars = '&hellip;';\n            ellipsisLength = 3;\n        }\n        else {\n            ellipsisLength = ellipsisChars.length;\n        }\n        str = str.substring(0, truncateLen - ellipsisLength) + ellipsisChars;\n    }\n    return str;\n}\n/**\n * Supports `Array.prototype.indexOf()` functionality for old IE (IE8 and below).\n *\n * @param {Array} arr The array to find an element of.\n * @param {*} element The element to find in the array, and return the index of.\n * @return {Number} The index of the `element`, or -1 if it was not found.\n */\nexport function indexOf(arr, element) {\n    // @ts-ignore - As far as TypeScript is concerned, this method will always\n    // exist (lowest \"lib\" in TS is \"ES5\"). Hence we need to ignore this error\n    // to support IE8 which only implements ES3 and doesn't have this method\n    if (Array.prototype.indexOf) {\n        return arr.indexOf(element);\n    }\n    else {\n        for (var i = 0, len = arr.length; i < len; i++) {\n            if (arr[i] === element)\n                return i;\n        }\n        return -1;\n    }\n}\n/**\n * Removes array elements based on a filtering function. Mutates the input\n * array.\n *\n * Using this instead of the ES5 Array.prototype.filter() function, to allow\n * Autolinker compatibility with IE8, and also to prevent creating many new\n * arrays in memory for filtering.\n *\n * @param {Array} arr The array to remove elements from. This array is\n *   mutated.\n * @param {Function} fn A function which should return `true` to\n *   remove an element.\n * @return {Array} The mutated input `arr`.\n */\nexport function remove(arr, fn) {\n    for (var i = arr.length - 1; i >= 0; i--) {\n        if (fn(arr[i]) === true) {\n            arr.splice(i, 1);\n        }\n    }\n}\n/**\n * Performs the functionality of what modern browsers do when `String.prototype.split()` is called\n * with a regular expression that contains capturing parenthesis.\n *\n * For example:\n *\n *     // Modern browsers:\n *     \"a,b,c\".split( /(,)/ );  // --> [ 'a', ',', 'b', ',', 'c' ]\n *\n *     // Old IE (including IE8):\n *     \"a,b,c\".split( /(,)/ );  // --> [ 'a', 'b', 'c' ]\n *\n * This method emulates the functionality of modern browsers for the old IE case.\n *\n * @param {String} str The string to split.\n * @param {RegExp} splitRegex The regular expression to split the input `str` on. The splitting\n *   character(s) will be spliced into the array, as in the \"modern browsers\" example in the\n *   description of this method.\n *   Note #1: the supplied regular expression **must** have the 'g' flag specified.\n *   Note #2: for simplicity's sake, the regular expression does not need\n *   to contain capturing parenthesis - it will be assumed that any match has them.\n * @return {String[]} The split array of strings, with the splitting character(s) included.\n */\nexport function splitAndCapture(str, splitRegex) {\n    if (!splitRegex.global)\n        throw new Error(\"`splitRegex` must have the 'g' flag set\");\n    var result = [], lastIdx = 0, match;\n    while (match = splitRegex.exec(str)) {\n        result.push(str.substring(lastIdx, match.index));\n        result.push(match[0]); // push the splitting char(s)\n        lastIdx = match.index + match[0].length;\n    }\n    result.push(str.substring(lastIdx));\n    return result;\n}\n/**\n * Function that should never be called but is used to check that every\n * enum value is handled using TypeScript's 'never' type.\n */\nexport function throwUnhandledCaseError(theValue) {\n    throw new Error(\"Unhandled case for value: '\".concat(theValue, \"'\"));\n}\n\n//# sourceMappingURL=utils.js.map\n","import { indexOf } from \"./utils\";\n/**\n * @class Autolinker.HtmlTag\n * @extends Object\n *\n * Represents an HTML tag, which can be used to easily build/modify HTML tags programmatically.\n *\n * Autolinker uses this abstraction to create HTML tags, and then write them out as strings. You may also use\n * this class in your code, especially within a {@link Autolinker#replaceFn replaceFn}.\n *\n * ## Examples\n *\n * Example instantiation:\n *\n *     var tag = new Autolinker.HtmlTag( {\n *         tagName : 'a',\n *         attrs   : { 'href': 'http://google.com', 'class': 'external-link' },\n *         innerHtml : 'Google'\n *     } );\n *\n *     tag.toAnchorString();  // <a href=\"http://google.com\" class=\"external-link\">Google</a>\n *\n *     // Individual accessor methods\n *     tag.getTagName();                 // 'a'\n *     tag.getAttr( 'href' );            // 'http://google.com'\n *     tag.hasClass( 'external-link' );  // true\n *\n *\n * Using mutator methods (which may be used in combination with instantiation config properties):\n *\n *     var tag = new Autolinker.HtmlTag();\n *     tag.setTagName( 'a' );\n *     tag.setAttr( 'href', 'http://google.com' );\n *     tag.addClass( 'external-link' );\n *     tag.setInnerHtml( 'Google' );\n *\n *     tag.getTagName();                 // 'a'\n *     tag.getAttr( 'href' );            // 'http://google.com'\n *     tag.hasClass( 'external-link' );  // true\n *\n *     tag.toAnchorString();  // <a href=\"http://google.com\" class=\"external-link\">Google</a>\n *\n *\n * ## Example use within a {@link Autolinker#replaceFn replaceFn}\n *\n *     var html = Autolinker.link( \"Test google.com\", {\n *         replaceFn : function( match ) {\n *             var tag = match.buildTag();  // returns an {@link Autolinker.HtmlTag} instance, configured with the Match's href and anchor text\n *             tag.setAttr( 'rel', 'nofollow' );\n *\n *             return tag;\n *         }\n *     } );\n *\n *     // generated html:\n *     //   Test <a href=\"http://google.com\" target=\"_blank\" rel=\"nofollow\">google.com</a>\n *\n *\n * ## Example use with a new tag for the replacement\n *\n *     var html = Autolinker.link( \"Test google.com\", {\n *         replaceFn : function( match ) {\n *             var tag = new Autolinker.HtmlTag( {\n *                 tagName : 'button',\n *                 attrs   : { 'title': 'Load URL: ' + match.getAnchorHref() },\n *                 innerHtml : 'Load URL: ' + match.getAnchorText()\n *             } );\n *\n *             return tag;\n *         }\n *     } );\n *\n *     // generated html:\n *     //   Test <button title=\"Load URL: http://google.com\">Load URL: google.com</button>\n */\nvar HtmlTag = /** @class */ (function () {\n    /**\n     * @method constructor\n     * @param {Object} [cfg] The configuration properties for this class, in an Object (map)\n     */\n    function HtmlTag(cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        /**\n         * @cfg {String} tagName\n         *\n         * The tag name. Ex: 'a', 'button', etc.\n         *\n         * Not required at instantiation time, but should be set using {@link #setTagName} before {@link #toAnchorString}\n         * is executed.\n         */\n        this.tagName = ''; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Object.<String, String>} attrs\n         *\n         * An key/value Object (map) of attributes to create the tag with. The keys are the attribute names, and the\n         * values are the attribute values.\n         */\n        this.attrs = {}; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {String} innerHTML\n         *\n         * The inner HTML for the tag.\n         */\n        this.innerHTML = ''; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @protected\n         * @property {RegExp} whitespaceRegex\n         *\n         * Regular expression used to match whitespace in a string of CSS classes.\n         */\n        this.whitespaceRegex = /\\s+/; // default value just to get the above doc comment in the ES5 output and documentation generator\n        this.tagName = cfg.tagName || '';\n        this.attrs = cfg.attrs || {};\n        this.innerHTML = cfg.innerHtml || cfg.innerHTML || ''; // accept either the camelCased form or the fully capitalized acronym as in the DOM\n    }\n    /**\n     * Sets the tag name that will be used to generate the tag with.\n     *\n     * @param {String} tagName\n     * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n     */\n    HtmlTag.prototype.setTagName = function (tagName) {\n        this.tagName = tagName;\n        return this;\n    };\n    /**\n     * Retrieves the tag name.\n     *\n     * @return {String}\n     */\n    HtmlTag.prototype.getTagName = function () {\n        return this.tagName || '';\n    };\n    /**\n     * Sets an attribute on the HtmlTag.\n     *\n     * @param {String} attrName The attribute name to set.\n     * @param {String} attrValue The attribute value to set.\n     * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n     */\n    HtmlTag.prototype.setAttr = function (attrName, attrValue) {\n        var tagAttrs = this.getAttrs();\n        tagAttrs[attrName] = attrValue;\n        return this;\n    };\n    /**\n     * Retrieves an attribute from the HtmlTag. If the attribute does not exist, returns `undefined`.\n     *\n     * @param {String} attrName The attribute name to retrieve.\n     * @return {String} The attribute's value, or `undefined` if it does not exist on the HtmlTag.\n     */\n    HtmlTag.prototype.getAttr = function (attrName) {\n        return this.getAttrs()[attrName];\n    };\n    /**\n     * Sets one or more attributes on the HtmlTag.\n     *\n     * @param {Object.<String, String>} attrs A key/value Object (map) of the attributes to set.\n     * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n     */\n    HtmlTag.prototype.setAttrs = function (attrs) {\n        Object.assign(this.getAttrs(), attrs);\n        return this;\n    };\n    /**\n     * Retrieves the attributes Object (map) for the HtmlTag.\n     *\n     * @return {Object.<String, String>} A key/value object of the attributes for the HtmlTag.\n     */\n    HtmlTag.prototype.getAttrs = function () {\n        return this.attrs || (this.attrs = {});\n    };\n    /**\n     * Sets the provided `cssClass`, overwriting any current CSS classes on the HtmlTag.\n     *\n     * @param {String} cssClass One or more space-separated CSS classes to set (overwrite).\n     * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n     */\n    HtmlTag.prototype.setClass = function (cssClass) {\n        return this.setAttr('class', cssClass);\n    };\n    /**\n     * Convenience method to add one or more CSS classes to the HtmlTag. Will not add duplicate CSS classes.\n     *\n     * @param {String} cssClass One or more space-separated CSS classes to add.\n     * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n     */\n    HtmlTag.prototype.addClass = function (cssClass) {\n        var classAttr = this.getClass(), whitespaceRegex = this.whitespaceRegex, classes = (!classAttr) ? [] : classAttr.split(whitespaceRegex), newClasses = cssClass.split(whitespaceRegex), newClass;\n        while (newClass = newClasses.shift()) {\n            if (indexOf(classes, newClass) === -1) {\n                classes.push(newClass);\n            }\n        }\n        this.getAttrs()['class'] = classes.join(\" \");\n        return this;\n    };\n    /**\n     * Convenience method to remove one or more CSS classes from the HtmlTag.\n     *\n     * @param {String} cssClass One or more space-separated CSS classes to remove.\n     * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n     */\n    HtmlTag.prototype.removeClass = function (cssClass) {\n        var classAttr = this.getClass(), whitespaceRegex = this.whitespaceRegex, classes = (!classAttr) ? [] : classAttr.split(whitespaceRegex), removeClasses = cssClass.split(whitespaceRegex), removeClass;\n        while (classes.length && (removeClass = removeClasses.shift())) {\n            var idx = indexOf(classes, removeClass);\n            if (idx !== -1) {\n                classes.splice(idx, 1);\n            }\n        }\n        this.getAttrs()['class'] = classes.join(\" \");\n        return this;\n    };\n    /**\n     * Convenience method to retrieve the CSS class(es) for the HtmlTag, which will each be separated by spaces when\n     * there are multiple.\n     *\n     * @return {String}\n     */\n    HtmlTag.prototype.getClass = function () {\n        return this.getAttrs()['class'] || \"\";\n    };\n    /**\n     * Convenience method to check if the tag has a CSS class or not.\n     *\n     * @param {String} cssClass The CSS class to check for.\n     * @return {Boolean} `true` if the HtmlTag has the CSS class, `false` otherwise.\n     */\n    HtmlTag.prototype.hasClass = function (cssClass) {\n        return (' ' + this.getClass() + ' ').indexOf(' ' + cssClass + ' ') !== -1;\n    };\n    /**\n     * Sets the inner HTML for the tag.\n     *\n     * @param {String} html The inner HTML to set.\n     * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n     */\n    HtmlTag.prototype.setInnerHTML = function (html) {\n        this.innerHTML = html;\n        return this;\n    };\n    /**\n     * Backwards compatibility method name.\n     *\n     * @param {String} html The inner HTML to set.\n     * @return {Autolinker.HtmlTag} This HtmlTag instance, so that method calls may be chained.\n     */\n    HtmlTag.prototype.setInnerHtml = function (html) {\n        return this.setInnerHTML(html);\n    };\n    /**\n     * Retrieves the inner HTML for the tag.\n     *\n     * @return {String}\n     */\n    HtmlTag.prototype.getInnerHTML = function () {\n        return this.innerHTML || \"\";\n    };\n    /**\n     * Backward compatibility method name.\n     *\n     * @return {String}\n     */\n    HtmlTag.prototype.getInnerHtml = function () {\n        return this.getInnerHTML();\n    };\n    /**\n     * Override of superclass method used to generate the HTML string for the tag.\n     *\n     * @return {String}\n     */\n    HtmlTag.prototype.toAnchorString = function () {\n        var tagName = this.getTagName(), attrsStr = this.buildAttrsStr();\n        attrsStr = (attrsStr) ? ' ' + attrsStr : ''; // prepend a space if there are actually attributes\n        return ['<', tagName, attrsStr, '>', this.getInnerHtml(), '</', tagName, '>'].join(\"\");\n    };\n    /**\n     * Support method for {@link #toAnchorString}, returns the string space-separated key=\"value\" pairs, used to populate\n     * the stringified HtmlTag.\n     *\n     * @protected\n     * @return {String} Example return: `attr1=\"value1\" attr2=\"value2\"`\n     */\n    HtmlTag.prototype.buildAttrsStr = function () {\n        if (!this.attrs)\n            return \"\"; // no `attrs` Object (map) has been set, return empty string\n        var attrs = this.getAttrs(), attrsArr = [];\n        for (var prop in attrs) {\n            if (attrs.hasOwnProperty(prop)) {\n                attrsArr.push(prop + '=\"' + attrs[prop] + '\"');\n            }\n        }\n        return attrsArr.join(\" \");\n    };\n    return HtmlTag;\n}());\nexport { HtmlTag };\n\n//# sourceMappingURL=html-tag.js.map\n","import { HtmlTag } from \"./html-tag\";\nimport { truncateSmart } from \"./truncate/truncate-smart\";\nimport { truncateMiddle } from \"./truncate/truncate-middle\";\nimport { truncateEnd } from \"./truncate/truncate-end\";\n/**\n * @protected\n * @class Autolinker.AnchorTagBuilder\n * @extends Object\n *\n * Builds anchor (&lt;a&gt;) tags for the Autolinker utility when a match is\n * found.\n *\n * Normally this class is instantiated, configured, and used internally by an\n * {@link Autolinker} instance, but may actually be used indirectly in a\n * {@link Autolinker#replaceFn replaceFn} to create {@link Autolinker.HtmlTag HtmlTag}\n * instances which may be modified before returning from the\n * {@link Autolinker#replaceFn replaceFn}. For example:\n *\n *     var html = Autolinker.link( \"Test google.com\", {\n *         replaceFn : function( match ) {\n *             var tag = match.buildTag();  // returns an {@link Autolinker.HtmlTag} instance\n *             tag.setAttr( 'rel', 'nofollow' );\n *\n *             return tag;\n *         }\n *     } );\n *\n *     // generated html:\n *     //   Test <a href=\"http://google.com\" target=\"_blank\" rel=\"nofollow\">google.com</a>\n */\nvar AnchorTagBuilder = /** @class */ (function () {\n    /**\n     * @method constructor\n     * @param {Object} [cfg] The configuration options for the AnchorTagBuilder instance, specified in an Object (map).\n     */\n    function AnchorTagBuilder(cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        /**\n         * @cfg {Boolean} newWindow\n         * @inheritdoc Autolinker#newWindow\n         */\n        this.newWindow = false; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Object} truncate\n         * @inheritdoc Autolinker#truncate\n         */\n        this.truncate = {}; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {String} className\n         * @inheritdoc Autolinker#className\n         */\n        this.className = ''; // default value just to get the above doc comment in the ES5 output and documentation generator\n        this.newWindow = cfg.newWindow || false;\n        this.truncate = cfg.truncate || {};\n        this.className = cfg.className || '';\n    }\n    /**\n     * Generates the actual anchor (&lt;a&gt;) tag to use in place of the\n     * matched text, via its `match` object.\n     *\n     * @param {Autolinker.match.Match} match The Match instance to generate an\n     *   anchor tag from.\n     * @return {Autolinker.HtmlTag} The HtmlTag instance for the anchor tag.\n     */\n    AnchorTagBuilder.prototype.build = function (match) {\n        return new HtmlTag({\n            tagName: 'a',\n            attrs: this.createAttrs(match),\n            innerHtml: this.processAnchorText(match.getAnchorText())\n        });\n    };\n    /**\n     * Creates the Object (map) of the HTML attributes for the anchor (&lt;a&gt;)\n     *   tag being generated.\n     *\n     * @protected\n     * @param {Autolinker.match.Match} match The Match instance to generate an\n     *   anchor tag from.\n     * @return {Object} A key/value Object (map) of the anchor tag's attributes.\n     */\n    AnchorTagBuilder.prototype.createAttrs = function (match) {\n        var attrs = {\n            'href': match.getAnchorHref() // we'll always have the `href` attribute\n        };\n        var cssClass = this.createCssClass(match);\n        if (cssClass) {\n            attrs['class'] = cssClass;\n        }\n        if (this.newWindow) {\n            attrs['target'] = \"_blank\";\n            attrs['rel'] = \"noopener noreferrer\"; // Issue #149. See https://mathiasbynens.github.io/rel-noopener/\n        }\n        if (this.truncate) {\n            if (this.truncate.length && this.truncate.length < match.getAnchorText().length) {\n                attrs['title'] = match.getAnchorHref();\n            }\n        }\n        return attrs;\n    };\n    /**\n     * Creates the CSS class that will be used for a given anchor tag, based on\n     * the `matchType` and the {@link #className} config.\n     *\n     * Example returns:\n     *\n     * - \"\"                                      // no {@link #className}\n     * - \"myLink myLink-url\"                     // url match\n     * - \"myLink myLink-email\"                   // email match\n     * - \"myLink myLink-phone\"                   // phone match\n     * - \"myLink myLink-hashtag\"                 // hashtag match\n     * - \"myLink myLink-mention myLink-twitter\"  // mention match with Twitter service\n     *\n     * @protected\n     * @param {Autolinker.match.Match} match The Match instance to generate an\n     *   anchor tag from.\n     * @return {String} The CSS class string for the link. Example return:\n     *   \"myLink myLink-url\". If no {@link #className} was configured, returns\n     *   an empty string.\n     */\n    AnchorTagBuilder.prototype.createCssClass = function (match) {\n        var className = this.className;\n        if (!className) {\n            return \"\";\n        }\n        else {\n            var returnClasses = [className], cssClassSuffixes = match.getCssClassSuffixes();\n            for (var i = 0, len = cssClassSuffixes.length; i < len; i++) {\n                returnClasses.push(className + '-' + cssClassSuffixes[i]);\n            }\n            return returnClasses.join(' ');\n        }\n    };\n    /**\n     * Processes the `anchorText` by truncating the text according to the\n     * {@link #truncate} config.\n     *\n     * @private\n     * @param {String} anchorText The anchor tag's text (i.e. what will be\n     *   displayed).\n     * @return {String} The processed `anchorText`.\n     */\n    AnchorTagBuilder.prototype.processAnchorText = function (anchorText) {\n        anchorText = this.doTruncate(anchorText);\n        return anchorText;\n    };\n    /**\n     * Performs the truncation of the `anchorText` based on the {@link #truncate}\n     * option. If the `anchorText` is longer than the length specified by the\n     * {@link #truncate} option, the truncation is performed based on the\n     * `location` property. See {@link #truncate} for details.\n     *\n     * @private\n     * @param {String} anchorText The anchor tag's text (i.e. what will be\n     *   displayed).\n     * @return {String} The truncated anchor text.\n     */\n    AnchorTagBuilder.prototype.doTruncate = function (anchorText) {\n        var truncate = this.truncate;\n        if (!truncate || !truncate.length)\n            return anchorText;\n        var truncateLength = truncate.length, truncateLocation = truncate.location;\n        if (truncateLocation === 'smart') {\n            return truncateSmart(anchorText, truncateLength);\n        }\n        else if (truncateLocation === 'middle') {\n            return truncateMiddle(anchorText, truncateLength);\n        }\n        else {\n            return truncateEnd(anchorText, truncateLength);\n        }\n    };\n    return AnchorTagBuilder;\n}());\nexport { AnchorTagBuilder };\n\n//# sourceMappingURL=anchor-tag-builder.js.map\n","import { __extends } from \"tslib\";\nimport { Matcher } from \"./matcher\";\nimport { alphaNumericCharsStr, alphaNumericAndMarksCharsStr, getDomainNameStr } from \"../regex-lib\";\nimport { tldRegex } from \"./tld-regex\";\nimport { UrlMatch } from \"../match/url-match\";\nimport { UrlMatchValidator } from \"./url-match-validator\";\n// RegExp objects which are shared by all instances of UrlMatcher. These are\n// here to avoid re-instantiating the RegExp objects if `Autolinker.link()` is\n// called multiple times, thus instantiating UrlMatcher and its RegExp \n// objects each time (which is very expensive - see https://github.com/gregjacobs/Autolinker.js/issues/314). \n// See descriptions of the properties where they are used for details about them\nvar matcherRegex = (function () {\n    var schemeRegex = /(?:[A-Za-z][-.+A-Za-z0-9]{0,63}:(?![A-Za-z][-.+A-Za-z0-9]{0,63}:\\/\\/)(?!\\d+\\/?)(?:\\/\\/)?)/, // match protocol, allow in format \"http://\" or \"mailto:\". However, do not match the first part of something like 'link:http://www.google.com' (i.e. don't match \"link:\"). Also, make sure we don't interpret 'google.com:8000' as if 'google.com' was a protocol here (i.e. ignore a trailing port number in this regex)\n    wwwRegex = /(?:www\\.)/, // starting with 'www.'\n    // Allow optional path, query string, and hash anchor, not ending in the following characters: \"?!:,.;\"\n    // http://blog.codinghorror.com/the-problem-with-urls/\n    urlSuffixRegex = new RegExp('[/?#](?:[' + alphaNumericAndMarksCharsStr + '\\\\-+&@#/%=~_()|\\'$*\\\\[\\\\]{}?!:,.;^\\u2713]*[' + alphaNumericAndMarksCharsStr + '\\\\-+&@#/%=~_()|\\'$*\\\\[\\\\]{}\\u2713])?');\n    return new RegExp([\n        '(?:',\n        '(',\n        schemeRegex.source,\n        getDomainNameStr(2),\n        ')',\n        '|',\n        '(',\n        '(//)?',\n        wwwRegex.source,\n        getDomainNameStr(6),\n        ')',\n        '|',\n        '(',\n        '(//)?',\n        getDomainNameStr(10) + '\\\\.',\n        tldRegex.source,\n        '(?![-' + alphaNumericCharsStr + '])',\n        ')',\n        ')',\n        '(?::[0-9]+)?',\n        '(?:' + urlSuffixRegex.source + ')?' // match for path, query string, and/or hash anchor - optional\n    ].join(\"\"), 'gi');\n})();\nvar wordCharRegExp = new RegExp('[' + alphaNumericAndMarksCharsStr + ']');\n/**\n * @class Autolinker.matcher.Url\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find URL matches in an input string.\n *\n * See this class's superclass ({@link Autolinker.matcher.Matcher}) for more details.\n */\nvar UrlMatcher = /** @class */ (function (_super) {\n    __extends(UrlMatcher, _super);\n    /**\n     * @method constructor\n     * @param {Object} cfg The configuration properties for the Match instance,\n     *   specified in an Object (map).\n     */\n    function UrlMatcher(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        /**\n         * @cfg {Object} stripPrefix (required)\n         *\n         * The Object form of {@link Autolinker#cfg-stripPrefix}.\n         */\n        _this.stripPrefix = { scheme: true, www: true }; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean} stripTrailingSlash (required)\n         * @inheritdoc Autolinker#stripTrailingSlash\n         */\n        _this.stripTrailingSlash = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean} decodePercentEncoding (required)\n         * @inheritdoc Autolinker#decodePercentEncoding\n         */\n        _this.decodePercentEncoding = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @protected\n         * @property {RegExp} matcherRegex\n         *\n         * The regular expression to match URLs with an optional scheme, port\n         * number, path, query string, and hash anchor.\n         *\n         * Example matches:\n         *\n         *     http://google.com\n         *     www.google.com\n         *     google.com/path/to/file?q1=1&q2=2#myAnchor\n         *\n         *\n         * This regular expression will have the following capturing groups:\n         *\n         * 1.  Group that matches a scheme-prefixed URL (i.e. 'http://google.com').\n         *     This is used to match scheme URLs with just a single word, such as\n         *     'http://localhost', where we won't double check that the domain name\n         *     has at least one dot ('.') in it.\n         * 2.  Group that matches a 'www.' prefixed URL. This is only matched if the\n         *     'www.' text was not prefixed by a scheme (i.e.: not prefixed by\n         *     'http://', 'ftp:', etc.)\n         * 3.  A protocol-relative ('//') match for the case of a 'www.' prefixed\n         *     URL. Will be an empty string if it is not a protocol-relative match.\n         *     We need to know the character before the '//' in order to determine\n         *     if it is a valid match or the // was in a string we don't want to\n         *     auto-link.\n         * 4.  Group that matches a known TLD (top level domain), when a scheme\n         *     or 'www.'-prefixed domain is not matched.\n         * 5.  A protocol-relative ('//') match for the case of a known TLD prefixed\n         *     URL. Will be an empty string if it is not a protocol-relative match.\n         *     See #3 for more info.\n         */\n        _this.matcherRegex = matcherRegex;\n        /**\n         * A regular expression to use to check the character before a protocol-relative\n         * URL match. We don't want to match a protocol-relative URL if it is part\n         * of another word.\n         *\n         * For example, we want to match something like \"Go to: //google.com\",\n         * but we don't want to match something like \"abc//google.com\"\n         *\n         * This regular expression is used to test the character before the '//'.\n         *\n         * @protected\n         * @type {RegExp} wordCharRegExp\n         */\n        _this.wordCharRegExp = wordCharRegExp;\n        _this.stripPrefix = cfg.stripPrefix;\n        _this.stripTrailingSlash = cfg.stripTrailingSlash;\n        _this.decodePercentEncoding = cfg.decodePercentEncoding;\n        return _this;\n    }\n    /**\n     * @inheritdoc\n     */\n    UrlMatcher.prototype.parseMatches = function (text) {\n        var matcherRegex = this.matcherRegex, stripPrefix = this.stripPrefix, stripTrailingSlash = this.stripTrailingSlash, decodePercentEncoding = this.decodePercentEncoding, tagBuilder = this.tagBuilder, matches = [], match;\n        var _loop_1 = function () {\n            var matchStr = match[0], schemeUrlMatch = match[1], wwwUrlMatch = match[4], wwwProtocolRelativeMatch = match[5], \n            //tldUrlMatch = match[ 8 ],  -- not needed at the moment\n            tldProtocolRelativeMatch = match[9], offset = match.index, protocolRelativeMatch = wwwProtocolRelativeMatch || tldProtocolRelativeMatch, prevChar = text.charAt(offset - 1);\n            if (!UrlMatchValidator.isValid(matchStr, schemeUrlMatch)) {\n                return \"continue\";\n            }\n            // If the match is preceded by an '@' character, then it is either\n            // an email address or a username. Skip these types of matches.\n            if (offset > 0 && prevChar === '@') {\n                return \"continue\";\n            }\n            // If it's a protocol-relative '//' match, but the character before the '//'\n            // was a word character (i.e. a letter/number), then we found the '//' in the\n            // middle of another word (such as \"asdf//asdf.com\"). In this case, skip the\n            // match.\n            if (offset > 0 && protocolRelativeMatch && this_1.wordCharRegExp.test(prevChar)) {\n                return \"continue\";\n            }\n            // If the URL ends with a question mark, don't include the question\n            // mark as part of the URL. We'll assume the question mark was the\n            // end of a sentence, such as: \"Going to google.com?\"\n            if (/\\?$/.test(matchStr)) {\n                matchStr = matchStr.substr(0, matchStr.length - 1);\n            }\n            // Handle a closing parenthesis or square bracket at the end of the \n            // match, and exclude it if there is not a matching open parenthesis \n            // or square bracket in the match itself.\n            if (this_1.matchHasUnbalancedClosingParen(matchStr)) {\n                matchStr = matchStr.substr(0, matchStr.length - 1); // remove the trailing \")\"\n            }\n            else {\n                // Handle an invalid character after the TLD\n                var pos = this_1.matchHasInvalidCharAfterTld(matchStr, schemeUrlMatch);\n                if (pos > -1) {\n                    matchStr = matchStr.substr(0, pos); // remove the trailing invalid chars\n                }\n            }\n            // The autolinker accepts many characters in a url's scheme (like `fake://test.com`).\n            // However, in cases where a URL is missing whitespace before an obvious link,\n            // (for example: `nowhitespacehttp://www.test.com`), we only want the match to start\n            // at the http:// part. We will check if the match contains a common scheme and then \n            // shift the match to start from there. \t\t\n            var foundCommonScheme = ['http://', 'https://'].find(function (commonScheme) { return !!schemeUrlMatch && schemeUrlMatch.indexOf(commonScheme) !== -1; });\n            if (foundCommonScheme) {\n                // If we found an overmatched URL, we want to find the index\n                // of where the match should start and shift the match to\n                // start from the beginning of the common scheme\n                var indexOfSchemeStart = matchStr.indexOf(foundCommonScheme);\n                matchStr = matchStr.substr(indexOfSchemeStart);\n                schemeUrlMatch = schemeUrlMatch.substr(indexOfSchemeStart);\n                offset = offset + indexOfSchemeStart;\n            }\n            var urlMatchType = schemeUrlMatch ? 'scheme' : (wwwUrlMatch ? 'www' : 'tld'), protocolUrlMatch = !!schemeUrlMatch;\n            matches.push(new UrlMatch({\n                tagBuilder: tagBuilder,\n                matchedText: matchStr,\n                offset: offset,\n                urlMatchType: urlMatchType,\n                url: matchStr,\n                protocolUrlMatch: protocolUrlMatch,\n                protocolRelativeMatch: !!protocolRelativeMatch,\n                stripPrefix: stripPrefix,\n                stripTrailingSlash: stripTrailingSlash,\n                decodePercentEncoding: decodePercentEncoding,\n            }));\n        };\n        var this_1 = this;\n        while ((match = matcherRegex.exec(text)) !== null) {\n            _loop_1();\n        }\n        return matches;\n    };\n    /**\n     * Determines if a match found has an unmatched closing parenthesis,\n     * square bracket or curly bracket. If so, the symbol will be removed\n     * from the match itself, and appended after the generated anchor tag.\n     *\n     * A match may have an extra closing parenthesis at the end of the match\n     * because the regular expression must include parenthesis for URLs such as\n     * \"wikipedia.com/something_(disambiguation)\", which should be auto-linked.\n     *\n     * However, an extra parenthesis *will* be included when the URL itself is\n     * wrapped in parenthesis, such as in the case of:\n     *     \"(wikipedia.com/something_(disambiguation))\"\n     * In this case, the last closing parenthesis should *not* be part of the\n     * URL itself, and this method will return `true`.\n     *\n     * For square brackets in URLs such as in PHP arrays, the same behavior as\n     * parenthesis discussed above should happen:\n     *     \"[http://www.example.com/foo.php?bar[]=1&bar[]=2&bar[]=3]\"\n     * The closing square bracket should not be part of the URL itself, and this\n     * method will return `true`.\n     *\n     * @protected\n     * @param {String} matchStr The full match string from the {@link #matcherRegex}.\n     * @return {Boolean} `true` if there is an unbalanced closing parenthesis or\n     *   square bracket at the end of the `matchStr`, `false` otherwise.\n     */\n    UrlMatcher.prototype.matchHasUnbalancedClosingParen = function (matchStr) {\n        var endChar = matchStr.charAt(matchStr.length - 1);\n        var startChar;\n        if (endChar === ')') {\n            startChar = '(';\n        }\n        else if (endChar === ']') {\n            startChar = '[';\n        }\n        else if (endChar === '}') {\n            startChar = '{';\n        }\n        else {\n            return false; // not a close parenthesis or square bracket\n        }\n        // Find if there are the same number of open braces as close braces in\n        // the URL string, minus the last character (which we have already \n        // determined to be either ')', ']' or '}'\n        var numOpenBraces = 0;\n        for (var i = 0, len = matchStr.length - 1; i < len; i++) {\n            var char = matchStr.charAt(i);\n            if (char === startChar) {\n                numOpenBraces++;\n            }\n            else if (char === endChar) {\n                numOpenBraces = Math.max(numOpenBraces - 1, 0);\n            }\n        }\n        // If the number of open braces matches the number of close braces in\n        // the URL minus the last character, then the match has *unbalanced*\n        // braces because of the last character. Example of unbalanced braces\n        // from the regex match:\n        //     \"http://example.com?a[]=1]\"\n        if (numOpenBraces === 0) {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Determine if there's an invalid character after the TLD in a URL. Valid\n     * characters after TLD are ':/?#'. Exclude scheme matched URLs from this\n     * check.\n     *\n     * @protected\n     * @param {String} urlMatch The matched URL, if there was one. Will be an\n     *   empty string if the match is not a URL match.\n     * @param {String} schemeUrlMatch The match URL string for a scheme\n     *   match. Ex: 'http://yahoo.com'. This is used to match something like\n     *   'http://localhost', where we won't double check that the domain name\n     *   has at least one '.' in it.\n     * @return {Number} the position where the invalid character was found. If\n     *   no such character was found, returns -1\n     */\n    UrlMatcher.prototype.matchHasInvalidCharAfterTld = function (urlMatch, schemeUrlMatch) {\n        if (!urlMatch) {\n            return -1;\n        }\n        var offset = 0;\n        if (schemeUrlMatch) {\n            offset = urlMatch.indexOf(':');\n            urlMatch = urlMatch.slice(offset);\n        }\n        var re = new RegExp(\"^((.?\\/\\/)?[-.\" + alphaNumericAndMarksCharsStr + \"]*[-\" + alphaNumericAndMarksCharsStr + \"]\\\\.[-\" + alphaNumericAndMarksCharsStr + \"]+)\");\n        var res = re.exec(urlMatch);\n        if (res === null) {\n            return -1;\n        }\n        offset += res[1].length;\n        urlMatch = urlMatch.slice(res[1].length);\n        if (/^[^-.A-Za-z0-9:\\/?#]/.test(urlMatch)) {\n            return offset;\n        }\n        return -1;\n    };\n    return UrlMatcher;\n}(Matcher));\nexport { UrlMatcher };\n\n//# sourceMappingURL=url-matcher.js.map\n","/**\n * Date: 2015-10-05\n * Author: Kasper Sfren <soefritz@gmail.com> (https://github.com/kafoso)\n *\n * A truncation feature, where the ellipsis will be placed at a section within\n * the URL making it still somewhat human readable.\n *\n * @param {String} url\t\t\t\t\t\t A URL.\n * @param {Number} truncateLen\t\t The maximum length of the truncated output URL string.\n * @param {String} ellipsisChars\t The characters to place within the url, e.g. \"...\".\n * @return {String} The truncated URL.\n */\nexport function truncateSmart(url, truncateLen, ellipsisChars) {\n    var ellipsisLengthBeforeParsing;\n    var ellipsisLength;\n    if (ellipsisChars == null) {\n        ellipsisChars = '&hellip;';\n        ellipsisLength = 3;\n        ellipsisLengthBeforeParsing = 8;\n    }\n    else {\n        ellipsisLength = ellipsisChars.length;\n        ellipsisLengthBeforeParsing = ellipsisChars.length;\n    }\n    var parse_url = function (url) {\n        var urlObj = {};\n        var urlSub = url;\n        var match = urlSub.match(/^([a-z]+):\\/\\//i);\n        if (match) {\n            urlObj.scheme = match[1];\n            urlSub = urlSub.substr(match[0].length);\n        }\n        match = urlSub.match(/^(.*?)(?=(\\?|#|\\/|$))/i);\n        if (match) {\n            urlObj.host = match[1];\n            urlSub = urlSub.substr(match[0].length);\n        }\n        match = urlSub.match(/^\\/(.*?)(?=(\\?|#|$))/i);\n        if (match) {\n            urlObj.path = match[1];\n            urlSub = urlSub.substr(match[0].length);\n        }\n        match = urlSub.match(/^\\?(.*?)(?=(#|$))/i);\n        if (match) {\n            urlObj.query = match[1];\n            urlSub = urlSub.substr(match[0].length);\n        }\n        match = urlSub.match(/^#(.*?)$/i);\n        if (match) {\n            urlObj.fragment = match[1];\n            //urlSub = urlSub.substr(match[0].length);  -- not used. Uncomment if adding another block.\n        }\n        return urlObj;\n    };\n    var buildUrl = function (urlObj) {\n        var url = \"\";\n        if (urlObj.scheme && urlObj.host) {\n            url += urlObj.scheme + \"://\";\n        }\n        if (urlObj.host) {\n            url += urlObj.host;\n        }\n        if (urlObj.path) {\n            url += \"/\" + urlObj.path;\n        }\n        if (urlObj.query) {\n            url += \"?\" + urlObj.query;\n        }\n        if (urlObj.fragment) {\n            url += \"#\" + urlObj.fragment;\n        }\n        return url;\n    };\n    var buildSegment = function (segment, remainingAvailableLength) {\n        var remainingAvailableLengthHalf = remainingAvailableLength / 2, startOffset = Math.ceil(remainingAvailableLengthHalf), endOffset = (-1) * Math.floor(remainingAvailableLengthHalf), end = \"\";\n        if (endOffset < 0) {\n            end = segment.substr(endOffset);\n        }\n        return segment.substr(0, startOffset) + ellipsisChars + end;\n    };\n    if (url.length <= truncateLen) {\n        return url;\n    }\n    var availableLength = truncateLen - ellipsisLength;\n    var urlObj = parse_url(url);\n    // Clean up the URL\n    if (urlObj.query) {\n        var matchQuery = urlObj.query.match(/^(.*?)(?=(\\?|\\#))(.*?)$/i);\n        if (matchQuery) {\n            // Malformed URL; two or more \"?\". Removed any content behind the 2nd.\n            urlObj.query = urlObj.query.substr(0, matchQuery[1].length);\n            url = buildUrl(urlObj);\n        }\n    }\n    if (url.length <= truncateLen) {\n        return url;\n    }\n    if (urlObj.host) {\n        urlObj.host = urlObj.host.replace(/^www\\./, \"\");\n        url = buildUrl(urlObj);\n    }\n    if (url.length <= truncateLen) {\n        return url;\n    }\n    // Process and build the URL\n    var str = \"\";\n    if (urlObj.host) {\n        str += urlObj.host;\n    }\n    if (str.length >= availableLength) {\n        if (urlObj.host.length == truncateLen) {\n            return (urlObj.host.substr(0, (truncateLen - ellipsisLength)) + ellipsisChars).substr(0, availableLength + ellipsisLengthBeforeParsing);\n        }\n        return buildSegment(str, availableLength).substr(0, availableLength + ellipsisLengthBeforeParsing);\n    }\n    var pathAndQuery = \"\";\n    if (urlObj.path) {\n        pathAndQuery += \"/\" + urlObj.path;\n    }\n    if (urlObj.query) {\n        pathAndQuery += \"?\" + urlObj.query;\n    }\n    if (pathAndQuery) {\n        if ((str + pathAndQuery).length >= availableLength) {\n            if ((str + pathAndQuery).length == truncateLen) {\n                return (str + pathAndQuery).substr(0, truncateLen);\n            }\n            var remainingAvailableLength = availableLength - str.length;\n            return (str + buildSegment(pathAndQuery, remainingAvailableLength)).substr(0, availableLength + ellipsisLengthBeforeParsing);\n        }\n        else {\n            str += pathAndQuery;\n        }\n    }\n    if (urlObj.fragment) {\n        var fragment = \"#\" + urlObj.fragment;\n        if ((str + fragment).length >= availableLength) {\n            if ((str + fragment).length == truncateLen) {\n                return (str + fragment).substr(0, truncateLen);\n            }\n            var remainingAvailableLength2 = availableLength - str.length;\n            return (str + buildSegment(fragment, remainingAvailableLength2)).substr(0, availableLength + ellipsisLengthBeforeParsing);\n        }\n        else {\n            str += fragment;\n        }\n    }\n    if (urlObj.scheme && urlObj.host) {\n        var scheme = urlObj.scheme + \"://\";\n        if ((str + scheme).length < availableLength) {\n            return (scheme + str).substr(0, truncateLen);\n        }\n    }\n    if (str.length <= truncateLen) {\n        return str;\n    }\n    var end = \"\";\n    if (availableLength > 0) {\n        end = str.substr((-1) * Math.floor(availableLength / 2));\n    }\n    return (str.substr(0, Math.ceil(availableLength / 2)) + ellipsisChars + end).substr(0, availableLength + ellipsisLengthBeforeParsing);\n}\n\n//# sourceMappingURL=truncate-smart.js.map\n","/**\n * Date: 2015-10-05\n * Author: Kasper Sfren <soefritz@gmail.com> (https://github.com/kafoso)\n *\n * A truncation feature, where the ellipsis will be placed in the dead-center of the URL.\n *\n * @param {String} url             A URL.\n * @param {Number} truncateLen     The maximum length of the truncated output URL string.\n * @param {String} ellipsisChars   The characters to place within the url, e.g. \"..\".\n * @return {String} The truncated URL.\n */\nexport function truncateMiddle(url, truncateLen, ellipsisChars) {\n    if (url.length <= truncateLen) {\n        return url;\n    }\n    var ellipsisLengthBeforeParsing;\n    var ellipsisLength;\n    if (ellipsisChars == null) {\n        ellipsisChars = '&hellip;';\n        ellipsisLengthBeforeParsing = 8;\n        ellipsisLength = 3;\n    }\n    else {\n        ellipsisLengthBeforeParsing = ellipsisChars.length;\n        ellipsisLength = ellipsisChars.length;\n    }\n    var availableLength = truncateLen - ellipsisLength;\n    var end = \"\";\n    if (availableLength > 0) {\n        end = url.substr((-1) * Math.floor(availableLength / 2));\n    }\n    return (url.substr(0, Math.ceil(availableLength / 2)) + ellipsisChars + end).substr(0, availableLength + ellipsisLengthBeforeParsing);\n}\n\n//# sourceMappingURL=truncate-middle.js.map\n","import { ellipsis } from \"../utils\";\n/**\n * A truncation feature where the ellipsis will be placed at the end of the URL.\n *\n * @param {String} anchorText\n * @param {Number} truncateLen The maximum length of the truncated output URL string.\n * @param {String} ellipsisChars The characters to place within the url, e.g. \"..\".\n * @return {String} The truncated URL.\n */\nexport function truncateEnd(anchorText, truncateLen, ellipsisChars) {\n    return ellipsis(anchorText, truncateLen, ellipsisChars);\n}\n\n//# sourceMappingURL=truncate-end.js.map\n","/**\n * @abstract\n * @class Autolinker.match.Match\n *\n * Represents a match found in an input string which should be Autolinked. A Match object is what is provided in a\n * {@link Autolinker#replaceFn replaceFn}, and may be used to query for details about the match.\n *\n * For example:\n *\n *     var input = \"...\";  // string with URLs, Email Addresses, and Mentions (Twitter, Instagram, Soundcloud)\n *\n *     var linkedText = Autolinker.link( input, {\n *         replaceFn : function( match ) {\n *             console.log( \"href = \", match.getAnchorHref() );\n *             console.log( \"text = \", match.getAnchorText() );\n *\n *             switch( match.getType() ) {\n *                 case 'url' :\n *                     console.log( \"url: \", match.getUrl() );\n *\n *                 case 'email' :\n *                     console.log( \"email: \", match.getEmail() );\n *\n *                 case 'mention' :\n *                     console.log( \"mention: \", match.getMention() );\n *             }\n *         }\n *     } );\n *\n * See the {@link Autolinker} class for more details on using the {@link Autolinker#replaceFn replaceFn}.\n */\nvar Match = /** @class */ (function () {\n    /**\n     * @member Autolinker.match.Match\n     * @method constructor\n     * @param {Object} cfg The configuration properties for the Match\n     *   instance, specified in an Object (map).\n     */\n    function Match(cfg) {\n        /**\n         * @cfg {Autolinker.AnchorTagBuilder} tagBuilder (required)\n         *\n         * Reference to the AnchorTagBuilder instance to use to generate an anchor\n         * tag for the Match.\n         */\n        this.__jsduckDummyDocProp = null; // property used just to get the above doc comment into the ES5 output and documentation generator\n        /**\n         * @cfg {String} matchedText (required)\n         *\n         * The original text that was matched by the {@link Autolinker.matcher.Matcher}.\n         */\n        this.matchedText = ''; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Number} offset (required)\n         *\n         * The offset of where the match was made in the input string.\n         */\n        this.offset = 0; // default value just to get the above doc comment in the ES5 output and documentation generator\n        this.tagBuilder = cfg.tagBuilder;\n        this.matchedText = cfg.matchedText;\n        this.offset = cfg.offset;\n    }\n    /**\n     * Returns the original text that was matched.\n     *\n     * @return {String}\n     */\n    Match.prototype.getMatchedText = function () {\n        return this.matchedText;\n    };\n    /**\n     * Sets the {@link #offset} of where the match was made in the input string.\n     *\n     * A {@link Autolinker.matcher.Matcher} will be fed only HTML text nodes,\n     * and will therefore set an original offset that is relative to the HTML\n     * text node itself. However, we want this offset to be relative to the full\n     * HTML input string, and thus if using {@link Autolinker#parse} (rather\n     * than calling a {@link Autolinker.matcher.Matcher} directly), then this\n     * offset is corrected after the Matcher itself has done its job.\n     *\n     * @param {Number} offset\n     */\n    Match.prototype.setOffset = function (offset) {\n        this.offset = offset;\n    };\n    /**\n     * Returns the offset of where the match was made in the input string. This\n     * is the 0-based index of the match.\n     *\n     * @return {Number}\n     */\n    Match.prototype.getOffset = function () {\n        return this.offset;\n    };\n    /**\n     * Returns the CSS class suffix(es) for this match.\n     *\n     * A CSS class suffix is appended to the {@link Autolinker#className} in\n     * the {@link Autolinker.AnchorTagBuilder} when a match is translated into\n     * an anchor tag.\n     *\n     * For example, if {@link Autolinker#className} was configured as 'myLink',\n     * and this method returns `[ 'url' ]`, the final class name of the element\n     * will become: 'myLink myLink-url'.\n     *\n     * The match may provide multiple CSS class suffixes to be appended to the\n     * {@link Autolinker#className} in order to facilitate better styling\n     * options for different match criteria. See {@link Autolinker.match.Mention}\n     * for an example.\n     *\n     * By default, this method returns a single array with the match's\n     * {@link #getType type} name, but may be overridden by subclasses.\n     *\n     * @return {String[]}\n     */\n    Match.prototype.getCssClassSuffixes = function () {\n        return [this.getType()];\n    };\n    /**\n     * Builds and returns an {@link Autolinker.HtmlTag} instance based on the\n     * Match.\n     *\n     * This can be used to easily generate anchor tags from matches, and either\n     * return their HTML string, or modify them before doing so.\n     *\n     * Example Usage:\n     *\n     *     var tag = match.buildTag();\n     *     tag.addClass( 'cordova-link' );\n     *     tag.setAttr( 'target', '_system' );\n     *\n     *     tag.toAnchorString();  // <a href=\"http://google.com\" class=\"cordova-link\" target=\"_system\">Google</a>\n     *\n     * Example Usage in {@link Autolinker#replaceFn}:\n     *\n     *     var html = Autolinker.link( \"Test google.com\", {\n     *         replaceFn : function( match ) {\n     *             var tag = match.buildTag();  // returns an {@link Autolinker.HtmlTag} instance\n     *             tag.setAttr( 'rel', 'nofollow' );\n     *\n     *             return tag;\n     *         }\n     *     } );\n     *\n     *     // generated html:\n     *     //   Test <a href=\"http://google.com\" target=\"_blank\" rel=\"nofollow\">google.com</a>\n     */\n    Match.prototype.buildTag = function () {\n        return this.tagBuilder.build(this);\n    };\n    return Match;\n}());\nexport { Match };\n\n//# sourceMappingURL=match.js.map\n","import { __extends } from \"tslib\";\nimport { Match } from \"./match\";\n/**\n * @class Autolinker.match.Email\n * @extends Autolinker.match.Match\n *\n * Represents a Email match found in an input string which should be Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more details.\n */\nvar EmailMatch = /** @class */ (function (_super) {\n    __extends(EmailMatch, _super);\n    /**\n     * @method constructor\n     * @param {Object} cfg The configuration properties for the Match\n     *   instance, specified in an Object (map).\n     */\n    function EmailMatch(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        /**\n         * @cfg {String} email (required)\n         *\n         * The email address that was matched.\n         */\n        _this.email = ''; // default value just to get the above doc comment in the ES5 output and documentation generator\n        _this.email = cfg.email;\n        return _this;\n    }\n    /**\n     * Returns a string name for the type of match that this class represents.\n     * For the case of EmailMatch, returns 'email'.\n     *\n     * @return {String}\n     */\n    EmailMatch.prototype.getType = function () {\n        return 'email';\n    };\n    /**\n     * Returns the email address that was matched.\n     *\n     * @return {String}\n     */\n    EmailMatch.prototype.getEmail = function () {\n        return this.email;\n    };\n    /**\n     * Returns the anchor href that should be generated for the match.\n     *\n     * @return {String}\n     */\n    EmailMatch.prototype.getAnchorHref = function () {\n        return 'mailto:' + this.email;\n    };\n    /**\n     * Returns the anchor text that should be generated for the match.\n     *\n     * @return {String}\n     */\n    EmailMatch.prototype.getAnchorText = function () {\n        return this.email;\n    };\n    return EmailMatch;\n}(Match));\nexport { EmailMatch };\n\n//# sourceMappingURL=email-match.js.map\n","import { __extends } from \"tslib\";\nimport { Match } from \"./match\";\n/**\n * @class Autolinker.match.Hashtag\n * @extends Autolinker.match.Match\n *\n * Represents a Hashtag match found in an input string which should be\n * Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more\n * details.\n */\nvar HashtagMatch = /** @class */ (function (_super) {\n    __extends(HashtagMatch, _super);\n    /**\n     * @method constructor\n     * @param {Object} cfg The configuration properties for the Match\n     *   instance, specified in an Object (map).\n     */\n    function HashtagMatch(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        /**\n         * @cfg {String} serviceName\n         *\n         * The service to point hashtag matches to. See {@link Autolinker#hashtag}\n         * for available values.\n         */\n        _this.serviceName = ''; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {String} hashtag (required)\n         *\n         * The HashtagMatch that was matched, without the '#'.\n         */\n        _this.hashtag = ''; // default value just to get the above doc comment in the ES5 output and documentation generator\n        _this.serviceName = cfg.serviceName;\n        _this.hashtag = cfg.hashtag;\n        return _this;\n    }\n    /**\n     * Returns a string name for the type of match that this class represents.\n     * For the case of HashtagMatch, returns 'hashtag'.\n     *\n     * @return {String}\n     */\n    HashtagMatch.prototype.getType = function () {\n        return 'hashtag';\n    };\n    /**\n     * Returns the configured {@link #serviceName} to point the HashtagMatch to.\n     * Ex: 'facebook', 'twitter'.\n     *\n     * @return {String}\n     */\n    HashtagMatch.prototype.getServiceName = function () {\n        return this.serviceName;\n    };\n    /**\n     * Returns the matched hashtag, without the '#' character.\n     *\n     * @return {String}\n     */\n    HashtagMatch.prototype.getHashtag = function () {\n        return this.hashtag;\n    };\n    /**\n     * Returns the anchor href that should be generated for the match.\n     *\n     * @return {String}\n     */\n    HashtagMatch.prototype.getAnchorHref = function () {\n        var serviceName = this.serviceName, hashtag = this.hashtag;\n        switch (serviceName) {\n            case 'twitter':\n                return 'https://twitter.com/hashtag/' + hashtag;\n            case 'facebook':\n                return 'https://www.facebook.com/hashtag/' + hashtag;\n            case 'instagram':\n                return 'https://instagram.com/explore/tags/' + hashtag;\n            case 'tiktok':\n                return 'https://www.tiktok.com/tag/' + hashtag;\n            default: // Shouldn't happen because Autolinker's constructor should block any invalid values, but just in case.\n                throw new Error('Unknown service name to point hashtag to: ' + serviceName);\n        }\n    };\n    /**\n     * Returns the anchor text that should be generated for the match.\n     *\n     * @return {String}\n     */\n    HashtagMatch.prototype.getAnchorText = function () {\n        return '#' + this.hashtag;\n    };\n    return HashtagMatch;\n}(Match));\nexport { HashtagMatch };\n\n//# sourceMappingURL=hashtag-match.js.map\n","import { __extends } from \"tslib\";\nimport { Match } from \"./match\";\n/**\n * @class Autolinker.match.Mention\n * @extends Autolinker.match.Match\n *\n * Represents a Mention match found in an input string which should be Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more details.\n */\nvar MentionMatch = /** @class */ (function (_super) {\n    __extends(MentionMatch, _super);\n    /**\n     * @method constructor\n     * @param {Object} cfg The configuration properties for the Match\n     *   instance, specified in an Object (map).\n     */\n    function MentionMatch(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        /**\n         * @cfg {String} serviceName\n         *\n         * The service to point mention matches to. See {@link Autolinker#mention}\n         * for available values.\n         */\n        _this.serviceName = 'twitter'; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {String} mention (required)\n         *\n         * The Mention that was matched, without the '@' character.\n         */\n        _this.mention = ''; // default value just to get the above doc comment in the ES5 output and documentation generator\n        _this.mention = cfg.mention;\n        _this.serviceName = cfg.serviceName;\n        return _this;\n    }\n    /**\n     * Returns a string name for the type of match that this class represents.\n     * For the case of MentionMatch, returns 'mention'.\n     *\n     * @return {String}\n     */\n    MentionMatch.prototype.getType = function () {\n        return 'mention';\n    };\n    /**\n     * Returns the mention, without the '@' character.\n     *\n     * @return {String}\n     */\n    MentionMatch.prototype.getMention = function () {\n        return this.mention;\n    };\n    /**\n     * Returns the configured {@link #serviceName} to point the mention to.\n     * Ex: 'instagram', 'twitter', 'soundcloud'.\n     *\n     * @return {String}\n     */\n    MentionMatch.prototype.getServiceName = function () {\n        return this.serviceName;\n    };\n    /**\n     * Returns the anchor href that should be generated for the match.\n     *\n     * @return {String}\n     */\n    MentionMatch.prototype.getAnchorHref = function () {\n        switch (this.serviceName) {\n            case 'twitter':\n                return 'https://twitter.com/' + this.mention;\n            case 'instagram':\n                return 'https://instagram.com/' + this.mention;\n            case 'soundcloud':\n                return 'https://soundcloud.com/' + this.mention;\n            case 'tiktok':\n                return 'https://www.tiktok.com/@' + this.mention;\n            default: // Shouldn't happen because Autolinker's constructor should block any invalid values, but just in case.\n                throw new Error('Unknown service name to point mention to: ' + this.serviceName);\n        }\n    };\n    /**\n     * Returns the anchor text that should be generated for the match.\n     *\n     * @return {String}\n     */\n    MentionMatch.prototype.getAnchorText = function () {\n        return '@' + this.mention;\n    };\n    /**\n     * Returns the CSS class suffixes that should be used on a tag built with\n     * the match. See {@link Autolinker.match.Match#getCssClassSuffixes} for\n     * details.\n     *\n     * @return {String[]}\n     */\n    MentionMatch.prototype.getCssClassSuffixes = function () {\n        var cssClassSuffixes = _super.prototype.getCssClassSuffixes.call(this), serviceName = this.getServiceName();\n        if (serviceName) {\n            cssClassSuffixes.push(serviceName);\n        }\n        return cssClassSuffixes;\n    };\n    return MentionMatch;\n}(Match));\nexport { MentionMatch };\n\n//# sourceMappingURL=mention-match.js.map\n","import { __extends } from \"tslib\";\nimport { Match } from \"./match\";\n/**\n * @class Autolinker.match.Phone\n * @extends Autolinker.match.Match\n *\n * Represents a Phone number match found in an input string which should be\n * Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more\n * details.\n */\nvar PhoneMatch = /** @class */ (function (_super) {\n    __extends(PhoneMatch, _super);\n    /**\n     * @method constructor\n     * @param {Object} cfg The configuration properties for the Match\n     *   instance, specified in an Object (map).\n     */\n    function PhoneMatch(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        /**\n         * @protected\n         * @property {String} number (required)\n         *\n         * The phone number that was matched, without any delimiter characters.\n         *\n         * Note: This is a string to allow for prefixed 0's.\n         */\n        _this.number = ''; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @protected\n         * @property  {Boolean} plusSign (required)\n         *\n         * `true` if the matched phone number started with a '+' sign. We'll include\n         * it in the `tel:` URL if so, as this is needed for international numbers.\n         *\n         * Ex: '+1 (123) 456 7879'\n         */\n        _this.plusSign = false; // default value just to get the above doc comment in the ES5 output and documentation generator\n        _this.number = cfg.number;\n        _this.plusSign = cfg.plusSign;\n        return _this;\n    }\n    /**\n     * Returns a string name for the type of match that this class represents.\n     * For the case of PhoneMatch, returns 'phone'.\n     *\n     * @return {String}\n     */\n    PhoneMatch.prototype.getType = function () {\n        return 'phone';\n    };\n    /**\n     * Returns the phone number that was matched as a string, without any\n     * delimiter characters.\n     *\n     * Note: This is a string to allow for prefixed 0's.\n     *\n     * @return {String}\n     */\n    PhoneMatch.prototype.getPhoneNumber = function () {\n        return this.number;\n    };\n    /**\n     * Alias of {@link #getPhoneNumber}, returns the phone number that was\n     * matched as a string, without any delimiter characters.\n     *\n     * Note: This is a string to allow for prefixed 0's.\n     *\n     * @return {String}\n     */\n    PhoneMatch.prototype.getNumber = function () {\n        return this.getPhoneNumber();\n    };\n    /**\n     * Returns the anchor href that should be generated for the match.\n     *\n     * @return {String}\n     */\n    PhoneMatch.prototype.getAnchorHref = function () {\n        return 'tel:' + (this.plusSign ? '+' : '') + this.number;\n    };\n    /**\n     * Returns the anchor text that should be generated for the match.\n     *\n     * @return {String}\n     */\n    PhoneMatch.prototype.getAnchorText = function () {\n        return this.matchedText;\n    };\n    return PhoneMatch;\n}(Match));\nexport { PhoneMatch };\n\n//# sourceMappingURL=phone-match.js.map\n","import { __extends } from \"tslib\";\nimport { Match } from \"./match\";\n/**\n * @class Autolinker.match.Url\n * @extends Autolinker.match.Match\n *\n * Represents a Url match found in an input string which should be Autolinked.\n *\n * See this class's superclass ({@link Autolinker.match.Match}) for more details.\n */\nvar UrlMatch = /** @class */ (function (_super) {\n    __extends(UrlMatch, _super);\n    /**\n     * @method constructor\n     * @param {Object} cfg The configuration properties for the Match\n     *   instance, specified in an Object (map).\n     */\n    function UrlMatch(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        /**\n         * @cfg {String} url (required)\n         *\n         * The url that was matched.\n         */\n        _this.url = ''; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {\"scheme\"/\"www\"/\"tld\"} urlMatchType (required)\n         *\n         * The type of URL match that this class represents. This helps to determine\n         * if the match was made in the original text with a prefixed scheme (ex:\n         * 'http://www.google.com'), a prefixed 'www' (ex: 'www.google.com'), or\n         * was matched by a known top-level domain (ex: 'google.com').\n         */\n        _this.urlMatchType = 'scheme'; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean} protocolUrlMatch (required)\n         *\n         * `true` if the URL is a match which already has a protocol (i.e.\n         * 'http://'), `false` if the match was from a 'www' or known TLD match.\n         */\n        _this.protocolUrlMatch = false; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean} protocolRelativeMatch (required)\n         *\n         * `true` if the URL is a protocol-relative match. A protocol-relative match\n         * is a URL that starts with '//', and will be either http:// or https://\n         * based on the protocol that the site is loaded under.\n         */\n        _this.protocolRelativeMatch = false; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Object} stripPrefix (required)\n         *\n         * The Object form of {@link Autolinker#cfg-stripPrefix}.\n         */\n        _this.stripPrefix = { scheme: true, www: true }; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean} stripTrailingSlash (required)\n         * @inheritdoc Autolinker#cfg-stripTrailingSlash\n         */\n        _this.stripTrailingSlash = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean} decodePercentEncoding (required)\n         * @inheritdoc Autolinker#cfg-decodePercentEncoding\n         */\n        _this.decodePercentEncoding = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @private\n         * @property {RegExp} schemePrefixRegex\n         *\n         * A regular expression used to remove the 'http://' or 'https://' from\n         * URLs.\n         */\n        _this.schemePrefixRegex = /^(https?:\\/\\/)?/i;\n        /**\n         * @private\n         * @property {RegExp} wwwPrefixRegex\n         *\n         * A regular expression used to remove the 'www.' from URLs.\n         */\n        _this.wwwPrefixRegex = /^(https?:\\/\\/)?(www\\.)?/i;\n        /**\n         * @private\n         * @property {RegExp} protocolRelativeRegex\n         *\n         * The regular expression used to remove the protocol-relative '//' from the {@link #url} string, for purposes\n         * of {@link #getAnchorText}. A protocol-relative URL is, for example, \"//yahoo.com\"\n         */\n        _this.protocolRelativeRegex = /^\\/\\//;\n        /**\n         * @private\n         * @property {Boolean} protocolPrepended\n         *\n         * Will be set to `true` if the 'http://' protocol has been prepended to the {@link #url} (because the\n         * {@link #url} did not have a protocol)\n         */\n        _this.protocolPrepended = false;\n        _this.urlMatchType = cfg.urlMatchType;\n        _this.url = cfg.url;\n        _this.protocolUrlMatch = cfg.protocolUrlMatch;\n        _this.protocolRelativeMatch = cfg.protocolRelativeMatch;\n        _this.stripPrefix = cfg.stripPrefix;\n        _this.stripTrailingSlash = cfg.stripTrailingSlash;\n        _this.decodePercentEncoding = cfg.decodePercentEncoding;\n        return _this;\n    }\n    /**\n     * Returns a string name for the type of match that this class represents.\n     * For the case of UrlMatch, returns 'url'.\n     *\n     * @return {String}\n     */\n    UrlMatch.prototype.getType = function () {\n        return 'url';\n    };\n    /**\n     * Returns a string name for the type of URL match that this class\n     * represents.\n     *\n     * This helps to determine if the match was made in the original text with a\n     * prefixed scheme (ex: 'http://www.google.com'), a prefixed 'www' (ex:\n     * 'www.google.com'), or was matched by a known top-level domain (ex:\n     * 'google.com').\n     *\n     * @return {\"scheme\"/\"www\"/\"tld\"}\n     */\n    UrlMatch.prototype.getUrlMatchType = function () {\n        return this.urlMatchType;\n    };\n    /**\n     * Returns the url that was matched, assuming the protocol to be 'http://' if the original\n     * match was missing a protocol.\n     *\n     * @return {String}\n     */\n    UrlMatch.prototype.getUrl = function () {\n        var url = this.url;\n        // if the url string doesn't begin with a protocol, assume 'http://'\n        if (!this.protocolRelativeMatch && !this.protocolUrlMatch && !this.protocolPrepended) {\n            url = this.url = 'http://' + url;\n            this.protocolPrepended = true;\n        }\n        return url;\n    };\n    /**\n     * Returns the anchor href that should be generated for the match.\n     *\n     * @return {String}\n     */\n    UrlMatch.prototype.getAnchorHref = function () {\n        var url = this.getUrl();\n        return url.replace(/&amp;/g, '&'); // any &amp;'s in the URL should be converted back to '&' if they were displayed as &amp; in the source html\n    };\n    /**\n     * Returns the anchor text that should be generated for the match.\n     *\n     * @return {String}\n     */\n    UrlMatch.prototype.getAnchorText = function () {\n        var anchorText = this.getMatchedText();\n        if (this.protocolRelativeMatch) {\n            // Strip off any protocol-relative '//' from the anchor text\n            anchorText = this.stripProtocolRelativePrefix(anchorText);\n        }\n        if (this.stripPrefix.scheme) {\n            anchorText = this.stripSchemePrefix(anchorText);\n        }\n        if (this.stripPrefix.www) {\n            anchorText = this.stripWwwPrefix(anchorText);\n        }\n        if (this.stripTrailingSlash) {\n            anchorText = this.removeTrailingSlash(anchorText); // remove trailing slash, if there is one\n        }\n        if (this.decodePercentEncoding) {\n            anchorText = this.removePercentEncoding(anchorText);\n        }\n        return anchorText;\n    };\n    // ---------------------------------------\n    // Utility Functionality\n    /**\n     * Strips the scheme prefix (such as \"http://\" or \"https://\") from the given\n     * `url`.\n     *\n     * @private\n     * @param {String} url The text of the anchor that is being generated, for\n     *   which to strip off the url scheme.\n     * @return {String} The `url`, with the scheme stripped.\n     */\n    UrlMatch.prototype.stripSchemePrefix = function (url) {\n        return url.replace(this.schemePrefixRegex, '');\n    };\n    /**\n     * Strips the 'www' prefix from the given `url`.\n     *\n     * @private\n     * @param {String} url The text of the anchor that is being generated, for\n     *   which to strip off the 'www' if it exists.\n     * @return {String} The `url`, with the 'www' stripped.\n     */\n    UrlMatch.prototype.stripWwwPrefix = function (url) {\n        return url.replace(this.wwwPrefixRegex, '$1'); // leave any scheme ($1), it one exists\n    };\n    /**\n     * Strips any protocol-relative '//' from the anchor text.\n     *\n     * @private\n     * @param {String} text The text of the anchor that is being generated, for which to strip off the\n     *   protocol-relative prefix (such as stripping off \"//\")\n     * @return {String} The `anchorText`, with the protocol-relative prefix stripped.\n     */\n    UrlMatch.prototype.stripProtocolRelativePrefix = function (text) {\n        return text.replace(this.protocolRelativeRegex, '');\n    };\n    /**\n     * Removes any trailing slash from the given `anchorText`, in preparation for the text to be displayed.\n     *\n     * @private\n     * @param {String} anchorText The text of the anchor that is being generated, for which to remove any trailing\n     *   slash ('/') that may exist.\n     * @return {String} The `anchorText`, with the trailing slash removed.\n     */\n    UrlMatch.prototype.removeTrailingSlash = function (anchorText) {\n        if (anchorText.charAt(anchorText.length - 1) === '/') {\n            anchorText = anchorText.slice(0, -1);\n        }\n        return anchorText;\n    };\n    /**\n     * Decodes percent-encoded characters from the given `anchorText`, in\n     * preparation for the text to be displayed.\n     *\n     * @private\n     * @param {String} anchorText The text of the anchor that is being\n     *   generated, for which to decode any percent-encoded characters.\n     * @return {String} The `anchorText`, with the percent-encoded characters\n     *   decoded.\n     */\n    UrlMatch.prototype.removePercentEncoding = function (anchorText) {\n        // First, convert a few of the known % encodings to the corresponding\n        // HTML entities that could accidentally be interpretted as special\n        // HTML characters\n        var preProcessedEntityAnchorText = anchorText\n            .replace(/%22/gi, '&quot;') // \" char\n            .replace(/%26/gi, '&amp;') // & char\n            .replace(/%27/gi, '&#39;') // ' char\n            .replace(/%3C/gi, '&lt;') // < char\n            .replace(/%3E/gi, '&gt;'); // > char\n        try {\n            // Now attempt to decode the rest of the anchor text\n            return decodeURIComponent(preProcessedEntityAnchorText);\n        }\n        catch (e) { // Invalid % escape sequence in the anchor text\n            return preProcessedEntityAnchorText;\n        }\n    };\n    return UrlMatch;\n}(Match));\nexport { UrlMatch };\n\n//# sourceMappingURL=url-match.js.map\n","/**\n * @abstract\n * @class Autolinker.matcher.Matcher\n *\n * An abstract class and interface for individual matchers to find matches in\n * an input string with linkified versions of them.\n *\n * Note that Matchers do not take HTML into account - they must be fed the text\n * nodes of any HTML string, which is handled by {@link Autolinker#parse}.\n */\nvar Matcher = /** @class */ (function () {\n    /**\n     * @method constructor\n     * @param {Object} cfg The configuration properties for the Matcher\n     *   instance, specified in an Object (map).\n     */\n    function Matcher(cfg) {\n        /**\n         * @cfg {Autolinker.AnchorTagBuilder} tagBuilder (required)\n         *\n         * Reference to the AnchorTagBuilder instance to use to generate HTML tags\n         * for {@link Autolinker.match.Match Matches}.\n         */\n        this.__jsduckDummyDocProp = null; // property used just to get the above doc comment into the ES5 output and documentation generator\n        this.tagBuilder = cfg.tagBuilder;\n    }\n    return Matcher;\n}());\nexport { Matcher };\n\n//# sourceMappingURL=matcher.js.map\n","/*\n * This file builds and stores a library of the common regular expressions used\n * by the Autolinker utility.\n *\n * Other regular expressions may exist ad-hoc, but these are generally the\n * regular expressions that are shared between source files.\n */\n/**\n * Regular expression to match upper and lowercase ASCII letters\n */\nexport var letterRe = /[A-Za-z]/;\n/**\n * Regular expression to match ASCII digits\n */\nexport var digitRe = /[\\d]/;\n/**\n * Regular expression to match everything *except* ASCII digits\n */\nexport var nonDigitRe = /[\\D]/;\n/**\n * Regular expression to match whitespace\n */\nexport var whitespaceRe = /\\s/;\n/**\n * Regular expression to match quote characters\n */\nexport var quoteRe = /['\"]/;\n/**\n * Regular expression to match the range of ASCII control characters (0-31), and\n * the backspace char (127)\n */\nexport var controlCharsRe = /[\\x00-\\x1F\\x7F]/;\n/**\n * The string form of a regular expression that would match all of the\n * alphabetic (\"letter\") chars in the unicode character set when placed in a\n * RegExp character class (`[]`). This includes all international alphabetic\n * characters.\n *\n * These would be the characters matched by unicode regex engines `\\p{L}`\n * escape (\"all letters\").\n *\n * Taken from the XRegExp library: http://xregexp.com/ (thanks @https://github.com/slevithan)\n * Specifically: http://xregexp.com/v/3.2.0/xregexp-all.js, the 'Letter'\n *   regex's bmp\n *\n * VERY IMPORTANT: This set of characters is defined inside of a Regular\n *   Expression literal rather than a string literal to prevent UglifyJS from\n *   compressing the unicode escape sequences into their actual unicode\n *   characters. If Uglify compresses these into the unicode characters\n *   themselves, this results in the error \"Range out of order in character\n *   class\" when these characters are used inside of a Regular Expression\n *   character class (`[]`). See usages of this const. Alternatively, we can set\n *   the UglifyJS option `ascii_only` to true for the build, but that doesn't\n *   help others who are pulling in Autolinker into their own build and running\n *   UglifyJS themselves.\n */\nexport var alphaCharsStr = /A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B4\\u08B6-\\u08BD\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1C80-\\u1C88\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AE\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC/\n    .source; // see note in above variable description\n/**\n * The string form of a regular expression that would match all emoji characters\n * Based on the emoji regex defined in this article: https://thekevinscott.com/emojis-in-javascript/\n */\nexport var emojiStr = /\\u2700-\\u27bf\\udde6-\\uddff\\ud800-\\udbff\\udc00-\\udfff\\ufe0e\\ufe0f\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ud83c\\udffb-\\udfff\\u200d\\u3299\\u3297\\u303d\\u3030\\u24c2\\ud83c\\udd70-\\udd71\\udd7e-\\udd7f\\udd8e\\udd91-\\udd9a\\udde6-\\uddff\\ude01-\\ude02\\ude1a\\ude2f\\ude32-\\ude3a\\ude50-\\ude51\\u203c\\u2049\\u25aa-\\u25ab\\u25b6\\u25c0\\u25fb-\\u25fe\\u00a9\\u00ae\\u2122\\u2139\\udc04\\u2600-\\u26FF\\u2b05\\u2b06\\u2b07\\u2b1b\\u2b1c\\u2b50\\u2b55\\u231a\\u231b\\u2328\\u23cf\\u23e9-\\u23f3\\u23f8-\\u23fa\\udccf\\u2935\\u2934\\u2190-\\u21ff/\n    .source;\n/**\n * The string form of a regular expression that would match all of the\n * combining mark characters in the unicode character set when placed in a\n * RegExp character class (`[]`).\n *\n * These would be the characters matched by unicode regex engines `\\p{M}`\n * escape (\"all marks\").\n *\n * Taken from the XRegExp library: http://xregexp.com/ (thanks @https://github.com/slevithan)\n * Specifically: http://xregexp.com/v/3.2.0/xregexp-all.js, the 'Mark'\n *   regex's bmp\n *\n * VERY IMPORTANT: This set of characters is defined inside of a Regular\n *   Expression literal rather than a string literal to prevent UglifyJS from\n *   compressing the unicode escape sequences into their actual unicode\n *   characters. If Uglify compresses these into the unicode characters\n *   themselves, this results in the error \"Range out of order in character\n *   class\" when these characters are used inside of a Regular Expression\n *   character class (`[]`). See usages of this const. Alternatively, we can set\n *   the UglifyJS option `ascii_only` to true for the build, but that doesn't\n *   help others who are pulling in Autolinker into their own build and running\n *   UglifyJS themselves.\n */\nexport var marksStr = /\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D4-\\u08E1\\u08E3-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFB-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C5\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F/\n    .source; // see note in above variable description\n/**\n * The string form of a regular expression that would match all of the\n * alphabetic (\"letter\") chars, emoji, and combining marks in the unicode character set\n * when placed in a RegExp character class (`[]`). This includes all\n * international alphabetic characters.\n *\n * These would be the characters matched by unicode regex engines `\\p{L}\\p{M}`\n * escapes and emoji characters.\n */\nexport var alphaCharsAndMarksStr = alphaCharsStr + emojiStr + marksStr;\n/**\n * The string form of a regular expression that would match all of the\n * decimal number chars in the unicode character set when placed in a RegExp\n * character class (`[]`).\n *\n * These would be the characters matched by unicode regex engines `\\p{Nd}`\n * escape (\"all decimal numbers\")\n *\n * Taken from the XRegExp library: http://xregexp.com/ (thanks @https://github.com/slevithan)\n * Specifically: http://xregexp.com/v/3.2.0/xregexp-all.js, the 'Decimal_Number'\n *   regex's bmp\n *\n * VERY IMPORTANT: This set of characters is defined inside of a Regular\n *   Expression literal rather than a string literal to prevent UglifyJS from\n *   compressing the unicode escape sequences into their actual unicode\n *   characters. If Uglify compresses these into the unicode characters\n *   themselves, this results in the error \"Range out of order in character\n *   class\" when these characters are used inside of a Regular Expression\n *   character class (`[]`). See usages of this const. Alternatively, we can set\n *   the UglifyJS option `ascii_only` to true for the build, but that doesn't\n *   help others who are pulling in Autolinker into their own build and running\n *   UglifyJS themselves.\n */\nexport var decimalNumbersStr = /0-9\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0BE6-\\u0BEF\\u0C66-\\u0C6F\\u0CE6-\\u0CEF\\u0D66-\\u0D6F\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F29\\u1040-\\u1049\\u1090-\\u1099\\u17E0-\\u17E9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19D9\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\uA620-\\uA629\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19/\n    .source; // see note in above variable description\n/**\n * The string form of a regular expression that would match all of the\n * letters and decimal number chars in the unicode character set when placed in\n * a RegExp character class (`[]`).\n *\n * These would be the characters matched by unicode regex engines\n * `[\\p{L}\\p{Nd}]` escape (\"all letters and decimal numbers\")\n */\nexport var alphaNumericCharsStr = alphaCharsAndMarksStr + decimalNumbersStr;\n/**\n * The string form of a regular expression that would match all of the\n * letters, combining marks, and decimal number chars in the unicode character\n * set when placed in a RegExp character class (`[]`).\n *\n * These would be the characters matched by unicode regex engines\n * `[\\p{L}\\p{M}\\p{Nd}]` escape (\"all letters, combining marks, and decimal\n * numbers\")\n */\nexport var alphaNumericAndMarksCharsStr = alphaCharsAndMarksStr + decimalNumbersStr;\n// Simplified IP regular expression\nvar ipStr = '(?:[' + decimalNumbersStr + ']{1,3}\\\\.){3}[' + decimalNumbersStr + ']{1,3}';\n// Protected domain label which do not allow \"-\" character on the beginning and the end of a single label\nvar domainLabelStr = '[' + alphaNumericAndMarksCharsStr + '](?:[' + alphaNumericAndMarksCharsStr + '\\\\-]{0,61}[' + alphaNumericAndMarksCharsStr + '])?';\nvar getDomainLabelStr = function (group) {\n    return '(?=(' + domainLabelStr + '))\\\\' + group;\n};\n/**\n * A function to match domain names of a URL or email address.\n * Ex: 'google', 'yahoo', 'some-other-company', etc.\n */\nexport var getDomainNameStr = function (group) {\n    return '(?:' + getDomainLabelStr(group) + '(?:\\\\.' + getDomainLabelStr(group + 1) + '){0,126}|' + ipStr + ')';\n};\n/**\n * A regular expression to match domain names of a URL or email address.\n * Ex: 'google', 'yahoo', 'some-other-company', etc.\n */\nexport var domainNameRegex = new RegExp('[' + alphaNumericAndMarksCharsStr + '.\\\\-]*[' + alphaNumericAndMarksCharsStr + '\\\\-]');\n/**\n * A regular expression that is simply the character class of the characters\n * that may be used in a domain name, minus the '-' or '.'\n */\nexport var domainNameCharRegex = new RegExp(\"[\".concat(alphaNumericAndMarksCharsStr, \"]\"));\n\n//# sourceMappingURL=regex-lib.js.map\n","// NOTE: THIS IS A GENERATED FILE\n// To update with the latest TLD list, run `npm run update-tld-regex` or `yarn update-tld-regex` (depending on which you have installed)\nexport var tldRegex = /(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermgensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbah1a3hjkrd|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermgensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--mgbcpq6gpa1a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbaakc7dvf|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq480n2rg|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|travelchannel|wolterskluwer|xn--cckwcxetd|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--4dbrk0ce|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b||accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nextdirect|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|university|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--q7ce6a|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|institute|insurance|kuokgroup|lancaster|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--qxa6a|xn--tckwe|xn--vhquv|yodobashi||abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|etisalat|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|merckmsd|mortgage|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|training|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama||abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|channel|charity|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lanxess|lasalle|latrobe|leclerc|limited|lincoln|markets|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|singles|staples|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|||||||||abarth|abbott|abbvie|africa|agency|airbus|airtel|alipay|alsace|alstom|amazon|anquan|aramco|author|bayern|beauty|berlin|bharti|bostik|boston|broker|camera|career|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|webcam|xihuan|yachts|yandex|zappos|||||||||||||actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|drive|dubai|earth|edeka|email|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|irish|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|macys|mango|media|miami|money|movie|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo||||||||||||||aarp|able|adac|aero|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|duck|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|||||||||||||||||||||||||||aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceo|cfa|cfd|com|cpa|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gay|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|llp|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|spa|srl|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip||||||||||||||||||||||||||||||||ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||)/;\n\n//# sourceMappingURL=tld-regex.js.map\n","import { __assign, __extends } from \"tslib\";\nimport { Matcher } from \"./matcher\";\nimport { alphaNumericAndMarksCharsStr, domainNameCharRegex } from \"../regex-lib\";\nimport { EmailMatch } from \"../match/email-match\";\nimport { throwUnhandledCaseError } from '../utils';\nimport { tldRegex } from \"./tld-regex\";\n// For debugging: search for other \"For debugging\" lines\n// import CliTable from 'cli-table';\n// RegExp objects which are shared by all instances of EmailMatcher. These are\n// here to avoid re-instantiating the RegExp objects if `Autolinker.link()` is\n// called multiple times, thus instantiating EmailMatcher and its RegExp \n// objects each time (which is very expensive - see https://github.com/gregjacobs/Autolinker.js/issues/314). \n// See descriptions of the properties where they are used for details about them\nvar localPartCharRegex = new RegExp(\"[\".concat(alphaNumericAndMarksCharsStr, \"!#$%&'*+/=?^_`{|}~-]\"));\nvar strictTldRegex = new RegExp(\"^\".concat(tldRegex.source, \"$\"));\n/**\n * @class Autolinker.matcher.Email\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find email matches in an input string.\n *\n * See this class's superclass ({@link Autolinker.matcher.Matcher}) for more details.\n */\nvar EmailMatcher = /** @class */ (function (_super) {\n    __extends(EmailMatcher, _super);\n    function EmailMatcher() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * Valid characters that can be used in the \"local\" part of an email address,\n         * i.e. the \"name\" part of \"name@site.com\"\n         */\n        _this.localPartCharRegex = localPartCharRegex;\n        /**\n         * Stricter TLD regex which adds a beginning and end check to ensure\n         * the string is a valid TLD\n         */\n        _this.strictTldRegex = strictTldRegex;\n        return _this;\n    }\n    /**\n     * @inheritdoc\n     */\n    EmailMatcher.prototype.parseMatches = function (text) {\n        var tagBuilder = this.tagBuilder, localPartCharRegex = this.localPartCharRegex, strictTldRegex = this.strictTldRegex, matches = [], len = text.length, noCurrentEmailMatch = new CurrentEmailMatch();\n        // for matching a 'mailto:' prefix\n        var mailtoTransitions = {\n            'm': 'a',\n            'a': 'i',\n            'i': 'l',\n            'l': 't',\n            't': 'o',\n            'o': ':',\n        };\n        var charIdx = 0, state = 0 /* NonEmailMatch */, currentEmailMatch = noCurrentEmailMatch;\n        // For debugging: search for other \"For debugging\" lines\n        // const table = new CliTable( {\n        // \thead: [ 'charIdx', 'char', 'state', 'charIdx', 'currentEmailAddress.idx', 'hasDomainDot' ]\n        // } );\n        while (charIdx < len) {\n            var char = text.charAt(charIdx);\n            // For debugging: search for other \"For debugging\" lines\n            // table.push( \n            // \t[ charIdx, char, State[ state ], charIdx, currentEmailAddress.idx, currentEmailAddress.hasDomainDot ] \n            // );\n            switch (state) {\n                case 0 /* NonEmailMatch */:\n                    stateNonEmailAddress(char);\n                    break;\n                case 1 /* Mailto */:\n                    stateMailTo(text.charAt(charIdx - 1), char);\n                    break;\n                case 2 /* LocalPart */:\n                    stateLocalPart(char);\n                    break;\n                case 3 /* LocalPartDot */:\n                    stateLocalPartDot(char);\n                    break;\n                case 4 /* AtSign */:\n                    stateAtSign(char);\n                    break;\n                case 5 /* DomainChar */:\n                    stateDomainChar(char);\n                    break;\n                case 6 /* DomainHyphen */:\n                    stateDomainHyphen(char);\n                    break;\n                case 7 /* DomainDot */:\n                    stateDomainDot(char);\n                    break;\n                default:\n                    throwUnhandledCaseError(state);\n            }\n            // For debugging: search for other \"For debugging\" lines\n            // table.push( \n            // \t[ charIdx, char, State[ state ], charIdx, currentEmailAddress.idx, currentEmailAddress.hasDomainDot ] \n            // );\n            charIdx++;\n        }\n        // Capture any valid match at the end of the string\n        captureMatchIfValidAndReset();\n        // For debugging: search for other \"For debugging\" lines\n        //console.log( '\\n' + table.toString() );\n        return matches;\n        // Handles the state when we're not in an email address\n        function stateNonEmailAddress(char) {\n            if (char === 'm') {\n                beginEmailMatch(1 /* Mailto */);\n            }\n            else if (localPartCharRegex.test(char)) {\n                beginEmailMatch();\n            }\n            else {\n                // not an email address character, continue\n            }\n        }\n        // Handles if we're reading a 'mailto:' prefix on the string\n        function stateMailTo(prevChar, char) {\n            if (prevChar === ':') {\n                // We've reached the end of the 'mailto:' prefix\n                if (localPartCharRegex.test(char)) {\n                    state = 2 /* LocalPart */;\n                    currentEmailMatch = new CurrentEmailMatch(__assign(__assign({}, currentEmailMatch), { hasMailtoPrefix: true }));\n                }\n                else {\n                    // we've matched 'mailto:' but didn't get anything meaningful\n                    // immediately afterwards (for example, we encountered a \n                    // space character, or an '@' character which formed 'mailto:@'\n                    resetToNonEmailMatchState();\n                }\n            }\n            else if (mailtoTransitions[prevChar] === char) {\n                // We're currently reading the 'mailto:' prefix, stay in\n                // Mailto state\n            }\n            else if (localPartCharRegex.test(char)) {\n                // We we're reading a prefix of 'mailto:', but encountered a\n                // different character that didn't continue the prefix\n                state = 2 /* LocalPart */;\n            }\n            else if (char === '.') {\n                // We we're reading a prefix of 'mailto:', but encountered a\n                // dot character\n                state = 3 /* LocalPartDot */;\n            }\n            else if (char === '@') {\n                // We we're reading a prefix of 'mailto:', but encountered a\n                // an @ character\n                state = 4 /* AtSign */;\n            }\n            else {\n                // not an email address character, return to \"NonEmailAddress\" state\n                resetToNonEmailMatchState();\n            }\n        }\n        // Handles the state when we're currently in the \"local part\" of an \n        // email address (as opposed to the \"domain part\")\n        function stateLocalPart(char) {\n            if (char === '.') {\n                state = 3 /* LocalPartDot */;\n            }\n            else if (char === '@') {\n                state = 4 /* AtSign */;\n            }\n            else if (localPartCharRegex.test(char)) {\n                // stay in the \"local part\" of the email address\n            }\n            else {\n                // not an email address character, return to \"NonEmailAddress\" state\n                resetToNonEmailMatchState();\n            }\n        }\n        // Handles the state where we've read \n        function stateLocalPartDot(char) {\n            if (char === '.') {\n                // We read a second '.' in a row, not a valid email address \n                // local part\n                resetToNonEmailMatchState();\n            }\n            else if (char === '@') {\n                // We read the '@' character immediately after a dot ('.'), not \n                // an email address\n                resetToNonEmailMatchState();\n            }\n            else if (localPartCharRegex.test(char)) {\n                state = 2 /* LocalPart */;\n            }\n            else {\n                // Anything else, not an email address\n                resetToNonEmailMatchState();\n            }\n        }\n        function stateAtSign(char) {\n            if (domainNameCharRegex.test(char)) {\n                state = 5 /* DomainChar */;\n            }\n            else {\n                // Anything else, not an email address\n                resetToNonEmailMatchState();\n            }\n        }\n        function stateDomainChar(char) {\n            if (char === '.') {\n                state = 7 /* DomainDot */;\n            }\n            else if (char === '-') {\n                state = 6 /* DomainHyphen */;\n            }\n            else if (domainNameCharRegex.test(char)) {\n                // Stay in the DomainChar state\n            }\n            else {\n                // Anything else, we potentially matched if the criteria has\n                // been met\n                captureMatchIfValidAndReset();\n            }\n        }\n        function stateDomainHyphen(char) {\n            if (char === '-' || char === '.') {\n                // Not valid to have two hyphens (\"--\") or hypen+dot (\"-.\")\n                captureMatchIfValidAndReset();\n            }\n            else if (domainNameCharRegex.test(char)) {\n                state = 5 /* DomainChar */;\n            }\n            else {\n                // Anything else\n                captureMatchIfValidAndReset();\n            }\n        }\n        function stateDomainDot(char) {\n            if (char === '.' || char === '-') {\n                // not valid to have two dots (\"..\") or dot+hypen (\".-\")\n                captureMatchIfValidAndReset();\n            }\n            else if (domainNameCharRegex.test(char)) {\n                state = 5 /* DomainChar */;\n                // After having read a '.' and then a valid domain character,\n                // we now know that the domain part of the email is valid, and\n                // we have found at least a partial EmailMatch (however, the\n                // email address may have additional characters from this point)\n                currentEmailMatch = new CurrentEmailMatch(__assign(__assign({}, currentEmailMatch), { hasDomainDot: true }));\n            }\n            else {\n                // Anything else\n                captureMatchIfValidAndReset();\n            }\n        }\n        function beginEmailMatch(newState) {\n            if (newState === void 0) { newState = 2 /* LocalPart */; }\n            state = newState;\n            currentEmailMatch = new CurrentEmailMatch({ idx: charIdx });\n        }\n        function resetToNonEmailMatchState() {\n            state = 0 /* NonEmailMatch */;\n            currentEmailMatch = noCurrentEmailMatch;\n        }\n        /*\n         * Captures the current email address as an EmailMatch if it's valid,\n         * and resets the state to read another email address.\n         */\n        function captureMatchIfValidAndReset() {\n            if (currentEmailMatch.hasDomainDot) { // we need at least one dot in the domain to be considered a valid email address\n                var matchedText = text.slice(currentEmailMatch.idx, charIdx);\n                // If we read a '.' or '-' char that ended the email address\n                // (valid domain name characters, but only valid email address\n                // characters if they are followed by something else), strip \n                // it off now\n                if (/[-.]$/.test(matchedText)) {\n                    matchedText = matchedText.slice(0, -1);\n                }\n                var emailAddress = currentEmailMatch.hasMailtoPrefix\n                    ? matchedText.slice('mailto:'.length)\n                    : matchedText;\n                // if the email address has a valid TLD, add it to the list of matches\n                if (doesEmailHaveValidTld(emailAddress)) {\n                    matches.push(new EmailMatch({\n                        tagBuilder: tagBuilder,\n                        matchedText: matchedText,\n                        offset: currentEmailMatch.idx,\n                        email: emailAddress\n                    }));\n                }\n            }\n            resetToNonEmailMatchState();\n            /**\n             * Determines if the given email address has a valid TLD or not\n             * @param {string} emailAddress - email address\n             * @return {Boolean} - true is email have valid TLD, false otherwise\n             */\n            function doesEmailHaveValidTld(emailAddress) {\n                var emailAddressTld = emailAddress.split('.').pop() || '';\n                var emailAddressNormalized = emailAddressTld.toLowerCase();\n                var isValidTld = strictTldRegex.test(emailAddressNormalized);\n                return isValidTld;\n            }\n        }\n    };\n    return EmailMatcher;\n}(Matcher));\nexport { EmailMatcher };\nvar CurrentEmailMatch = /** @class */ (function () {\n    function CurrentEmailMatch(cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        this.idx = cfg.idx !== undefined ? cfg.idx : -1;\n        this.hasMailtoPrefix = !!cfg.hasMailtoPrefix;\n        this.hasDomainDot = !!cfg.hasDomainDot;\n    }\n    return CurrentEmailMatch;\n}());\n\n//# sourceMappingURL=email-matcher.js.map\n","import { alphaCharsStr } from \"../regex-lib\";\n/**\n * @private\n * @class Autolinker.matcher.UrlMatchValidator\n * @singleton\n *\n * Used by Autolinker to filter out false URL positives from the\n * {@link Autolinker.matcher.Url UrlMatcher}.\n *\n * Due to the limitations of regular expressions (including the missing feature\n * of look-behinds in JS regular expressions), we cannot always determine the\n * validity of a given match. This class applies a bit of additional logic to\n * filter out any false positives that have been matched by the\n * {@link Autolinker.matcher.Url UrlMatcher}.\n */\nvar UrlMatchValidator = /** @class */ (function () {\n    function UrlMatchValidator() {\n    }\n    /**\n     * Determines if a given URL match found by the {@link Autolinker.matcher.Url UrlMatcher}\n     * is valid. Will return `false` for:\n     *\n     * 1) URL matches which do not have at least have one period ('.') in the\n     *    domain name (effectively skipping over matches like \"abc:def\").\n     *    However, URL matches with a protocol will be allowed (ex: 'http://localhost')\n     * 2) URL matches which do not have at least one word character in the\n     *    domain name (effectively skipping over matches like \"git:1.0\").\n     *    However, URL matches with a protocol will be allowed (ex: 'intra-net://271219.76')\n     * 3) A protocol-relative url match (a URL beginning with '//') whose\n     *    previous character is a word character (effectively skipping over\n     *    strings like \"abc//google.com\")\n     *\n     * Otherwise, returns `true`.\n     *\n     * @param {String} urlMatch The matched URL, if there was one. Will be an\n     *   empty string if the match is not a URL match.\n     * @param {String} protocolUrlMatch The match URL string for a protocol\n     *   match. Ex: 'http://yahoo.com'. This is used to match something like\n     *   'http://localhost', where we won't double check that the domain name\n     *   has at least one '.' in it.\n     * @return {Boolean} `true` if the match given is valid and should be\n     *   processed, or `false` if the match is invalid and/or should just not be\n     *   processed.\n     */\n    UrlMatchValidator.isValid = function (urlMatch, protocolUrlMatch) {\n        if ((protocolUrlMatch && !this.isValidUriScheme(protocolUrlMatch)) ||\n            this.urlMatchDoesNotHaveProtocolOrDot(urlMatch, protocolUrlMatch) || // At least one period ('.') must exist in the URL match for us to consider it an actual URL, *unless* it was a full protocol match (like 'http://localhost')\n            (this.urlMatchDoesNotHaveAtLeastOneWordChar(urlMatch, protocolUrlMatch) && // At least one letter character must exist in the domain name after a protocol match. Ex: skip over something like \"git:1.0\"\n                !this.isValidIpAddress(urlMatch)) || // Except if it's an IP address\n            this.containsMultipleDots(urlMatch)) {\n            return false;\n        }\n        return true;\n    };\n    UrlMatchValidator.isValidIpAddress = function (uriSchemeMatch) {\n        var newRegex = new RegExp(this.hasFullProtocolRegex.source + this.ipRegex.source);\n        var uriScheme = uriSchemeMatch.match(newRegex);\n        return uriScheme !== null;\n    };\n    UrlMatchValidator.containsMultipleDots = function (urlMatch) {\n        var stringBeforeSlash = urlMatch;\n        if (this.hasFullProtocolRegex.test(urlMatch)) {\n            stringBeforeSlash = urlMatch.split('://')[1];\n        }\n        return stringBeforeSlash.split('/')[0].indexOf(\"..\") > -1;\n    };\n    /**\n     * Determines if the URI scheme is a valid scheme to be autolinked. Returns\n     * `false` if the scheme is 'javascript:' or 'vbscript:'\n     *\n     * @private\n     * @param {String} uriSchemeMatch The match URL string for a full URI scheme\n     *   match. Ex: 'http://yahoo.com' or 'mailto:a@a.com'.\n     * @return {Boolean} `true` if the scheme is a valid one, `false` otherwise.\n     */\n    UrlMatchValidator.isValidUriScheme = function (uriSchemeMatch) {\n        var uriSchemeMatchArr = uriSchemeMatch.match(this.uriSchemeRegex), uriScheme = uriSchemeMatchArr && uriSchemeMatchArr[0].toLowerCase();\n        return (uriScheme !== 'javascript:' && uriScheme !== 'vbscript:');\n    };\n    /**\n     * Determines if a URL match does not have either:\n     *\n     * a) a full protocol (i.e. 'http://'), or\n     * b) at least one dot ('.') in the domain name (for a non-full-protocol\n     *    match).\n     *\n     * Either situation is considered an invalid URL (ex: 'git:d' does not have\n     * either the '://' part, or at least one dot in the domain name. If the\n     * match was 'git:abc.com', we would consider this valid.)\n     *\n     * @private\n     * @param {String} urlMatch The matched URL, if there was one. Will be an\n     *   empty string if the match is not a URL match.\n     * @param {String} protocolUrlMatch The match URL string for a protocol\n     *   match. Ex: 'http://yahoo.com'. This is used to match something like\n     *   'http://localhost', where we won't double check that the domain name\n     *   has at least one '.' in it.\n     * @return {Boolean} `true` if the URL match does not have a full protocol,\n     *   or at least one dot ('.') in a non-full-protocol match.\n     */\n    UrlMatchValidator.urlMatchDoesNotHaveProtocolOrDot = function (urlMatch, protocolUrlMatch) {\n        return (!!urlMatch && (!protocolUrlMatch || !this.hasFullProtocolRegex.test(protocolUrlMatch)) && urlMatch.indexOf('.') === -1);\n    };\n    /**\n     * Determines if a URL match does not have either:\n     *\n     * a) a full protocol (i.e. 'http://'), or\n     * b) at least one word character after the protocol (i.e. in the domain name)\n     *\n     * At least one letter character must exist in the domain name after a\n     * protocol match. Ex: skip over something like \"git:1.0\"\n     *\n     * @private\n     * @param {String} urlMatch The matched URL, if there was one. Will be an\n     *   empty string if the match is not a URL match.\n     * @param {String} protocolUrlMatch The match URL string for a protocol\n     *   match. Ex: 'http://yahoo.com'. This is used to know whether or not we\n     *   have a protocol in the URL string, in order to check for a word\n     *   character after the protocol separator (':').\n     * @return {Boolean} `true` if the URL match does not have a full protocol, or\n     * at least one word character in it, `false` otherwise.\n     */\n    UrlMatchValidator.urlMatchDoesNotHaveAtLeastOneWordChar = function (urlMatch, protocolUrlMatch) {\n        if (urlMatch && protocolUrlMatch) {\n            return !this.hasFullProtocolRegex.test(protocolUrlMatch) && !this.hasWordCharAfterProtocolRegex.test(urlMatch);\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * Regex to test for a full protocol, with the two trailing slashes. Ex: 'http://'\n     *\n     * @private\n     * @property {RegExp} hasFullProtocolRegex\n     */\n    UrlMatchValidator.hasFullProtocolRegex = /^[A-Za-z][-.+A-Za-z0-9]*:\\/\\//;\n    /**\n     * Regex to find the URI scheme, such as 'mailto:'.\n     *\n     * This is used to filter out 'javascript:' and 'vbscript:' schemes.\n     *\n     * @private\n     * @property {RegExp} uriSchemeRegex\n     */\n    UrlMatchValidator.uriSchemeRegex = /^[A-Za-z][-.+A-Za-z0-9]*:/;\n    /**\n     * Regex to determine if at least one word char exists after the protocol (i.e. after the ':')\n     *\n     * @private\n     * @property {RegExp} hasWordCharAfterProtocolRegex\n     */\n    UrlMatchValidator.hasWordCharAfterProtocolRegex = new RegExp(\":[^\\\\s]*?[\" + alphaCharsStr + \"]\");\n    /**\n     * Regex to determine if the string is a valid IP address\n     *\n     * @private\n     * @property {RegExp} ipRegex\n     */\n    UrlMatchValidator.ipRegex = /[0-9][0-9]?[0-9]?\\.[0-9][0-9]?[0-9]?\\.[0-9][0-9]?[0-9]?\\.[0-9][0-9]?[0-9]?(:[0-9]*)?\\/?$/;\n    return UrlMatchValidator;\n}());\nexport { UrlMatchValidator };\n\n//# sourceMappingURL=url-match-validator.js.map\n","import { __extends } from \"tslib\";\nimport { Matcher } from \"./matcher\";\nimport { alphaNumericAndMarksCharsStr } from \"../regex-lib\";\nimport { HashtagMatch } from \"../match/hashtag-match\";\n// RegExp objects which are shared by all instances of HashtagMatcher. These are\n// here to avoid re-instantiating the RegExp objects if `Autolinker.link()` is\n// called multiple times, thus instantiating HashtagMatcher and its RegExp \n// objects each time (which is very expensive - see https://github.com/gregjacobs/Autolinker.js/issues/314). \n// See descriptions of the properties where they are used for details about them\nvar matcherRegex = new RegExp(\"#[_\".concat(alphaNumericAndMarksCharsStr, \"]{1,139}(?![_\").concat(alphaNumericAndMarksCharsStr, \"])\"), 'g'); // lookahead used to make sure we don't match something above 139 characters\nvar nonWordCharRegex = new RegExp('[^' + alphaNumericAndMarksCharsStr + ']');\n/**\n * @class Autolinker.matcher.Hashtag\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find HashtagMatch matches in an input string.\n */\nvar HashtagMatcher = /** @class */ (function (_super) {\n    __extends(HashtagMatcher, _super);\n    /**\n     * @method constructor\n     * @param {Object} cfg The configuration properties for the Match instance,\n     *   specified in an Object (map).\n     */\n    function HashtagMatcher(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        /**\n         * @cfg {String} serviceName\n         *\n         * The service to point hashtag matches to. See {@link Autolinker#hashtag}\n         * for available values.\n         */\n        _this.serviceName = 'twitter'; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * The regular expression to match Hashtags. Example match:\n         *\n         *     #asdf\n         *\n         * @protected\n         * @property {RegExp} matcherRegex\n         */\n        _this.matcherRegex = matcherRegex;\n        /**\n         * The regular expression to use to check the character before a username match to\n         * make sure we didn't accidentally match an email address.\n         *\n         * For example, the string \"asdf@asdf.com\" should not match \"@asdf\" as a username.\n         *\n         * @protected\n         * @property {RegExp} nonWordCharRegex\n         */\n        _this.nonWordCharRegex = nonWordCharRegex;\n        _this.serviceName = cfg.serviceName;\n        return _this;\n    }\n    /**\n     * @inheritdoc\n     */\n    HashtagMatcher.prototype.parseMatches = function (text) {\n        var matcherRegex = this.matcherRegex, nonWordCharRegex = this.nonWordCharRegex, serviceName = this.serviceName, tagBuilder = this.tagBuilder, matches = [], match;\n        while ((match = matcherRegex.exec(text)) !== null) {\n            var offset = match.index, prevChar = text.charAt(offset - 1);\n            // If we found the match at the beginning of the string, or we found the match\n            // and there is a whitespace char in front of it (meaning it is not a '#' char\n            // in the middle of a word), then it is a hashtag match.\n            if (offset === 0 || nonWordCharRegex.test(prevChar)) {\n                var matchedText = match[0], hashtag = match[0].slice(1); // strip off the '#' character at the beginning\n                matches.push(new HashtagMatch({\n                    tagBuilder: tagBuilder,\n                    matchedText: matchedText,\n                    offset: offset,\n                    serviceName: serviceName,\n                    hashtag: hashtag\n                }));\n            }\n        }\n        return matches;\n    };\n    return HashtagMatcher;\n}(Matcher));\nexport { HashtagMatcher };\n\n//# sourceMappingURL=hashtag-matcher.js.map\n","import { __extends } from \"tslib\";\nimport { Matcher } from \"./matcher\";\nimport { PhoneMatch } from \"../match/phone-match\";\nimport { nonDigitRe } from '../regex-lib';\n// RegExp objects which are shared by all instances of PhoneMatcher. These are\n// here to avoid re-instantiating the RegExp objects if `Autolinker.link()` is\n// called multiple times, thus instantiating PhoneMatcher and its RegExp\n// objects each time (which is very expensive - see https://github.com/gregjacobs/Autolinker.js/issues/314).\n// See descriptions of the properties where they are used for details about them\n// Over the years, many people have added to this regex, but it should have been\n// split up by country. Maybe one day we can break this down.\nvar mostPhoneNumbers = /(?:(?:(?:(\\+)?\\d{1,3}[-\\040.]?)?\\(?\\d{3}\\)?[-\\040.]?\\d{3}[-\\040.]?\\d{4})|(?:(\\+)(?:9[976]\\d|8[987530]\\d|6[987]\\d|5[90]\\d|42\\d|3[875]\\d|2[98654321]\\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-\\040.]?(?:\\d[-\\040.]?){6,12}\\d+))([,;]+[0-9]+#?)*/;\n// Regex for Japanese phone numbers\nvar japanesePhoneRe = /(0([1-9]{1}-?[1-9]\\d{3}|[1-9]{2}-?\\d{3}|[1-9]{2}\\d{1}-?\\d{2}|[1-9]{2}\\d{2}-?\\d{1})-?\\d{4}|0[789]0-?\\d{4}-?\\d{4}|050-?\\d{4}-?\\d{4})/;\n// Combined regex\nvar phoneMatcherRegex = new RegExp(\"\".concat(mostPhoneNumbers.source, \"|\").concat(japanesePhoneRe.source), 'g');\n/**\n * @class Autolinker.matcher.Phone\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find Phone number matches in an input string.\n *\n * See this class's superclass ({@link Autolinker.matcher.Matcher}) for more\n * details.\n */\nvar PhoneMatcher = /** @class */ (function (_super) {\n    __extends(PhoneMatcher, _super);\n    function PhoneMatcher() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * The regular expression to match Phone numbers. Example matches:\n         *\n         *     (123) 456-7890\n         *     123 456 7890\n         *     123-456-7890\n         *     +18004441234,,;,10226420346#\n         *     +1 (800) 444 1234\n         *     10226420346#\n         *     1-800-444-1234,1022,64,20346#\n         *\n         * This regular expression has the following capturing groups:\n         *\n         * 1 or 2. The prefixed '+' sign, if there is one.\n         *\n         * @protected\n         * @property {RegExp} matcherRegex\n         */\n        _this.matcherRegex = phoneMatcherRegex;\n        return _this;\n    }\n    /**\n     * @inheritdoc\n     */\n    PhoneMatcher.prototype.parseMatches = function (text) {\n        var matcherRegex = this.matcherRegex, tagBuilder = this.tagBuilder, matches = [], match;\n        while ((match = matcherRegex.exec(text)) !== null) {\n            // Remove non-numeric values from phone number string\n            var matchedText = match[0], cleanNumber = matchedText.replace(/[^0-9,;#]/g, ''), // strip out non-digit characters exclude comma semicolon and #\n            plusSign = !!(match[1] || match[2]), // match[ 1 ] or match[ 2 ] is the prefixed plus sign, if there is one\n            before = match.index == 0 ? '' : text.substr(match.index - 1, 1), after = text.substr(match.index + matchedText.length, 1), contextClear = !before.match(/\\d/) && !after.match(/\\d/);\n            if (this.testMatch(match[3]) && this.testMatch(matchedText) && contextClear) {\n                matches.push(new PhoneMatch({\n                    tagBuilder: tagBuilder,\n                    matchedText: matchedText,\n                    offset: match.index,\n                    number: cleanNumber,\n                    plusSign: plusSign\n                }));\n            }\n        }\n        return matches;\n    };\n    PhoneMatcher.prototype.testMatch = function (text) {\n        return nonDigitRe.test(text);\n    };\n    return PhoneMatcher;\n}(Matcher));\nexport { PhoneMatcher };\n\n//# sourceMappingURL=phone-matcher.js.map\n","import { __extends } from \"tslib\";\nimport { Matcher } from \"./matcher\";\nimport { alphaNumericAndMarksCharsStr } from \"../regex-lib\";\nimport { MentionMatch } from \"../match/mention-match\";\n// RegExp objects which are shared by all instances of MentionMatcher. These are\n// here to avoid re-instantiating the RegExp objects if `Autolinker.link()` is\n// called multiple times, thus instantiating MentionMatcher and its RegExp \n// objects each time (which is very expensive - see https://github.com/gregjacobs/Autolinker.js/issues/314). \n// See descriptions of the properties where they are used for details about them\nvar twitterRegex = new RegExp(\"@[_\".concat(alphaNumericAndMarksCharsStr, \"]{1,50}(?![_\").concat(alphaNumericAndMarksCharsStr, \"])\"), 'g'); // lookahead used to make sure we don't match something above 50 characters\nvar instagramRegex = new RegExp(\"@[_.\".concat(alphaNumericAndMarksCharsStr, \"]{1,30}(?![_\").concat(alphaNumericAndMarksCharsStr, \"])\"), 'g'); // lookahead used to make sure we don't match something above 30 characters\nvar soundcloudRegex = new RegExp(\"@[-_.\".concat(alphaNumericAndMarksCharsStr, \"]{1,50}(?![-_\").concat(alphaNumericAndMarksCharsStr, \"])\"), 'g'); // lookahead used to make sure we don't match something above 50 characters\n// TikTok usernames are 1-24 characters containing letters, numbers, underscores\n// and periods, but cannot end in a period: https://support.tiktok.com/en/getting-started/setting-up-your-profile/changing-your-username\nvar tiktokRegex = new RegExp(\"@[_.\".concat(alphaNumericAndMarksCharsStr, \"]{1,23}[_\").concat(alphaNumericAndMarksCharsStr, \"](?![_\").concat(alphaNumericAndMarksCharsStr, \"])\"), 'g'); // lookahead used to make sure we don't match something above 24 characters\nvar nonWordCharRegex = new RegExp('[^' + alphaNumericAndMarksCharsStr + ']');\n/**\n * @class Autolinker.matcher.Mention\n * @extends Autolinker.matcher.Matcher\n *\n * Matcher to find/replace username matches in an input string.\n */\nvar MentionMatcher = /** @class */ (function (_super) {\n    __extends(MentionMatcher, _super);\n    /**\n     * @method constructor\n     * @param {Object} cfg The configuration properties for the Match instance,\n     *   specified in an Object (map).\n     */\n    function MentionMatcher(cfg) {\n        var _this = _super.call(this, cfg) || this;\n        /**\n         * @cfg {'twitter'/'instagram'/'soundcloud'} protected\n         *\n         * The name of service to link @mentions to.\n         *\n         * Valid values are: 'twitter', 'instagram', 'soundcloud', or 'tiktok'\n         */\n        _this.serviceName = 'twitter'; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * Hash of regular expression to match username handles. Example match:\n         *\n         *     @asdf\n         *\n         * @private\n         * @property {Object} matcherRegexes\n         */\n        _this.matcherRegexes = {\n            'twitter': twitterRegex,\n            'instagram': instagramRegex,\n            'soundcloud': soundcloudRegex,\n            'tiktok': tiktokRegex\n        };\n        /**\n         * The regular expression to use to check the character before a username match to\n         * make sure we didn't accidentally match an email address.\n         *\n         * For example, the string \"asdf@asdf.com\" should not match \"@asdf\" as a username.\n         *\n         * @private\n         * @property {RegExp} nonWordCharRegex\n         */\n        _this.nonWordCharRegex = nonWordCharRegex;\n        _this.serviceName = cfg.serviceName;\n        return _this;\n    }\n    /**\n     * @inheritdoc\n     */\n    MentionMatcher.prototype.parseMatches = function (text) {\n        var serviceName = this.serviceName, matcherRegex = this.matcherRegexes[this.serviceName], nonWordCharRegex = this.nonWordCharRegex, tagBuilder = this.tagBuilder, matches = [], match;\n        if (!matcherRegex) {\n            return matches;\n        }\n        while ((match = matcherRegex.exec(text)) !== null) {\n            var offset = match.index, prevChar = text.charAt(offset - 1);\n            // If we found the match at the beginning of the string, or we found the match\n            // and there is a whitespace char in front of it (meaning it is not an email\n            // address), then it is a username match.\n            if (offset === 0 || nonWordCharRegex.test(prevChar)) {\n                var matchedText = match[0].replace(/\\.+$/g, ''), // strip off trailing .\n                mention = matchedText.slice(1); // strip off the '@' character at the beginning\n                matches.push(new MentionMatch({\n                    tagBuilder: tagBuilder,\n                    matchedText: matchedText,\n                    offset: offset,\n                    serviceName: serviceName,\n                    mention: mention\n                }));\n            }\n        }\n        return matches;\n    };\n    return MentionMatcher;\n}(Matcher));\nexport { MentionMatcher };\n\n//# sourceMappingURL=mention-matcher.js.map\n","import { __assign } from \"tslib\";\nimport { letterRe, digitRe, whitespaceRe, quoteRe, controlCharsRe } from '../regex-lib';\nimport { throwUnhandledCaseError } from '../utils';\n// For debugging: search for other \"For debugging\" lines\n// import CliTable from 'cli-table';\n/**\n * Parses an HTML string, calling the callbacks to notify of tags and text.\n *\n * ## History\n *\n * This file previously used a regular expression to find html tags in the input\n * text. Unfortunately, we ran into a bunch of catastrophic backtracking issues\n * with certain input text, causing Autolinker to either hang or just take a\n * really long time to parse the string.\n *\n * The current code is intended to be a O(n) algorithm that walks through\n * the string in one pass, and tries to be as cheap as possible. We don't need\n * to implement the full HTML spec, but rather simply determine where the string\n * looks like an HTML tag, and where it looks like text (so that we can autolink\n * that).\n *\n * This state machine parser is intended just to be a simple but performant\n * parser of HTML for the subset of requirements we have. We simply need to:\n *\n * 1. Determine where HTML tags are\n * 2. Determine the tag name (Autolinker specifically only cares about <a>,\n *    <script>, and <style> tags, so as not to link any text within them)\n *\n * We don't need to:\n *\n * 1. Create a parse tree\n * 2. Auto-close tags with invalid markup\n * 3. etc.\n *\n * The other intention behind this is that we didn't want to add external\n * dependencies on the Autolinker utility which would increase its size. For\n * instance, adding htmlparser2 adds 125kb to the minified output file,\n * increasing its final size from 47kb to 172kb (at the time of writing). It\n * also doesn't work exactly correctly, treating the string \"<3 blah blah blah\"\n * as an HTML tag.\n *\n * Reference for HTML spec:\n *\n *     https://www.w3.org/TR/html51/syntax.html#sec-tokenization\n *\n * @param {String} html The HTML to parse\n * @param {Object} callbacks\n * @param {Function} callbacks.onOpenTag Callback function to call when an open\n *   tag is parsed. Called with the tagName as its argument.\n * @param {Function} callbacks.onCloseTag Callback function to call when a close\n *   tag is parsed. Called with the tagName as its argument. If a self-closing\n *   tag is found, `onCloseTag` is called immediately after `onOpenTag`.\n * @param {Function} callbacks.onText Callback function to call when text (i.e\n *   not an HTML tag) is parsed. Called with the text (string) as its first\n *   argument, and offset (number) into the string as its second.\n */\nexport function parseHtml(html, _a) {\n    var onOpenTag = _a.onOpenTag, onCloseTag = _a.onCloseTag, onText = _a.onText, onComment = _a.onComment, onDoctype = _a.onDoctype;\n    var noCurrentTag = new CurrentTag();\n    var charIdx = 0, len = html.length, state = 0 /* Data */, currentDataIdx = 0, // where the current data start index is\n    currentTag = noCurrentTag; // describes the current tag that is being read\n    // For debugging: search for other \"For debugging\" lines\n    // const table = new CliTable( {\n    // \thead: [ 'charIdx', 'char', 'state', 'currentDataIdx', 'currentOpenTagIdx', 'tag.type' ]\n    // } );\n    while (charIdx < len) {\n        var char = html.charAt(charIdx);\n        // For debugging: search for other \"For debugging\" lines\n        // ALSO: Temporarily remove the 'const' keyword on the State enum\n        // table.push( \n        // \t[ charIdx, char, State[ state ], currentDataIdx, currentTag.idx, currentTag.idx === -1 ? '' : currentTag.type ] \n        // );\n        switch (state) {\n            case 0 /* Data */:\n                stateData(char);\n                break;\n            case 1 /* TagOpen */:\n                stateTagOpen(char);\n                break;\n            case 2 /* EndTagOpen */:\n                stateEndTagOpen(char);\n                break;\n            case 3 /* TagName */:\n                stateTagName(char);\n                break;\n            case 4 /* BeforeAttributeName */:\n                stateBeforeAttributeName(char);\n                break;\n            case 5 /* AttributeName */:\n                stateAttributeName(char);\n                break;\n            case 6 /* AfterAttributeName */:\n                stateAfterAttributeName(char);\n                break;\n            case 7 /* BeforeAttributeValue */:\n                stateBeforeAttributeValue(char);\n                break;\n            case 8 /* AttributeValueDoubleQuoted */:\n                stateAttributeValueDoubleQuoted(char);\n                break;\n            case 9 /* AttributeValueSingleQuoted */:\n                stateAttributeValueSingleQuoted(char);\n                break;\n            case 10 /* AttributeValueUnquoted */:\n                stateAttributeValueUnquoted(char);\n                break;\n            case 11 /* AfterAttributeValueQuoted */:\n                stateAfterAttributeValueQuoted(char);\n                break;\n            case 12 /* SelfClosingStartTag */:\n                stateSelfClosingStartTag(char);\n                break;\n            case 13 /* MarkupDeclarationOpenState */:\n                stateMarkupDeclarationOpen(char);\n                break;\n            case 14 /* CommentStart */:\n                stateCommentStart(char);\n                break;\n            case 15 /* CommentStartDash */:\n                stateCommentStartDash(char);\n                break;\n            case 16 /* Comment */:\n                stateComment(char);\n                break;\n            case 17 /* CommentEndDash */:\n                stateCommentEndDash(char);\n                break;\n            case 18 /* CommentEnd */:\n                stateCommentEnd(char);\n                break;\n            case 19 /* CommentEndBang */:\n                stateCommentEndBang(char);\n                break;\n            case 20 /* Doctype */:\n                stateDoctype(char);\n                break;\n            default:\n                throwUnhandledCaseError(state);\n        }\n        // For debugging: search for other \"For debugging\" lines\n        // ALSO: Temporarily remove the 'const' keyword on the State enum\n        // table.push( \n        // \t[ charIdx, char, State[ state ], currentDataIdx, currentTag.idx, currentTag.idx === -1 ? '' : currentTag.type ] \n        // );\n        charIdx++;\n    }\n    if (currentDataIdx < charIdx) {\n        emitText();\n    }\n    // For debugging: search for other \"For debugging\" lines\n    // console.log( '\\n' + table.toString() );\n    // Called when non-tags are being read (i.e. the text around HTML ags)\n    // https://www.w3.org/TR/html51/syntax.html#data-state\n    function stateData(char) {\n        if (char === '<') {\n            startNewTag();\n        }\n    }\n    // Called after a '<' is read from the Data state\n    // https://www.w3.org/TR/html51/syntax.html#tag-open-state\n    function stateTagOpen(char) {\n        if (char === '!') {\n            state = 13 /* MarkupDeclarationOpenState */;\n        }\n        else if (char === '/') {\n            state = 2 /* EndTagOpen */;\n            currentTag = new CurrentTag(__assign(__assign({}, currentTag), { isClosing: true }));\n        }\n        else if (char === '<') {\n            // start of another tag (ignore the previous, incomplete one)\n            startNewTag();\n        }\n        else if (letterRe.test(char)) {\n            // tag name start (and no '/' read)\n            state = 3 /* TagName */;\n            currentTag = new CurrentTag(__assign(__assign({}, currentTag), { isOpening: true }));\n        }\n        else {\n            // Any other \n            state = 0 /* Data */;\n            currentTag = noCurrentTag;\n        }\n    }\n    // After a '<x', '</x' sequence is read (where 'x' is a letter character), \n    // this is to continue reading the tag name\n    // https://www.w3.org/TR/html51/syntax.html#tag-name-state\n    function stateTagName(char) {\n        if (whitespaceRe.test(char)) {\n            currentTag = new CurrentTag(__assign(__assign({}, currentTag), { name: captureTagName() }));\n            state = 4 /* BeforeAttributeName */;\n        }\n        else if (char === '<') {\n            // start of another tag (ignore the previous, incomplete one)\n            startNewTag();\n        }\n        else if (char === '/') {\n            currentTag = new CurrentTag(__assign(__assign({}, currentTag), { name: captureTagName() }));\n            state = 12 /* SelfClosingStartTag */;\n        }\n        else if (char === '>') {\n            currentTag = new CurrentTag(__assign(__assign({}, currentTag), { name: captureTagName() }));\n            emitTagAndPreviousTextNode(); // resets to Data state as well\n        }\n        else if (!letterRe.test(char) && !digitRe.test(char) && char !== ':') {\n            // Anything else that does not form an html tag. Note: the colon \n            // character is accepted for XML namespaced tags\n            resetToDataState();\n        }\n        else {\n            // continue reading tag name\n        }\n    }\n    // Called after the '/' is read from a '</' sequence\n    // https://www.w3.org/TR/html51/syntax.html#end-tag-open-state\n    function stateEndTagOpen(char) {\n        if (char === '>') { // parse error. Encountered \"</>\". Skip it without treating as a tag\n            resetToDataState();\n        }\n        else if (letterRe.test(char)) {\n            state = 3 /* TagName */;\n        }\n        else {\n            // some other non-tag-like character, don't treat this as a tag\n            resetToDataState();\n        }\n    }\n    // https://www.w3.org/TR/html51/syntax.html#before-attribute-name-state\n    function stateBeforeAttributeName(char) {\n        if (whitespaceRe.test(char)) {\n            // stay in BeforeAttributeName state - continue reading chars\n        }\n        else if (char === '/') {\n            state = 12 /* SelfClosingStartTag */;\n        }\n        else if (char === '>') {\n            emitTagAndPreviousTextNode(); // resets to Data state as well\n        }\n        else if (char === '<') {\n            // start of another tag (ignore the previous, incomplete one)\n            startNewTag();\n        }\n        else if (char === \"=\" || quoteRe.test(char) || controlCharsRe.test(char)) {\n            // \"Parse error\" characters that, according to the spec, should be\n            // appended to the attribute name, but we'll treat these characters\n            // as not forming a real HTML tag\n            resetToDataState();\n        }\n        else {\n            // Any other char, start of a new attribute name\n            state = 5 /* AttributeName */;\n        }\n    }\n    // https://www.w3.org/TR/html51/syntax.html#attribute-name-state\n    function stateAttributeName(char) {\n        if (whitespaceRe.test(char)) {\n            state = 6 /* AfterAttributeName */;\n        }\n        else if (char === '/') {\n            state = 12 /* SelfClosingStartTag */;\n        }\n        else if (char === '=') {\n            state = 7 /* BeforeAttributeValue */;\n        }\n        else if (char === '>') {\n            emitTagAndPreviousTextNode(); // resets to Data state as well\n        }\n        else if (char === '<') {\n            // start of another tag (ignore the previous, incomplete one)\n            startNewTag();\n        }\n        else if (quoteRe.test(char)) {\n            // \"Parse error\" characters that, according to the spec, should be\n            // appended to the attribute name, but we'll treat these characters\n            // as not forming a real HTML tag\n            resetToDataState();\n        }\n        else {\n            // anything else: continue reading attribute name\n        }\n    }\n    // https://www.w3.org/TR/html51/syntax.html#after-attribute-name-state\n    function stateAfterAttributeName(char) {\n        if (whitespaceRe.test(char)) {\n            // ignore the character - continue reading\n        }\n        else if (char === '/') {\n            state = 12 /* SelfClosingStartTag */;\n        }\n        else if (char === '=') {\n            state = 7 /* BeforeAttributeValue */;\n        }\n        else if (char === '>') {\n            emitTagAndPreviousTextNode();\n        }\n        else if (char === '<') {\n            // start of another tag (ignore the previous, incomplete one)\n            startNewTag();\n        }\n        else if (quoteRe.test(char)) {\n            // \"Parse error\" characters that, according to the spec, should be\n            // appended to the attribute name, but we'll treat these characters\n            // as not forming a real HTML tag\n            resetToDataState();\n        }\n        else {\n            // Any other character, start a new attribute in the current tag\n            state = 5 /* AttributeName */;\n        }\n    }\n    // https://www.w3.org/TR/html51/syntax.html#before-attribute-value-state\n    function stateBeforeAttributeValue(char) {\n        if (whitespaceRe.test(char)) {\n            // ignore the character - continue reading\n        }\n        else if (char === \"\\\"\") {\n            state = 8 /* AttributeValueDoubleQuoted */;\n        }\n        else if (char === \"'\") {\n            state = 9 /* AttributeValueSingleQuoted */;\n        }\n        else if (/[>=`]/.test(char)) {\n            // Invalid chars after an '=' for an attribute value, don't count \n            // the current tag as an HTML tag\n            resetToDataState();\n        }\n        else if (char === '<') {\n            // start of another tag (ignore the previous, incomplete one)\n            startNewTag();\n        }\n        else {\n            // Any other character, consider it an unquoted attribute value\n            state = 10 /* AttributeValueUnquoted */;\n        }\n    }\n    // https://www.w3.org/TR/html51/syntax.html#attribute-value-double-quoted-state\n    function stateAttributeValueDoubleQuoted(char) {\n        if (char === \"\\\"\") { // end the current double-quoted attribute\n            state = 11 /* AfterAttributeValueQuoted */;\n        }\n        else {\n            // consume the character as part of the double-quoted attribute value\n        }\n    }\n    // https://www.w3.org/TR/html51/syntax.html#attribute-value-single-quoted-state\n    function stateAttributeValueSingleQuoted(char) {\n        if (char === \"'\") { // end the current single-quoted attribute\n            state = 11 /* AfterAttributeValueQuoted */;\n        }\n        else {\n            // consume the character as part of the double-quoted attribute value\n        }\n    }\n    // https://www.w3.org/TR/html51/syntax.html#attribute-value-unquoted-state\n    function stateAttributeValueUnquoted(char) {\n        if (whitespaceRe.test(char)) {\n            state = 4 /* BeforeAttributeName */;\n        }\n        else if (char === '>') {\n            emitTagAndPreviousTextNode();\n        }\n        else if (char === '<') {\n            // start of another tag (ignore the previous, incomplete one)\n            startNewTag();\n        }\n        else {\n            // Any other character, treat it as part of the attribute value\n        }\n    }\n    // https://www.w3.org/TR/html51/syntax.html#after-attribute-value-quoted-state\n    function stateAfterAttributeValueQuoted(char) {\n        if (whitespaceRe.test(char)) {\n            state = 4 /* BeforeAttributeName */;\n        }\n        else if (char === '/') {\n            state = 12 /* SelfClosingStartTag */;\n        }\n        else if (char === '>') {\n            emitTagAndPreviousTextNode();\n        }\n        else if (char === '<') {\n            // start of another tag (ignore the previous, incomplete one)\n            startNewTag();\n        }\n        else {\n            // Any other character, \"parse error\". Spec says to switch to the\n            // BeforeAttributeState and re-consume the character, as it may be\n            // the start of a new attribute name\n            state = 4 /* BeforeAttributeName */;\n            reconsumeCurrentCharacter();\n        }\n    }\n    // A '/' has just been read in the current tag (presumably for '/>'), and \n    // this handles the next character\n    // https://www.w3.org/TR/html51/syntax.html#self-closing-start-tag-state\n    function stateSelfClosingStartTag(char) {\n        if (char === '>') {\n            currentTag = new CurrentTag(__assign(__assign({}, currentTag), { isClosing: true }));\n            emitTagAndPreviousTextNode(); // resets to Data state as well\n        }\n        else {\n            state = 4 /* BeforeAttributeName */;\n        }\n    }\n    // https://www.w3.org/TR/html51/syntax.html#markup-declaration-open-state\n    // (HTML Comments or !DOCTYPE)\n    function stateMarkupDeclarationOpen(char) {\n        if (html.substr(charIdx, 2) === '--') { // html comment\n            charIdx += 2; // \"consume\" characters\n            currentTag = new CurrentTag(__assign(__assign({}, currentTag), { type: 'comment' }));\n            state = 14 /* CommentStart */;\n        }\n        else if (html.substr(charIdx, 7).toUpperCase() === 'DOCTYPE') {\n            charIdx += 7; // \"consume\" characters\n            currentTag = new CurrentTag(__assign(__assign({}, currentTag), { type: 'doctype' }));\n            state = 20 /* Doctype */;\n        }\n        else {\n            // At this point, the spec specifies that the state machine should\n            // enter the \"bogus comment\" state, in which case any character(s) \n            // after the '<!' that were read should become an HTML comment up\n            // until the first '>' that is read (or EOF). Instead, we'll assume\n            // that a user just typed '<!' as part of text data\n            resetToDataState();\n        }\n    }\n    // Handles after the sequence '<!--' has been read\n    // https://www.w3.org/TR/html51/syntax.html#comment-start-state\n    function stateCommentStart(char) {\n        if (char === '-') {\n            // We've read the sequence '<!---' at this point (3 dashes)\n            state = 15 /* CommentStartDash */;\n        }\n        else if (char === '>') {\n            // At this point, we'll assume the comment wasn't a real comment\n            // so we'll just emit it as data. We basically read the sequence \n            // '<!-->'\n            resetToDataState();\n        }\n        else {\n            // Any other char, take it as part of the comment\n            state = 16 /* Comment */;\n        }\n    }\n    // We've read the sequence '<!---' at this point (3 dashes)\n    // https://www.w3.org/TR/html51/syntax.html#comment-start-dash-state\n    function stateCommentStartDash(char) {\n        if (char === '-') {\n            // We've read '<!----' (4 dashes) at this point\n            state = 18 /* CommentEnd */;\n        }\n        else if (char === '>') {\n            // At this point, we'll assume the comment wasn't a real comment\n            // so we'll just emit it as data. We basically read the sequence \n            // '<!--->'\n            resetToDataState();\n        }\n        else {\n            // Anything else, take it as a valid comment\n            state = 16 /* Comment */;\n        }\n    }\n    // Currently reading the comment's text (data)\n    // https://www.w3.org/TR/html51/syntax.html#comment-state\n    function stateComment(char) {\n        if (char === '-') {\n            state = 17 /* CommentEndDash */;\n        }\n        else {\n            // Any other character, stay in the Comment state\n        }\n    }\n    // When we we've read the first dash inside a comment, it may signal the\n    // end of the comment if we read another dash\n    // https://www.w3.org/TR/html51/syntax.html#comment-end-dash-state\n    function stateCommentEndDash(char) {\n        if (char === '-') {\n            state = 18 /* CommentEnd */;\n        }\n        else {\n            // Wasn't a dash, must still be part of the comment\n            state = 16 /* Comment */;\n        }\n    }\n    // After we've read two dashes inside a comment, it may signal the end of \n    // the comment if we then read a '>' char\n    // https://www.w3.org/TR/html51/syntax.html#comment-end-state\n    function stateCommentEnd(char) {\n        if (char === '>') {\n            emitTagAndPreviousTextNode();\n        }\n        else if (char === '!') {\n            state = 19 /* CommentEndBang */;\n        }\n        else if (char === '-') {\n            // A 3rd '-' has been read: stay in the CommentEnd state\n        }\n        else {\n            // Anything else, switch back to the comment state since we didn't\n            // read the full \"end comment\" sequence (i.e. '-->')\n            state = 16 /* Comment */;\n        }\n    }\n    // We've read the sequence '--!' inside of a comment\n    // https://www.w3.org/TR/html51/syntax.html#comment-end-bang-state\n    function stateCommentEndBang(char) {\n        if (char === '-') {\n            // We read the sequence '--!-' inside of a comment. The last dash\n            // could signify that the comment is going to close\n            state = 17 /* CommentEndDash */;\n        }\n        else if (char === '>') {\n            // End of comment with the sequence '--!>'\n            emitTagAndPreviousTextNode();\n        }\n        else {\n            // The '--!' was not followed by a '>', continue reading the \n            // comment's text\n            state = 16 /* Comment */;\n        }\n    }\n    /**\n     * For DOCTYPES in particular, we don't care about the attributes. Just\n     * advance to the '>' character and emit the tag, unless we find a '<'\n     * character in which case we'll start a new tag.\n     *\n     * Example doctype tag:\n     *    <!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">\n     *\n     * Actual spec: https://www.w3.org/TR/html51/syntax.html#doctype-state\n     */\n    function stateDoctype(char) {\n        if (char === '>') {\n            emitTagAndPreviousTextNode();\n        }\n        else if (char === '<') {\n            startNewTag();\n        }\n        else {\n            // stay in the Doctype state\n        }\n    }\n    /**\n     * Resets the state back to the Data state, and removes the current tag.\n     *\n     * We'll generally run this function whenever a \"parse error\" is\n     * encountered, where the current tag that is being read no longer looks\n     * like a real HTML tag.\n     */\n    function resetToDataState() {\n        state = 0 /* Data */;\n        currentTag = noCurrentTag;\n    }\n    /**\n     * Starts a new HTML tag at the current index, ignoring any previous HTML\n     * tag that was being read.\n     *\n     * We'll generally run this function whenever we read a new '<' character,\n     * including when we read a '<' character inside of an HTML tag that we were\n     * previously reading.\n     */\n    function startNewTag() {\n        state = 1 /* TagOpen */;\n        currentTag = new CurrentTag({ idx: charIdx });\n    }\n    /**\n     * Once we've decided to emit an open tag, that means we can also emit the\n     * text node before it.\n     */\n    function emitTagAndPreviousTextNode() {\n        var textBeforeTag = html.slice(currentDataIdx, currentTag.idx);\n        if (textBeforeTag) {\n            // the html tag was the first element in the html string, or two \n            // tags next to each other, in which case we should not emit a text \n            // node\n            onText(textBeforeTag, currentDataIdx);\n        }\n        if (currentTag.type === 'comment') {\n            onComment(currentTag.idx);\n        }\n        else if (currentTag.type === 'doctype') {\n            onDoctype(currentTag.idx);\n        }\n        else {\n            if (currentTag.isOpening) {\n                onOpenTag(currentTag.name, currentTag.idx);\n            }\n            if (currentTag.isClosing) { // note: self-closing tags will emit both opening and closing\n                onCloseTag(currentTag.name, currentTag.idx);\n            }\n        }\n        // Since we just emitted a tag, reset to the data state for the next char\n        resetToDataState();\n        currentDataIdx = charIdx + 1;\n    }\n    function emitText() {\n        var text = html.slice(currentDataIdx, charIdx);\n        onText(text, currentDataIdx);\n        currentDataIdx = charIdx + 1;\n    }\n    /**\n     * Captures the tag name from the start of the tag to the current character\n     * index, and converts it to lower case\n     */\n    function captureTagName() {\n        var startIdx = currentTag.idx + (currentTag.isClosing ? 2 : 1);\n        return html.slice(startIdx, charIdx).toLowerCase();\n    }\n    /**\n     * Causes the main loop to re-consume the current character, such as after\n     * encountering a \"parse error\" that changed state and needs to reconsume\n     * the same character in that new state.\n     */\n    function reconsumeCurrentCharacter() {\n        charIdx--;\n    }\n}\nvar CurrentTag = /** @class */ (function () {\n    function CurrentTag(cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        this.idx = cfg.idx !== undefined ? cfg.idx : -1;\n        this.type = cfg.type || 'tag';\n        this.name = cfg.name || '';\n        this.isOpening = !!cfg.isOpening;\n        this.isClosing = !!cfg.isClosing;\n    }\n    return CurrentTag;\n}());\n\n//# sourceMappingURL=parse-html.js.map\n","import { defaults, remove, splitAndCapture } from \"./utils\";\nimport { AnchorTagBuilder } from \"./anchor-tag-builder\";\nimport { Match } from \"./match/match\";\nimport { EmailMatch } from \"./match/email-match\";\nimport { HashtagMatch } from \"./match/hashtag-match\";\nimport { MentionMatch } from \"./match/mention-match\";\nimport { PhoneMatch } from \"./match/phone-match\";\nimport { UrlMatch } from \"./match/url-match\";\nimport { Matcher } from \"./matcher/matcher\";\nimport { HtmlTag } from \"./html-tag\";\nimport { EmailMatcher } from \"./matcher/email-matcher\";\nimport { UrlMatcher } from \"./matcher/url-matcher\";\nimport { HashtagMatcher } from \"./matcher/hashtag-matcher\";\nimport { PhoneMatcher } from \"./matcher/phone-matcher\";\nimport { MentionMatcher } from \"./matcher/mention-matcher\";\nimport { parseHtml } from './htmlParser/parse-html';\n/**\n * @class Autolinker\n * @extends Object\n *\n * Utility class used to process a given string of text, and wrap the matches in\n * the appropriate anchor (&lt;a&gt;) tags to turn them into links.\n *\n * Any of the configuration options may be provided in an Object provided\n * to the Autolinker constructor, which will configure how the {@link #link link()}\n * method will process the links.\n *\n * For example:\n *\n *     var autolinker = new Autolinker( {\n *         newWindow : false,\n *         truncate  : 30\n *     } );\n *\n *     var html = autolinker.link( \"Joe went to www.yahoo.com\" );\n *     // produces: 'Joe went to <a href=\"http://www.yahoo.com\">yahoo.com</a>'\n *\n *\n * The {@link #static-link static link()} method may also be used to inline\n * options into a single call, which may be more convenient for one-off uses.\n * For example:\n *\n *     var html = Autolinker.link( \"Joe went to www.yahoo.com\", {\n *         newWindow : false,\n *         truncate  : 30\n *     } );\n *     // produces: 'Joe went to <a href=\"http://www.yahoo.com\">yahoo.com</a>'\n *\n *\n * ## Custom Replacements of Links\n *\n * If the configuration options do not provide enough flexibility, a {@link #replaceFn}\n * may be provided to fully customize the output of Autolinker. This function is\n * called once for each URL/Email/Phone#/Hashtag/Mention (Twitter, Instagram, Soundcloud)\n * match that is encountered.\n *\n * For example:\n *\n *     var input = \"...\";  // string with URLs, Email Addresses, Phone #s, Hashtags, and Mentions (Twitter, Instagram, Soundcloud)\n *\n *     var linkedText = Autolinker.link( input, {\n *         replaceFn : function( match ) {\n *             console.log( \"href = \", match.getAnchorHref() );\n *             console.log( \"text = \", match.getAnchorText() );\n *\n *             switch( match.getType() ) {\n *                 case 'url' :\n *                     console.log( \"url: \", match.getUrl() );\n *\n *                     if( match.getUrl().indexOf( 'mysite.com' ) === -1 ) {\n *                         var tag = match.buildTag();  // returns an `Autolinker.HtmlTag` instance, which provides mutator methods for easy changes\n *                         tag.setAttr( 'rel', 'nofollow' );\n *                         tag.addClass( 'external-link' );\n *\n *                         return tag;\n *\n *                     } else {\n *                         return true;  // let Autolinker perform its normal anchor tag replacement\n *                     }\n *\n *                 case 'email' :\n *                     var email = match.getEmail();\n *                     console.log( \"email: \", email );\n *\n *                     if( email === \"my@own.address\" ) {\n *                         return false;  // don't auto-link this particular email address; leave as-is\n *                     } else {\n *                         return;  // no return value will have Autolinker perform its normal anchor tag replacement (same as returning `true`)\n *                     }\n *\n *                 case 'phone' :\n *                     var phoneNumber = match.getPhoneNumber();\n *                     console.log( phoneNumber );\n *\n *                     return '<a href=\"http://newplace.to.link.phone.numbers.to/\">' + phoneNumber + '</a>';\n *\n *                 case 'hashtag' :\n *                     var hashtag = match.getHashtag();\n *                     console.log( hashtag );\n *\n *                     return '<a href=\"http://newplace.to.link.hashtag.handles.to/\">' + hashtag + '</a>';\n *\n *                 case 'mention' :\n *                     var mention = match.getMention();\n *                     console.log( mention );\n *\n *                     return '<a href=\"http://newplace.to.link.mention.to/\">' + mention + '</a>';\n *             }\n *         }\n *     } );\n *\n *\n * The function may return the following values:\n *\n * - `true` (Boolean): Allow Autolinker to replace the match as it normally\n *   would.\n * - `false` (Boolean): Do not replace the current match at all - leave as-is.\n * - Any String: If a string is returned from the function, the string will be\n *   used directly as the replacement HTML for the match.\n * - An {@link Autolinker.HtmlTag} instance, which can be used to build/modify\n *   an HTML tag before writing out its HTML text.\n */\nvar Autolinker = /** @class */ (function () {\n    /**\n     * @method constructor\n     * @param {Object} [cfg] The configuration options for the Autolinker instance,\n     *   specified in an Object (map).\n     */\n    function Autolinker(cfg) {\n        if (cfg === void 0) { cfg = {}; }\n        /**\n         * The Autolinker version number exposed on the instance itself.\n         *\n         * Ex: 0.25.1\n         */\n        this.version = Autolinker.version;\n        /**\n         * @cfg {Boolean/Object} [urls]\n         *\n         * `true` if URLs should be automatically linked, `false` if they should not\n         * be. Defaults to `true`.\n         *\n         * Examples:\n         *\n         *     urls: true\n         *\n         *     // or\n         *\n         *     urls: {\n         *         schemeMatches : true,\n         *         wwwMatches    : true,\n         *         tldMatches    : true\n         *     }\n         *\n         * As shown above, this option also accepts an Object form with 3 properties\n         * to allow for more customization of what exactly gets linked. All default\n         * to `true`:\n         *\n         * @cfg {Boolean} [urls.schemeMatches] `true` to match URLs found prefixed\n         *   with a scheme, i.e. `http://google.com`, or `other+scheme://google.com`,\n         *   `false` to prevent these types of matches.\n         * @cfg {Boolean} [urls.wwwMatches] `true` to match urls found prefixed with\n         *   `'www.'`, i.e. `www.google.com`. `false` to prevent these types of\n         *   matches. Note that if the URL had a prefixed scheme, and\n         *   `schemeMatches` is true, it will still be linked.\n         * @cfg {Boolean} [urls.tldMatches] `true` to match URLs with known top\n         *   level domains (.com, .net, etc.) that are not prefixed with a scheme or\n         *   `'www.'`. This option attempts to match anything that looks like a URL\n         *   in the given text. Ex: `google.com`, `asdf.org/?page=1`, etc. `false`\n         *   to prevent these types of matches.\n         */\n        this.urls = {}; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean} [email=true]\n         *\n         * `true` if email addresses should be automatically linked, `false` if they\n         * should not be.\n         */\n        this.email = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean} [phone=true]\n         *\n         * `true` if Phone numbers (\"(555)555-5555\") should be automatically linked,\n         * `false` if they should not be.\n         */\n        this.phone = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean/String} [hashtag=false]\n         *\n         * A string for the service name to have hashtags (ex: \"#myHashtag\")\n         * auto-linked to. The currently-supported values are:\n         *\n         * - 'twitter'\n         * - 'facebook'\n         * - 'instagram'\n         *\n         * Pass `false` to skip auto-linking of hashtags.\n         */\n        this.hashtag = false; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {String/Boolean} [mention=false]\n         *\n         * A string for the service name to have mentions (ex: \"@myuser\")\n         * auto-linked to. The currently supported values are:\n         *\n         * - 'twitter'\n         * - 'instagram'\n         * - 'soundcloud'\n         *\n         * Defaults to `false` to skip auto-linking of mentions.\n         */\n        this.mention = false; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean} [newWindow=true]\n         *\n         * `true` if the links should open in a new window, `false` otherwise.\n         */\n        this.newWindow = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean/Object} [stripPrefix=true]\n         *\n         * `true` if 'http://' (or 'https://') and/or the 'www.' should be stripped\n         * from the beginning of URL links' text, `false` otherwise. Defaults to\n         * `true`.\n         *\n         * Examples:\n         *\n         *     stripPrefix: true\n         *\n         *     // or\n         *\n         *     stripPrefix: {\n         *         scheme : true,\n         *         www    : true\n         *     }\n         *\n         * As shown above, this option also accepts an Object form with 2 properties\n         * to allow for more customization of what exactly is prevented from being\n         * displayed. Both default to `true`:\n         *\n         * @cfg {Boolean} [stripPrefix.scheme] `true` to prevent the scheme part of\n         *   a URL match from being displayed to the user. Example:\n         *   `'http://google.com'` will be displayed as `'google.com'`. `false` to\n         *   not strip the scheme. NOTE: Only an `'http://'` or `'https://'` scheme\n         *   will be removed, so as not to remove a potentially dangerous scheme\n         *   (such as `'file://'` or `'javascript:'`)\n         * @cfg {Boolean} [stripPrefix.www] www (Boolean): `true` to prevent the\n         *   `'www.'` part of a URL match from being displayed to the user. Ex:\n         *   `'www.google.com'` will be displayed as `'google.com'`. `false` to not\n         *   strip the `'www'`.\n         */\n        this.stripPrefix = { scheme: true, www: true }; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean} [stripTrailingSlash=true]\n         *\n         * `true` to remove the trailing slash from URL matches, `false` to keep\n         *  the trailing slash.\n         *\n         *  Example when `true`: `http://google.com/` will be displayed as\n         *  `http://google.com`.\n         */\n        this.stripTrailingSlash = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean} [decodePercentEncoding=true]\n         *\n         * `true` to decode percent-encoded characters in URL matches, `false` to keep\n         *  the percent-encoded characters.\n         *\n         *  Example when `true`: `https://en.wikipedia.org/wiki/San_Jos%C3%A9` will\n         *  be displayed as `https://en.wikipedia.org/wiki/San_Jos`.\n         */\n        this.decodePercentEncoding = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Number/Object} [truncate=0]\n         *\n         * ## Number Form\n         *\n         * A number for how many characters matched text should be truncated to\n         * inside the text of a link. If the matched text is over this number of\n         * characters, it will be truncated to this length by adding a two period\n         * ellipsis ('..') to the end of the string.\n         *\n         * For example: A url like 'http://www.yahoo.com/some/long/path/to/a/file'\n         * truncated to 25 characters might look something like this:\n         * 'yahoo.com/some/long/pat..'\n         *\n         * Example Usage:\n         *\n         *     truncate: 25\n         *\n         *\n         *  Defaults to `0` for \"no truncation.\"\n         *\n         *\n         * ## Object Form\n         *\n         * An Object may also be provided with two properties: `length` (Number) and\n         * `location` (String). `location` may be one of the following: 'end'\n         * (default), 'middle', or 'smart'.\n         *\n         * Example Usage:\n         *\n         *     truncate: { length: 25, location: 'middle' }\n         *\n         * @cfg {Number} [truncate.length=0] How many characters to allow before\n         *   truncation will occur. Defaults to `0` for \"no truncation.\"\n         * @cfg {\"end\"/\"middle\"/\"smart\"} [truncate.location=\"end\"]\n         *\n         * - 'end' (default): will truncate up to the number of characters, and then\n         *   add an ellipsis at the end. Ex: 'yahoo.com/some/long/pat..'\n         * - 'middle': will truncate and add the ellipsis in the middle. Ex:\n         *   'yahoo.com/s..th/to/a/file'\n         * - 'smart': for URLs where the algorithm attempts to strip out unnecessary\n         *   parts first (such as the 'www.', then URL scheme, hash, etc.),\n         *   attempting to make the URL human-readable before looking for a good\n         *   point to insert the ellipsis if it is still too long. Ex:\n         *   'yahoo.com/some..to/a/file'. For more details, see\n         *   {@link Autolinker.truncate.TruncateSmart}.\n         */\n        this.truncate = { length: 0, location: 'end' }; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {String} className\n         *\n         * A CSS class name to add to the generated links. This class will be added\n         * to all links, as well as this class plus match suffixes for styling\n         * url/email/phone/hashtag/mention links differently.\n         *\n         * For example, if this config is provided as \"myLink\", then:\n         *\n         * - URL links will have the CSS classes: \"myLink myLink-url\"\n         * - Email links will have the CSS classes: \"myLink myLink-email\", and\n         * - Phone links will have the CSS classes: \"myLink myLink-phone\"\n         * - Hashtag links will have the CSS classes: \"myLink myLink-hashtag\"\n         * - Mention links will have the CSS classes: \"myLink myLink-mention myLink-[type]\"\n         *   where [type] is either \"instagram\", \"twitter\" or \"soundcloud\"\n         */\n        this.className = ''; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Function} replaceFn\n         *\n         * A function to individually process each match found in the input string.\n         *\n         * See the class's description for usage.\n         *\n         * The `replaceFn` can be called with a different context object (`this`\n         * reference) using the {@link #context} cfg.\n         *\n         * This function is called with the following parameter:\n         *\n         * @cfg {Autolinker.match.Match} replaceFn.match The Match instance which\n         *   can be used to retrieve information about the match that the `replaceFn`\n         *   is currently processing. See {@link Autolinker.match.Match} subclasses\n         *   for details.\n         */\n        this.replaceFn = null; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Object} context\n         *\n         * The context object (`this` reference) to call the `replaceFn` with.\n         *\n         * Defaults to this Autolinker instance.\n         */\n        this.context = undefined; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @cfg {Boolean} [sanitizeHtml=false]\n         *\n         * `true` to HTML-encode the start and end brackets of existing HTML tags found\n         * in the input string. This will escape `<` and `>` characters to `&lt;` and\n         * `&gt;`, respectively.\n         *\n         * Setting this to `true` will prevent XSS (Cross-site Scripting) attacks,\n         * but will remove the significance of existing HTML tags in the input string. If\n         * you would like to maintain the significance of existing HTML tags while also\n         * making the output HTML string safe, leave this option as `false` and use a\n         * tool like https://github.com/cure53/DOMPurify (or others) on the input string\n         * before running Autolinker.\n         */\n        this.sanitizeHtml = false; // default value just to get the above doc comment in the ES5 output and documentation generator\n        /**\n         * @private\n         * @property {Autolinker.matcher.Matcher[]} matchers\n         *\n         * The {@link Autolinker.matcher.Matcher} instances for this Autolinker\n         * instance.\n         *\n         * This is lazily created in {@link #getMatchers}.\n         */\n        this.matchers = null;\n        /**\n         * @private\n         * @property {Autolinker.AnchorTagBuilder} tagBuilder\n         *\n         * The AnchorTagBuilder instance used to build match replacement anchor tags.\n         * Note: this is lazily instantiated in the {@link #getTagBuilder} method.\n         */\n        this.tagBuilder = null;\n        // Note: when `this.something` is used in the rhs of these assignments,\n        //       it refers to the default values set above the constructor\n        this.urls = this.normalizeUrlsCfg(cfg.urls);\n        this.email = typeof cfg.email === 'boolean' ? cfg.email : this.email;\n        this.phone = typeof cfg.phone === 'boolean' ? cfg.phone : this.phone;\n        this.hashtag = cfg.hashtag || this.hashtag;\n        this.mention = cfg.mention || this.mention;\n        this.newWindow = typeof cfg.newWindow === 'boolean' ? cfg.newWindow : this.newWindow;\n        this.stripPrefix = this.normalizeStripPrefixCfg(cfg.stripPrefix);\n        this.stripTrailingSlash = typeof cfg.stripTrailingSlash === 'boolean' ? cfg.stripTrailingSlash : this.stripTrailingSlash;\n        this.decodePercentEncoding = typeof cfg.decodePercentEncoding === 'boolean' ? cfg.decodePercentEncoding : this.decodePercentEncoding;\n        this.sanitizeHtml = cfg.sanitizeHtml || false;\n        // Validate the value of the `mention` cfg\n        var mention = this.mention;\n        if (mention !== false && ['twitter', 'instagram', 'soundcloud', 'tiktok'].indexOf(mention) === -1) {\n            throw new Error(\"invalid `mention` cfg '\".concat(mention, \"' - see docs\"));\n        }\n        // Validate the value of the `hashtag` cfg\n        var hashtag = this.hashtag;\n        if (hashtag !== false && ['twitter', 'facebook', 'instagram', 'tiktok'].indexOf(hashtag) === -1) {\n            throw new Error(\"invalid `hashtag` cfg '\".concat(hashtag, \"' - see docs\"));\n        }\n        this.truncate = this.normalizeTruncateCfg(cfg.truncate);\n        this.className = cfg.className || this.className;\n        this.replaceFn = cfg.replaceFn || this.replaceFn;\n        this.context = cfg.context || this;\n    }\n    /**\n     * Automatically links URLs, Email addresses, Phone Numbers, Twitter handles,\n     * Hashtags, and Mentions found in the given chunk of HTML. Does not link URLs\n     * found within HTML tags.\n     *\n     * For instance, if given the text: `You should go to http://www.yahoo.com`,\n     * then the result will be `You should go to &lt;a href=\"http://www.yahoo.com\"&gt;http://www.yahoo.com&lt;/a&gt;`\n     *\n     * Example:\n     *\n     *     var linkedText = Autolinker.link( \"Go to google.com\", { newWindow: false } );\n     *     // Produces: \"Go to <a href=\"http://google.com\">google.com</a>\"\n     *\n     * @static\n     * @param {String} textOrHtml The HTML or text to find matches within (depending\n     *   on if the {@link #urls}, {@link #email}, {@link #phone}, {@link #mention},\n     *   {@link #hashtag}, and {@link #mention} options are enabled).\n     * @param {Object} [options] Any of the configuration options for the Autolinker\n     *   class, specified in an Object (map). See the class description for an\n     *   example call.\n     * @return {String} The HTML text, with matches automatically linked.\n     */\n    Autolinker.link = function (textOrHtml, options) {\n        var autolinker = new Autolinker(options);\n        return autolinker.link(textOrHtml);\n    };\n    /**\n     * Parses the input `textOrHtml` looking for URLs, email addresses, phone\n     * numbers, username handles, and hashtags (depending on the configuration\n     * of the Autolinker instance), and returns an array of {@link Autolinker.match.Match}\n     * objects describing those matches (without making any replacements).\n     *\n     * Note that if parsing multiple pieces of text, it is slightly more efficient\n     * to create an Autolinker instance, and use the instance-level {@link #parse}\n     * method.\n     *\n     * Example:\n     *\n     *     var matches = Autolinker.parse( \"Hello google.com, I am asdf@asdf.com\", {\n     *         urls: true,\n     *         email: true\n     *     } );\n     *\n     *     console.log( matches.length );           // 2\n     *     console.log( matches[ 0 ].getType() );   // 'url'\n     *     console.log( matches[ 0 ].getUrl() );    // 'google.com'\n     *     console.log( matches[ 1 ].getType() );   // 'email'\n     *     console.log( matches[ 1 ].getEmail() );  // 'asdf@asdf.com'\n     *\n     * @static\n     * @param {String} textOrHtml The HTML or text to find matches within\n     *   (depending on if the {@link #urls}, {@link #email}, {@link #phone},\n     *   {@link #hashtag}, and {@link #mention} options are enabled).\n     * @param {Object} [options] Any of the configuration options for the Autolinker\n     *   class, specified in an Object (map). See the class description for an\n     *   example call.\n     * @return {Autolinker.match.Match[]} The array of Matches found in the\n     *   given input `textOrHtml`.\n     */\n    Autolinker.parse = function (textOrHtml, options) {\n        var autolinker = new Autolinker(options);\n        return autolinker.parse(textOrHtml);\n    };\n    /**\n     * Normalizes the {@link #urls} config into an Object with 3 properties:\n     * `schemeMatches`, `wwwMatches`, and `tldMatches`, all Booleans.\n     *\n     * See {@link #urls} config for details.\n     *\n     * @private\n     * @param {Boolean/Object} urls\n     * @return {Object}\n     */\n    Autolinker.prototype.normalizeUrlsCfg = function (urls) {\n        if (urls == null)\n            urls = true; // default to `true`\n        if (typeof urls === 'boolean') {\n            return { schemeMatches: urls, wwwMatches: urls, tldMatches: urls };\n        }\n        else { // object form\n            return {\n                schemeMatches: typeof urls.schemeMatches === 'boolean' ? urls.schemeMatches : true,\n                wwwMatches: typeof urls.wwwMatches === 'boolean' ? urls.wwwMatches : true,\n                tldMatches: typeof urls.tldMatches === 'boolean' ? urls.tldMatches : true\n            };\n        }\n    };\n    /**\n     * Normalizes the {@link #stripPrefix} config into an Object with 2\n     * properties: `scheme`, and `www` - both Booleans.\n     *\n     * See {@link #stripPrefix} config for details.\n     *\n     * @private\n     * @param {Boolean/Object} stripPrefix\n     * @return {Object}\n     */\n    Autolinker.prototype.normalizeStripPrefixCfg = function (stripPrefix) {\n        if (stripPrefix == null)\n            stripPrefix = true; // default to `true`\n        if (typeof stripPrefix === 'boolean') {\n            return { scheme: stripPrefix, www: stripPrefix };\n        }\n        else { // object form\n            return {\n                scheme: typeof stripPrefix.scheme === 'boolean' ? stripPrefix.scheme : true,\n                www: typeof stripPrefix.www === 'boolean' ? stripPrefix.www : true\n            };\n        }\n    };\n    /**\n     * Normalizes the {@link #truncate} config into an Object with 2 properties:\n     * `length` (Number), and `location` (String).\n     *\n     * See {@link #truncate} config for details.\n     *\n     * @private\n     * @param {Number/Object} truncate\n     * @return {Object}\n     */\n    Autolinker.prototype.normalizeTruncateCfg = function (truncate) {\n        if (typeof truncate === 'number') {\n            return { length: truncate, location: 'end' };\n        }\n        else { // object, or undefined/null\n            return defaults(truncate || {}, {\n                length: Number.POSITIVE_INFINITY,\n                location: 'end'\n            });\n        }\n    };\n    /**\n     * Parses the input `textOrHtml` looking for URLs, email addresses, phone\n     * numbers, username handles, and hashtags (depending on the configuration\n     * of the Autolinker instance), and returns an array of {@link Autolinker.match.Match}\n     * objects describing those matches (without making any replacements).\n     *\n     * This method is used by the {@link #link} method, but can also be used to\n     * simply do parsing of the input in order to discover what kinds of links\n     * there are and how many.\n     *\n     * Example usage:\n     *\n     *     var autolinker = new Autolinker( {\n     *         urls: true,\n     *         email: true\n     *     } );\n     *\n     *     var matches = autolinker.parse( \"Hello google.com, I am asdf@asdf.com\" );\n     *\n     *     console.log( matches.length );           // 2\n     *     console.log( matches[ 0 ].getType() );   // 'url'\n     *     console.log( matches[ 0 ].getUrl() );    // 'google.com'\n     *     console.log( matches[ 1 ].getType() );   // 'email'\n     *     console.log( matches[ 1 ].getEmail() );  // 'asdf@asdf.com'\n     *\n     * @param {String} textOrHtml The HTML or text to find matches within\n     *   (depending on if the {@link #urls}, {@link #email}, {@link #phone},\n     *   {@link #hashtag}, and {@link #mention} options are enabled).\n     * @return {Autolinker.match.Match[]} The array of Matches found in the\n     *   given input `textOrHtml`.\n     */\n    Autolinker.prototype.parse = function (textOrHtml) {\n        var _this = this;\n        var skipTagNames = ['a', 'style', 'script'], skipTagsStackCount = 0, // used to only Autolink text outside of anchor/script/style tags. We don't want to autolink something that is already linked inside of an <a> tag, for instance\n        matches = [];\n        // Find all matches within the `textOrHtml` (but not matches that are\n        // already nested within <a>, <style> and <script> tags)\n        parseHtml(textOrHtml, {\n            onOpenTag: function (tagName) {\n                if (skipTagNames.indexOf(tagName) >= 0) {\n                    skipTagsStackCount++;\n                }\n            },\n            onText: function (text, offset) {\n                // Only process text nodes that are not within an <a>, <style> or <script> tag\n                if (skipTagsStackCount === 0) {\n                    // \"Walk around\" common HTML entities. An '&nbsp;' (for example)\n                    // could be at the end of a URL, but we don't want to \n                    // include the trailing '&' in the URL. See issue #76\n                    // TODO: Handle HTML entities separately in parseHtml() and\n                    // don't emit them as \"text\" except for &amp; entities\n                    var htmlCharacterEntitiesRegex = /(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi;\n                    var textSplit = splitAndCapture(text, htmlCharacterEntitiesRegex);\n                    var currentOffset_1 = offset;\n                    textSplit.forEach(function (splitText, i) {\n                        // even number matches are text, odd numbers are html entities\n                        if (i % 2 === 0) {\n                            var textNodeMatches = _this.parseText(splitText, currentOffset_1);\n                            matches.push.apply(matches, textNodeMatches);\n                        }\n                        currentOffset_1 += splitText.length;\n                    });\n                }\n            },\n            onCloseTag: function (tagName) {\n                if (skipTagNames.indexOf(tagName) >= 0) {\n                    skipTagsStackCount = Math.max(skipTagsStackCount - 1, 0); // attempt to handle extraneous </a> tags by making sure the stack count never goes below 0\n                }\n            },\n            onComment: function (offset) { },\n            onDoctype: function (offset) { }, // no need to process doctype nodes\n        });\n        // After we have found all matches, remove subsequent matches that\n        // overlap with a previous match. This can happen for instance with URLs,\n        // where the url 'google.com/#link' would match '#link' as a hashtag.\n        matches = this.compactMatches(matches);\n        // And finally, remove matches for match types that have been turned\n        // off. We needed to have all match types turned on initially so that\n        // things like hashtags could be filtered out if they were really just\n        // part of a URL match (for instance, as a named anchor).\n        matches = this.removeUnwantedMatches(matches);\n        return matches;\n    };\n    /**\n     * After we have found all matches, we need to remove matches that overlap\n     * with a previous match. This can happen for instance with URLs, where the\n     * url 'google.com/#link' would match '#link' as a hashtag. Because the\n     * '#link' part is contained in a larger match that comes before the HashTag\n     * match, we'll remove the HashTag match.\n     *\n     * @private\n     * @param {Autolinker.match.Match[]} matches\n     * @return {Autolinker.match.Match[]}\n     */\n    Autolinker.prototype.compactMatches = function (matches) {\n        // First, the matches need to be sorted in order of offset\n        matches.sort(function (a, b) { return a.getOffset() - b.getOffset(); });\n        var i = 0;\n        while (i < matches.length - 1) {\n            var match = matches[i], offset = match.getOffset(), matchedTextLength = match.getMatchedText().length, endIdx = offset + matchedTextLength;\n            if (i + 1 < matches.length) {\n                // Remove subsequent matches that equal offset with current match\n                if (matches[i + 1].getOffset() === offset) {\n                    var removeIdx = matches[i + 1].getMatchedText().length > matchedTextLength ? i : i + 1;\n                    matches.splice(removeIdx, 1);\n                    continue;\n                }\n                // Remove subsequent matches that overlap with the current match\n                if (matches[i + 1].getOffset() < endIdx) {\n                    matches.splice(i + 1, 1);\n                    continue;\n                }\n            }\n            i++;\n        }\n        return matches;\n    };\n    /**\n     * Removes matches for matchers that were turned off in the options. For\n     * example, if {@link #hashtag hashtags} were not to be matched, we'll\n     * remove them from the `matches` array here.\n     *\n     * Note: we *must* use all Matchers on the input string, and then filter\n     * them out later. For example, if the options were `{ url: false, hashtag: true }`,\n     * we wouldn't want to match the text '#link' as a HashTag inside of the text\n     * 'google.com/#link'. The way the algorithm works is that we match the full\n     * URL first (which prevents the accidental HashTag match), and then we'll\n     * simply throw away the URL match.\n     *\n     * @private\n     * @param {Autolinker.match.Match[]} matches The array of matches to remove\n     *   the unwanted matches from. Note: this array is mutated for the\n     *   removals.\n     * @return {Autolinker.match.Match[]} The mutated input `matches` array.\n     */\n    Autolinker.prototype.removeUnwantedMatches = function (matches) {\n        if (!this.hashtag)\n            remove(matches, function (match) { return match.getType() === 'hashtag'; });\n        if (!this.email)\n            remove(matches, function (match) { return match.getType() === 'email'; });\n        if (!this.phone)\n            remove(matches, function (match) { return match.getType() === 'phone'; });\n        if (!this.mention)\n            remove(matches, function (match) { return match.getType() === 'mention'; });\n        if (!this.urls.schemeMatches) {\n            remove(matches, function (m) { return m.getType() === 'url' && m.getUrlMatchType() === 'scheme'; });\n        }\n        if (!this.urls.wwwMatches) {\n            remove(matches, function (m) { return m.getType() === 'url' && m.getUrlMatchType() === 'www'; });\n        }\n        if (!this.urls.tldMatches) {\n            remove(matches, function (m) { return m.getType() === 'url' && m.getUrlMatchType() === 'tld'; });\n        }\n        return matches;\n    };\n    /**\n     * Parses the input `text` looking for URLs, email addresses, phone\n     * numbers, username handles, and hashtags (depending on the configuration\n     * of the Autolinker instance), and returns an array of {@link Autolinker.match.Match}\n     * objects describing those matches.\n     *\n     * This method processes a **non-HTML string**, and is used to parse and\n     * match within the text nodes of an HTML string. This method is used\n     * internally by {@link #parse}.\n     *\n     * @private\n     * @param {String} text The text to find matches within (depending on if the\n     *   {@link #urls}, {@link #email}, {@link #phone},\n     *   {@link #hashtag}, and {@link #mention} options are enabled). This must be a non-HTML string.\n     * @param {Number} [offset=0] The offset of the text node within the\n     *   original string. This is used when parsing with the {@link #parse}\n     *   method to generate correct offsets within the {@link Autolinker.match.Match}\n     *   instances, but may be omitted if calling this method publicly.\n     * @return {Autolinker.match.Match[]} The array of Matches found in the\n     *   given input `text`.\n     */\n    Autolinker.prototype.parseText = function (text, offset) {\n        if (offset === void 0) { offset = 0; }\n        offset = offset || 0;\n        var matchers = this.getMatchers(), matches = [];\n        for (var i = 0, numMatchers = matchers.length; i < numMatchers; i++) {\n            var textMatches = matchers[i].parseMatches(text);\n            // Correct the offset of each of the matches. They are originally\n            // the offset of the match within the provided text node, but we\n            // need to correct them to be relative to the original HTML input\n            // string (i.e. the one provided to #parse).\n            for (var j = 0, numTextMatches = textMatches.length; j < numTextMatches; j++) {\n                textMatches[j].setOffset(offset + textMatches[j].getOffset());\n            }\n            matches.push.apply(matches, textMatches);\n        }\n        return matches;\n    };\n    /**\n     * Automatically links URLs, Email addresses, Phone numbers, Hashtags,\n     * and Mentions (Twitter, Instagram, Soundcloud) found in the given chunk of HTML. Does not link\n     * URLs found within HTML tags.\n     *\n     * For instance, if given the text: `You should go to http://www.yahoo.com`,\n     * then the result will be `You should go to\n     * &lt;a href=\"http://www.yahoo.com\"&gt;http://www.yahoo.com&lt;/a&gt;`\n     *\n     * This method finds the text around any HTML elements in the input\n     * `textOrHtml`, which will be the text that is processed. Any original HTML\n     * elements will be left as-is, as well as the text that is already wrapped\n     * in anchor (&lt;a&gt;) tags.\n     *\n     * @param {String} textOrHtml The HTML or text to autolink matches within\n     *   (depending on if the {@link #urls}, {@link #email}, {@link #phone}, {@link #hashtag}, and {@link #mention} options are enabled).\n     * @return {String} The HTML, with matches automatically linked.\n     */\n    Autolinker.prototype.link = function (textOrHtml) {\n        if (!textOrHtml) {\n            return \"\";\n        } // handle `null` and `undefined` (for JavaScript users that don't have TypeScript support)\n        /* We would want to sanitize the start and end characters of a tag\n         * before processing the string in order to avoid an XSS scenario.\n         * This behaviour can be changed by toggling the sanitizeHtml option.\n         */\n        if (this.sanitizeHtml) {\n            textOrHtml = textOrHtml\n                .replace(/</g, '&lt;')\n                .replace(/>/g, '&gt;');\n        }\n        var matches = this.parse(textOrHtml), newHtml = [], lastIndex = 0;\n        for (var i = 0, len = matches.length; i < len; i++) {\n            var match = matches[i];\n            newHtml.push(textOrHtml.substring(lastIndex, match.getOffset()));\n            newHtml.push(this.createMatchReturnVal(match));\n            lastIndex = match.getOffset() + match.getMatchedText().length;\n        }\n        newHtml.push(textOrHtml.substring(lastIndex)); // handle the text after the last match\n        return newHtml.join('');\n    };\n    /**\n     * Creates the return string value for a given match in the input string.\n     *\n     * This method handles the {@link #replaceFn}, if one was provided.\n     *\n     * @private\n     * @param {Autolinker.match.Match} match The Match object that represents\n     *   the match.\n     * @return {String} The string that the `match` should be replaced with.\n     *   This is usually the anchor tag string, but may be the `matchStr` itself\n     *   if the match is not to be replaced.\n     */\n    Autolinker.prototype.createMatchReturnVal = function (match) {\n        // Handle a custom `replaceFn` being provided\n        var replaceFnResult;\n        if (this.replaceFn) {\n            replaceFnResult = this.replaceFn.call(this.context, match); // Autolinker instance is the context\n        }\n        if (typeof replaceFnResult === 'string') {\n            return replaceFnResult; // `replaceFn` returned a string, use that\n        }\n        else if (replaceFnResult === false) {\n            return match.getMatchedText(); // no replacement for the match\n        }\n        else if (replaceFnResult instanceof HtmlTag) {\n            return replaceFnResult.toAnchorString();\n        }\n        else { // replaceFnResult === true, or no/unknown return value from function\n            // Perform Autolinker's default anchor tag generation\n            var anchorTag = match.buildTag(); // returns an Autolinker.HtmlTag instance\n            return anchorTag.toAnchorString();\n        }\n    };\n    /**\n     * Lazily instantiates and returns the {@link Autolinker.matcher.Matcher}\n     * instances for this Autolinker instance.\n     *\n     * @private\n     * @return {Autolinker.matcher.Matcher[]}\n     */\n    Autolinker.prototype.getMatchers = function () {\n        if (!this.matchers) {\n            var tagBuilder = this.getTagBuilder();\n            var matchers = [\n                new HashtagMatcher({ tagBuilder: tagBuilder, serviceName: this.hashtag }),\n                new EmailMatcher({ tagBuilder: tagBuilder }),\n                new PhoneMatcher({ tagBuilder: tagBuilder }),\n                new MentionMatcher({ tagBuilder: tagBuilder, serviceName: this.mention }),\n                new UrlMatcher({ tagBuilder: tagBuilder, stripPrefix: this.stripPrefix, stripTrailingSlash: this.stripTrailingSlash, decodePercentEncoding: this.decodePercentEncoding })\n            ];\n            return (this.matchers = matchers);\n        }\n        else {\n            return this.matchers;\n        }\n    };\n    /**\n     * Returns the {@link #tagBuilder} instance for this Autolinker instance,\n     * lazily instantiating it if it does not yet exist.\n     *\n     * @private\n     * @return {Autolinker.AnchorTagBuilder}\n     */\n    Autolinker.prototype.getTagBuilder = function () {\n        var tagBuilder = this.tagBuilder;\n        if (!tagBuilder) {\n            tagBuilder = this.tagBuilder = new AnchorTagBuilder({\n                newWindow: this.newWindow,\n                truncate: this.truncate,\n                className: this.className\n            });\n        }\n        return tagBuilder;\n    };\n    /**\n     * @static\n     * @property {String} version\n     *\n     * The Autolinker version number in the form major.minor.patch\n     *\n     * Ex: 0.25.1\n     */\n    Autolinker.version = '3.15.0';\n    /**\n     * For backwards compatibility with Autolinker 1.x, the AnchorTagBuilder\n     * class is provided as a static on the Autolinker class.\n     */\n    Autolinker.AnchorTagBuilder = AnchorTagBuilder;\n    /**\n     * For backwards compatibility with Autolinker 1.x, the HtmlTag class is\n     * provided as a static on the Autolinker class.\n     */\n    Autolinker.HtmlTag = HtmlTag;\n    /**\n     * For backwards compatibility with Autolinker 1.x, the Matcher classes are\n     * provided as statics on the Autolinker class.\n     */\n    Autolinker.matcher = {\n        Email: EmailMatcher,\n        Hashtag: HashtagMatcher,\n        Matcher: Matcher,\n        Mention: MentionMatcher,\n        Phone: PhoneMatcher,\n        Url: UrlMatcher\n    };\n    /**\n     * For backwards compatibility with Autolinker 1.x, the Match classes are\n     * provided as statics on the Autolinker class.\n     */\n    Autolinker.match = {\n        Email: EmailMatch,\n        Hashtag: HashtagMatch,\n        Match: Match,\n        Mention: MentionMatch,\n        Phone: PhoneMatch,\n        Url: UrlMatch\n    };\n    return Autolinker;\n}());\nexport default Autolinker;\n\n//# sourceMappingURL=autolinker.js.map\n","// WARNING: This file is modified a bit when it is compiled into index.js in \n// order to support nodejs interoperability with require('autolinker') directly. \n// This is done by the buildSrcFixCommonJsIndexTask() function in the gulpfile. \n// See that function for more details.\nimport Autolinker from './autolinker';\nexport default Autolinker;\nexport { Autolinker };\nexport * from './autolinker';\nexport * from './anchor-tag-builder';\nexport * from './html-tag';\nexport * from './match/index';\nexport * from './matcher/index';\n\n//# sourceMappingURL=index.js.map\n",null,null,null,null,"import isArray from './isArray.js';\n\n/**\n * Casts `value` as an array if it's not one.\n *\n * @static\n * @memberOf _\n * @since 4.4.0\n * @category Lang\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast array.\n * @example\n *\n * _.castArray(1);\n * // => [1]\n *\n * _.castArray({ 'a': 1 });\n * // => [{ 'a': 1 }]\n *\n * _.castArray('abc');\n * // => ['abc']\n *\n * _.castArray(null);\n * // => [null]\n *\n * _.castArray(undefined);\n * // => [undefined]\n *\n * _.castArray();\n * // => []\n *\n * var array = [1, 2, 3];\n * console.log(_.castArray(array) === array);\n * // => true\n */\nfunction castArray() {\n  if (!arguments.length) {\n    return [];\n  }\n  var value = arguments[0];\n  return isArray(value) ? value : [value];\n}\n\nexport default castArray;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default strictIndexOf;\n","import baseIndexOf from './_baseIndexOf.js';\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nexport default arrayIncludes;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n"],"sourceRoot":""}